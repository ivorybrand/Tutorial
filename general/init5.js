/**************************************************************************************

Spanish language file (JO2)

***************************************************************************************/

es_language = {
"The IvoryBrand's blog":"El blog de IvoryBrand",
'Read more':'Leer más',
'Do you write about fashion?':'¿Escribes sobre moda?',
'If you like to write about fashion, mention us by Twitter with your post and we will share.':'Si tienes un blog, menciónanos por Twitter con tu post y lo compartiremos.',
"Also, do you want to share your fashion posts on the IvoryBrand's blog? Ask us how. It's very easy!":'Además, ¿quieres que tus posts aparezcan en el blog de IvoryBrand? Pregúntanos cómo. ¡Es muy sencillo!',
'Sell handbags and earn':'Vende bolsos y gana dinero',
'We have many magnific products. Sell and earn. We offer dropshipping. Contact us and we will tell you how.':'Tenemos productos muy buenos. Vende y gana con dropshipping. ¡Pregúntanos cómo y comienza ya!',
'This site uses cookies. if you enter, you will accept the use':'Este sitio usa cookies. Si entras, aceptas el uso',
'Listen an enjoy!':'¡Escucha y disfruta!',
'item(s)':'producto(s)',
'item(s) in cart':'producto(s) en el carrito',
'View cart':'Ver el carrito',
"Cart":"Carrito",
'Filter by':'Filtrar por',
'Categories':'Categorías',
'Gender':'Género',
'Collections':'Colecciones',
'Select':'Selecciona',
'Remove':'Eliminar',
'Men':'Hombre',
'Women':'Mujer',
'Remember!':'¡Recuerda!',
'Worldwide shipping':'Envío a todo el mundo',
'Shipping at home':'Envío a casa',
'(Shippings...)':'(Envíos...)',
'Money return':'Devolución del dinero',
'(100% Satisfaction...)':'(Satisfacción 100%...)',
'Secure payment':'Pago seguro',
'(Payment methods...)':'(Métodos de pago...)',
'Doubts?':'¿Tienes dudas?',
'(Contact us...)':'(Contáctanos...)',
'Why choose us?':'¿Por qué elegirnos?',
'Your encrypted data travels between your computer and our server.':'Tus datos encriptados viajan entre tu ordenador y nuestro servidor.',
'100% Satisfaction':'Satisfacción 100%',
'Money Back immediately in case of defect or loss.':'Devolución del dinero inmediata en caso de defecto o pérdida.',
'Home delivery':'Envío a casa',
'Our products are shipped directly to your home.':'Nuestros productos se te envían directamente a casa.',
'Personal attention':'Atención directa',
'We have various communication channels for any concerns.':'Disponemos de varios canales de comunicación para cualquier cuestión.',
'Search...':'Buscar...',
'Site information':'Información',
'Policies':'Políticas',
'Social media':'Medios sociales',
'Home':'Inicio',
'About us':'Sobre nosotros',
'Contact us':'Contacto',
'Shipping and handling':'Envío y manejo',
'Payment methods':'Métodos de pago',
'Satisfaction policy':'Política de satisfacción',
'Legal notice':'Aviso legal',
'All right reserved':'Todos los derechos reservados',
'Powered by':'Con tecnología',
'Latest products':'Últimos productos',
'Enlarge':'Maximizar',
'See this collection':'Ver esta colección',
'Collection':'Colección',
'unit!':'unidad!',
'units!':'unidades!',
'Hurry up!':'¡Date prisa!',
'Sold out':'Agotado',
'Price':'Precio',
'OFF':'MENOS',
'Color':'Color',
'Quantity':'Cantidad',
'For this product, the shipping cost is ':'Para este producto, el coste de envío es ',
'days approx. depending on the country':'días aprox. dependiendo del país',
'Your packet will be sent with tracking number if you order it on checkout.':'Su paquete será enviado con número de seguimiento si lo pides en el carrito.',
'Refund in case of lost or defect. See our':'Devolución en caso de pérdida o defecto. Mira nuestra',
'satisfaction policy.':'política de satisfacción.',
'Do you have any question?':'¿Alguna pregunta?',
'Contact us!':'¡Contáctanos!',
'Date: ':'Fecha: ',
'You might also like...':'También podría gustarte...',
'Search with filter':'Búsqueda con filtro',
'Checkout':'Carrito',
'Tracking number':'Número de seguimiento',
'Product':'Producto',
'Color':'Color',
'Size':'Talla',
'Qty':'Cant.',
'Subtotal':'Subtotal',
'at':'el',
'January':'Enero',
'February':'Febrero',
'March':'Marzo',
'April':'Abril',
'May':'Mayo',
'June':'Junio',
'July':'Julio',
'August':'Agosto',
'September':'Septiembre',
'October':'Octubre',
'November':'Noviembre',
'December':'Diciembre',
'Royal blue':'Azul oscuro',
'Navy blue':'Azul oscuro',
'Deep blue':'Azul oscuro',
'Dark blue':'Azul oscuro',
'Light blue':'Azul claro',
'Turquoise':'Azul turquesa',
'Khaki':'Caqui',
'Leopard':'Leopardo',
'Blue':'Azul',
'Green':'Verde',
'Olive':'Verde oliva',
'Army green':'Verde',
'Dark green':'Verde oscuro',
'Hunter green':'Verde oscuro',
'Light green':'Verde claro',
'Yellow':'Amarillo',
'Black':'Negro',
'Black and white':'Blanco y negro',
'Sky blue':'Azul celeste',
'White':'Blanco',
'Brown':'Marrón',
'Light brown':'Marrón claro',
'Dark brown':'Marrón oscuro',
'Mocha':'Moca',
'Purple':'Violeta',
'Fuchsia':'Fucsia',
'Lavender':'Lavanda',
'Orange':'Naranja',
'Gray':'Gris',
'Grey':'Gris',
'Light grey':'Gris claro',
'Dark grey':'Gris oscuro',
'Light gray':'Gris claro',
'Dark gray':'Gris oscuro',
'Coffee':'Color café',
'Gold':'Dorado',
'Golden':'Dorado',
'Silver':'Plateado',
'Red':'Rojo',
'Wine red':'Rojo vino',
'Wine':'Rojo vino',
'Light red':'Rojo claro',
'Dark red':'Rojo oscuro',
'Pink':'Rosa',
'Watermelon':'Rosa',
'Light pink':'Rosa claro',
'Dark pink':'Rosa oscuro',
'Salmon':'Salmón',
'Apricot':'Albaricoque',
'Light pink':'Rosa claro',
'Mustard':'Mostaza',
'Add to cart':'Añadir al carrito',
'Product added':'Producto añadido',
'Management info':'Administración',
'SKU':'Ref.',
'Supplier':'Proveedor',
'Posted by':'Subido por',
'Edit product':'Editar producto',
'Stock':'Stock',
'See website':'Ver web',
'Supplier price':'Precio de proveedor',
'See the product':'Ver el producto',
'Profit':'Ganancia',
'units':'unidades',
'unit':'unidad',
'Product weight':'Peso del producto',
'Thank you':'¡Gracias!',
'Incorrect order':'Pedido incorrecto',
'team':'Equipo',
'You have':'Tienes',
'Subtotal in Cart':'Subtotal del carrito',
'Shipping cost':'Coste de envío',
'Fast shipping':'Envío rápido',
'Super saver shipping':'Envío super económico',
'Paypal commission':'Comisión de Paypal',
'Grand total':'Total',
'Get the tracking number of your order and stay calm!':'Obtén el número de seguimiento de tu pedido y ¡mantén la calma!',
'Select your country':'Selecciona tu país',
'You can pay with credit card or PayPal':'Puedes pagar con tarjeta de crédito o Paypal',
'Your packet will be sent with tracking number if you order it':'Tu paquete será enviado con número de seguimiento si lo pides',
'Do you have any question?':'¿Alguna pregunta?',
'Place the order':'Realizar el pedido',
'The main questions that our customers have are':'Las principales preguntas que nuestros clientes tienen son',
'How long does the delivery take?':'¿Cuánto tiempo tarda el envío?',
'You can see this information in':'Puedes ver esta información en',
'What method of payment are there?':'¿Qué metodos de pago hay?',
'You can pay with credit card or PayPal. We accept Mastercard, Visa, Discover... The payment is secure and easy':'Puedes pagar con tarjeta de crédito o Paypal. Aceptamos Mastercard, Visa, Discover... El pago es seguro y muy fácil',
'Where are we from?':'¿De donde somos?',
'We are based in':'Nuestra sede se ubica en',
'For everything else, you can contact us by':'Para todo lo demás, puedes ponerte en contacto con nosotros por',
'E-mail':'E-mail',
'Telephone':'Teléfono',
'We will reply as soon as possible':'Te responderemos lo más rápido posible',
'Your order had an error. Please, try again or contact us.':'Tu pedido ha tenido un error. Por favor, intenta realizarlo otra vez o contacta con nosotros.',
'Success submission! Paypal will send you an automated e-mail notification for your reference. Please check your e-mail inbox for purchase order details and banking transaction options.':'¡Pedido completado! Paypal te enviará un mensaje automático. Por favor, comprueba tu correo para ver los detalles de tu pedido.',
'Thank you again for your purchase!':'¡Gracias nuevamente por tu compra!',
'is a good online commercial company based in':'es una gran compañía comercial online con sede en',
'Our company has earned itself a solid reputation for quality, good service, reliability and professionalism in this field':'Nuestra compañía se ha ganado una sólida reputación por la calidad, buen servicio y profesionalidad en este campo',
'Our operation capabilities cover favorable policy, instant and safe delivery, privacy protection and well-rounded customer support':'Nuestra capacidad de operación cubre nuestras políticas favorables, entrega inmediata y segura, protección de privacidad y gran soporte',
'The mission of':'La misión de',
'is to provide you with the best products to the best prices':'es proveerte con los mejores productos al mejor precio',
'Our reputation, experience and keen industry insight permit us to negotiate low prices on the net':'Nuestra reputación, experiencia y conocimiento en la industria nos permite darte precios bajos en la red',
'If you have a suggestion you would like to share with our team, please let us know':'Si tienes cualquier sugerencia, puedes compartirla con nuestro equipo',
'Customer feedback shapes our business and allows us to better serve our audience so your ideas are always welcome':'Los comentarios de nuestros clientes dan forma a nuestro negocio y nos permiten dar un mejor servicio, por tanto, tus ideas son bienvenidas',
'respects your right to privacy':'respeta tus derechos de privacidad',
'Our goal is your complete satisfaction and we are not in the business of sharing your information with others':'Nuestro objetivo es tu completa satisfacción, no estamos en este negocio para compartir tu información con otros',
'All personal data is stored on our secure server with several layers of firewall protection':'Toda la información sensible se almacena en nuestros seguros servidores con protección Firewall',
'We promise to':'Te aseguramos',
'Provide 24/7 customer support on weekdays':'Proveerte un soporte continuo',
'Streamline the buying and paying process':'Un proceso de compra y pago fácil y fluido',
'Deliver goods to our customers with speed and precision':'Envío de productos con rapidez y precisión',
'Ensure the excellent quality of our products':'Excelencia en la calidad de nuestros productos',
'We hope our customers get a great experience buying our products':'Deseamos que nuestros clientes obtengan la mejor experiencia con la compra de nuestros productos',
'What shipping methods do you offer?':'¿Qué tipo de envíos hay?',
'The order will be sent directly to your address':'El pedido será enviado directamente a tu dirección',
'The shipping method is':'El tipo de envío es',
'The shipping methods available are':'Los tipos de envíos disponibles son',
'The delivery time is':'El tiempo de envío es',
'Flat rate shipping':'Envío modalidad básica',
'Standard rate shipping':'Envío estándar',
'Expedited rate shipping':'Envío urgente',
'days approx.':'días aprox.',
'The total shipping time is the order picking + handling time + shipping time':'El tiempo total de envío consta de la preparación del pedido + tiempo de manipulación + tiempo de envío',
'Normally, the processing time is very low':'Normalmente, el tiempo de preparación suele ser muy bajo',
'The shipping time can vary depending on the country':'El tiempo de envío puede variar en función del país',
'How do I calculate shipping costs?':'¿Cómo se calcula el coste de envío?',
'You will choose the shipping method on checkout':'Podrás elegir el tipo de envío en el carrito',
'The shipping cost is':'El coste de envío es',
'regardless of the products you buy':'independientemente de los productos que compres',
'The shipping cost will vary depending the shipping method you select':'El coste de envío variará en función del tipo de envío que selecciones',
'You can see it on checkout':'Podrás verlo más detalladamente en el carrito',
'The shipping cost will also vary depending on the weight of the products you add to cart':'El coste de envío también variará en función del peso de los productos que añadas al carrito',
'How can I track my package?':'¿Cómo puedo ver el estado de mi pedido?',
'If you choose the tracking number on checkout, you will get your tracking number and you will track':'Si eliges el número de seguimiento en el carrito, podrás conseguirlo y ver el estado de tu pedido',
'Do you ship to my country?':'¿Envías a mi país?',
'Do not worry! We send to worldwide':'¡No tienes de qué preocuparte! Enviamos a todo el mundo',
'Actually we send to':'Actualmente enviamos a',
'and':'y',
'If you do not find your county in the list, contact us':'Si no encuentras tu país en la lista, contacta con nosotros',
'If custom duties are incurred, who is responsible?':'Si aparecen costes de aduana, ¿Quién los asume?',
'It is the responsibility of the customer for any custom duty fees that may be charged upon delivery':'Los costes de aduana que puedan aparecer son responsabilidad del cliente',
'The import duty will depend of the custom policies of each country':'El cobro de aranceles dependerá de las políticas de aduana de cada país',
'If the Package held by Customs, who will be responsible for Package clearance?':'Si el paquete queda retenido por aduanas, ¿Quién se hará cargo?',
'If the items are detained by Customs after the shipment is done, the buyer is responsible for clearance of the detained items':'Si el paquete queda retenido por aduanas, el cliente será responsable',
'How do I change my shipping address?':'¿Cómo puedo cambiar mi dirección de envío?',
'If your order has been sent, you cannot change your shipping address. If the packet is not sent, contact us quickly':'Si tu pedido ya fue enviado, no se puede cambiar la dirección. Si aun no se ha enviado, contacta con nosotros rápidamente',
'Shipping methods':'Tipos de envío',
'Total weight':'Peso total',
'If your purchase is over':'Si tu compra es superior a',
'your shipping will be free!':'¡el envío será gratuito!',
'United States':'Estados Unidos',
'USA':'Estados Unidos',
'US':'Estados Unidos',
'China':'China',
'Japan':'Japón',
'Germany':'Alemania',
'France':'Francia',
'United Kingdom':'Reino Unido',
'Brazil':'Brasil',
'Italy':'Italia',
'Russia':'Rusia',
'India':'India',
'Canada':'Canadá',
'Australia':'Australia',
'Spain':'España',
'South Korea':'Corea del Sur',
'Mexico':'México',
'Indonesia':'Indonesia',
'Netherlands':'Holanda',
'Turkey':'Turquía',
'Switzerland':'Suiza',
'Sweden':'Suecia',
'Poland':'Polonia',
'Belgium':'Bélgica',
'Argentina':'Argentina',
'Austria':'Austria',
'Thailand':'Tailandia',
'South Africa':'Sudáfrica',
'Venezuela':'Venezuela',
'Colombia':'Colombia',
'Denmark':'Dinamarca',
'Malaysia':'Malasia',
'Singapore':'Singapur',
'Chile':'Chile',
'Hong Kong':'Hong Kong',
'Egypt':'Egipto',
'Philippines':'Filipinas',
'Greece':'Grecia',
'Finland':'Finlandia',
'Portugal':'Portugal',
'Ireland':'Irlanda',
'Peru':'Perú',
'Qatar':'Qatar',
'Ukraine':'Ucrania',
'New Zealand':'Nueva Zelanda',
'Romania':'Rumanía',
'Hungary':'Hungría',
'Puerto Rico':'Puerto Rico',
'Morocco':'Marruecos',
'Ecuador':'Ecuador',
'Cuba':'Cuba',
'Croatia':'Croacia',
'Luxembourg':'Luxemburgo',
'Guatemala':'Guatemala',
'Uruguay':'Uruguay',
'Andorra':'Andorra',
'How can I pay?':'¿Cómo puedo pagar?',
'You can pay on checkout when you add your product to shopping cart. We have two methods: Credit card and Paypal':'Puedes pagar en el carrito cuando añadas tus productos a la cesta. Tenemos dos formas de pago: Tarjeta de crédito y paypal',
'What credit cards do we accept?':'¿Qué tarjetas de crédito aceptamos',
'We accept the credit cards most used':'Aceptamos las tarjetas de crédito más usadas',
'Mastercard, Visa, American Express, Discover and Aurora':'Mastercard, Visa, American Express, Discover y Aurora',
'What advantages do I have if I pay with paypal?':'¿Qué ventajas tengo si pago con paypal?',
'You can get many advantages':'Puedes obtener muchas ventajas',
'Secure system and secure payments, buy and pay with your mobile or tablet, no membership fees or service charges, discount coupons':'Sistema seguro y pago seguro, compra y paga con tu móvil o tablet, sin comisiones, cupones de descuentos',
'We will try our best to make sure the products shipped to our customers are in good quality':'Vamos a intentar todo lo posible para que los productos enviados estén en el mejor estado posible',
'If there are some problems on the goods, you have right to guarantee your benefits':'Si hay algún problema con los productos, tienes derecho a reclamar',
'You do not have to worry about anything!':'¡No tienes que preocuparte por nada!',
'Return and refund':'Devolución del producto y reembolso',
'The products with quality problem can be returned and refund':'Los productos con problemas de calidad pueden ser devueltos y reembolsados',
'The customer will need to send the products back to us':'El cliente tendría que reenviarnos el producto',
'When we receive the products, we will give the refund':'Cuando recibbamos los producto, reenviaremos el reembolso',
'Loss':'Pérdida',
'If your packet has been sent but you do not receive the packet, the problem is the carrier':'Si tu paquete ha sido enviado pero no lo recibes, el problema es de la compañía de envíos',
'But we want to have satisfied customer':'Pero nosotros queremos clientes satisfechos',
'For that, if your packet is lost, we will refund your money or we will send again':'Por eso, si tu paquete se pierde, te devolveremos el dinero y te reenviamos otro',
'Products with quality problem can be returned and replaced':'Los productos con problemas de calidad pueden ser devueltos y reemplazados',
'Customer need to send the products back to us':'El cliente necesitaría reenviarnos el paquete',
'When we receive the products, we will replace new ones and ship back to customer':'Cuando nos llegue el paquete, lo reemplazaremos y lo enviaremos de nuevo',
'Replace':'Reemplazo',
'1.- INTRODUCTION':'1.- INTRODUCCIÓN',
'This document is intended to establish and regulate the terms of use and safeguarding the data of the site':'El presente documento tiene como finalidad el establecer y regular las normas de uso así como la salvaguardia de los datos del Sitio',
'(from now on called “the Site”) understanding that the site has all the pages and contents owned by':'(en adelante el "Sitio"), entendiendo por Sitio todas las páginas y sus contenidos propiedad de',
'which is accessed through the domain':'a las cuales se accede a través del dominio',
'The use of this site as well as the services it offers to the user, implies full and unreserved acceptance of each and every one of the conditions contained in this Legal Notice (from here on "General Conditions ")':'La utilización de esta página, así como de los servicios que en ella se pone a disposición del usuario, supondrá la aceptación plena y sin reservas de todas y cada una de las condiciones generales recogidas en la presente Información Legal (en adelante las "Condiciones Generales")',
'so the user should be aware of the importance of reading them each time the user visits the Site':'por lo que el usuario deberá de ser consciente de la importancia de leerlas cada vez que visite el Sitio',
'Accessing the Site implies knowing and  accepting the following "General Conditions" which':'El acceso al Sitio implica el conocimiento y aceptación de las siguientes "Condiciones Generales" que',
'recommends the users to print or download and read  carefully each time the user accesses the Site':'recomienda al usuario su impresión o su descarga y lectura detallada cada vez que acceda al Sitio',
'2.-GENERAL INFORMATION':'2.-INFORMACIÓN GENERAL',
'In compliance with the duty to inform the customer contained in Article 10 of Law 34/2002, of July 11, of the Society Services of the Information  and Electronic Commerce, below we reflect the following':'En cumplimiento con el deber de información recogido en artículo 10 de la Ley 34/2002, de 11 de julio, de Servicios de la Sociedad de la Información y del Comercio Electrónico, a continuación se reflejan los siguientes datos',
'is an entity from':'es una entidad de',
'The email contact is':'El email de contacto es',
'and the telephone':'y el teléfono',
'3. - USE OF THE SITE':'3. - USO DEL SITIO',
'By accepting these Terms the user agrees to use the Website and the services it provides in the way, the manner and form in which it is established':'Mediante la aceptación de las presentes Condiciones Generales el usuario se compromete a usar el presente Sitio y los servicios puestos a su disposición en el mismo, de la manera y en la forma que en él mismo se establece',
'Users may not use this Site and its services for illegal and / or contrary purposes against those  stated in the General Conditions, which may be detrimental to the rights and / or interests of others or in any way damage the Site preventing it or its present and future services to work':'Quedando obligado a no utilizar el presente Sitio y sus servicios con fines ilícitos y/o contrarios a los fines establecidos en estas Condiciones Generales, que pudieran ser lesivos de derechos y/o intereses de terceros o que de cualquier forma puedan dañar el presente Sitio o impedir su correcto funcionamiento o de los servicios que en él se ofrecen u ofrecieran en el futuro',
'4.- SCOPE OF THE SITE. USER RESPONSIBILITY':'4.- ÁMBITO DEL SITIO. RESPONSABILIDAD DEL USUARIO',
'The access to this site is the sole responsibility of the users. That includes any risks arising from the use of the Site':'El acceso a este Sitio es responsabilidad exclusiva de los usuarios. Los riesgos derivados de la utilización del Sitio por el usuario serán a su único y exclusivo cargo. No es objeto de garantía por parte de el Sitio',
'does NOT guarantee':'NO se responsabiliza',
'(I) The infallibility, availability, continuity, absence of defects or safety of the Site':'(I) La infalibilidad, la disponibilidad, la continuidad, la inexistencia de deficiencias y la seguridad del Sitio',
'(II) The content of the Site or the information passing through it are free of viruses or other harmful elements such as errors, omissions or inaccuracies':'(II) Que el contenido del Sitio o la información que pasa a través de él esté libre de virus o de otros elementos lesivos así como de errores, omisiones o incorrecciones',
'(III) The safety of the user of the Website; The size not be liable for any loss or damage that may arise from interferences, omissions, interruptions, computer viruses, telephone faults or disconnections in the operational functioning of this electronic system , due to causes unrelated to the Site, the delays or blockages in the use of this electronic system caused by deficiencies or overloading in the data processing Centre, telephone lines, in the Internet system or other electronic systems, nor damage that may be caused by third parties through illegalities beyond the control of the Site':'(III) La seguridad en la utilización que el usuario haga del Sitio; El Sitio no será responsable de posibles daños o perjuicios que se pudieran derivar de interferencias omisiones, interrupciones, virus informáticos, averías telefónicas o desconexiones en el funcionamiento operativo de este sistema electrónico, motivadas por causas ajenas a el Sitio; de retrasos o bloqueos en el uso del presente sistema electrónico causados por deficiencias o sobrecargas en su Centro de Procesos de Datos, de líneas telefónicas , en el sistema de Internet o en otros sistemas electrónicos; ni tampoco de daños que puedan ser causados por terceras personas mediante intromisiones ilegítimas fuera del control del Sitio',
'It also exempts the Site from liability for any loss or damage incurred by you as a result of errors, defects or omissions in the information provided by the Site provided from outside sources':'Asimismo, se exonera a el Sitio de responsabilidad ante cualquier daño o perjuicio que pudiera sufrir el usuario como consecuencia de errores, defectos u omisiones, en la información facilitada por el Sitio siempre que proceda de fuentes ajenas',
'Mere access to the Site does not imply any kind of commercial relationship between the user and the Site':'El mero acceso a este Sitio no supone entablar ningún tipo de relación de carácter comercial entre el Sitio y el usuario',
'5.- UPDATING AND MODIFICATION OF INFORMATION':'5.- ACTUALIDAD Y MODIFICACIÓN DE LA INFORMACIÓN',
'The information on this site is accurate at the date of the last update. The Site reserves the right to update, modify or delete information on this Site, and may limit or deny access. The Site reserves the right to make, at any time, changes and modifications deemed desirable, and may exercise this right at any time and without notice':'La información que aparece en este Sitio es la vigente en la fecha de su última actualización. El sitio se reserva el derecho a actualizar, modificar o eliminar la información de este Sitio, pudiendo limitar o no permitir el acceso al mismo. El sitio se reserva la facultad de efectuar, en cualquier momento, cuantos cambios y modificaciones estime convenientes, pudiendo hacer uso de tal facultad en cualquier momento y sin previo aviso',
'6.- CONTENTS':'6.- CONTENIDOS',
'The Site does not guarantee, or accepts responsibility for the consequences that may result from errors in the contents appearing on the Site provided by others. The Site is not responsible in any way for the contents, commercial activities, products and services that can be viewed through electronic links (links) if there were any, and if there were, directly or indirectly, through this Site':'El Sitio no garantiza, ni se responsabiliza de las consecuencias que pudieran derivarse de los errores en los contenidos que pudieran aparecer en este Sitio proporcionados por terceros. El Sitio no se responsabiliza en modo alguno de aquellos contenidos, actividades comerciales, productos y servicios incluidos que pudiesen visualizarse mediante enlaces electrónicos (links) si los hubiera y cuando los hubiere, de forma directa o indirectamente, a través de este Sitio',
'The presence of links in the the Site Website, unless expressly stated otherwise, is for informational purposes only and in no way a suggestion, invitation or recommendation thereof. These links do not represent any kind of relationship between the Site and companies or owners of the websites that can be accessed through these links. The Site reserves the right to withdraw unilaterally and at any time and without notice the link from its Site':'La presencia de links en el Sitio de el Sitio, salvo manifestación expresa en contrario, tiene una finalidad meramente informativa y en ningún caso supone sugerencia, invitación o recomendación sobre los mismos. Estos enlaces no representan ningún tipo de relación entre el Sitio y las empresas o particulares titulares de los sitios webs a los que puede accederse mediante estos enlaces. El Sitio se reserva el derecho de retirar de modo unilateral y en cualquier momento y sin previo aviso los enlaces que pudieran aparecer en su Sitio',
'The Site reserves the right to prevent or prohibit access to the Site to any Internet user to enter this site any content contrary to legal or moral standards, reserving the right to pursue legal action it deems necessary to prevent such behaviours':'El Sitio se reserva el derecho a impedir o prohibir el acceso al Sitio a cualquier usuario de Internet que introduzca en este Sitio cualquier contenido contrario a las normas legales o sea inmoral, reservándose el derecho de ejercer las medidas legales que estime oportunas para evitar este tipo de conductas',
'7.- NAVIGATION, ACCESS AND SECURITY':'7.- NAVEGACIÓN, ACCESO Y SEGURIDAD',
'The Site Central makes every effort to ensure that browsing takes place under optimum conditions and to avoid any type of damage that may occur during the same. The Site is not liable for damages of any kind that may be caused to users by using other browsers or different versions of the browsers for which the Site is designed':'Central de El Sitio realiza los máximos esfuerzos para que la navegación se realice en las mejores condiciones y evitar los perjuicios de cualquier tipo que pudiesen ocasionarse durante la misma. El Sitio no se hace responsable de los perjuicios, de cualquier índole, que pudieran ocasionarse a los usuarios por la utilización de otros navegadores o versiones distintas de los navegadores para los que ha sido diseñado el Sitio',
'The Site makes no representation or guarantee that access to this Site will be uninterrupted or error free. No responsibility or guarantee that the content or software that can be accessed through this site is free from error or cause damage. The Site, in no event, can be liable for any losses or damages of any kind arising from the access and use of the Site, including but not limited to damage to systems or those caused by a virus':'El Sitio no se responsabiliza ni garantiza que el acceso a este Sitio sea ininterrumpido o que esté libre de error. Tampoco se responsabiliza o garantiza que el contenido o software al que pueda accederse a través de este Sitio, esté libre de error o cause un daño. En ningún caso el Sitio será responsable por las pérdidas, daños o perjuicios de cualquier tipo que surjan por el acceso y el uso del Sitio, incluyéndose pero no limitándose, a los ocasionados a los sistemas informáticos o los provocados por la introducción de virus',
'The Site is not responsible for any damage that may be caused to users by improper use of this Site. In particular, is not responsible in any way for breakdowns, interruptions, faults or defects in telecommunications that may occur. The services offered on the Site may only be used correctly if they meet the technical specifications for which it was designed':'El Sitio no se hace responsable de los daños que pudiesen ocasionarse a los usuarios por un uso inadecuado de este Sitio. En particular, no se hace responsable en modo alguno de las caídas, interrupciones, falta o defecto de las telecomunicaciones que pudieran ocurrir. Los servicios ofertados en este Sitio sólo pueden ser utilizados correctamente si se cumplen las especificaciones técnicas para las que ha sido diseñado',
'8.- DATA PROTECTION':'8.- PROTECCIÓN DE DATOS',
'The processing of personal data and sending electronic communications are regulated by  the rules established in the Organic Law':'El tratamiento de los datos personales y el envío de comunicaciones por medios electrónicos están ajustados a la normativa establecida en la Ley Orgánica15/1999,13 de Diciembre, de Protección de Datos de Carácter Personal (B.O.E.14/12/1999) y en la Ley 34/2002, de 11 de Julio, de Servicios de la Sociedad de la información y de Correo Electrónico (B.O.E.12/07/2002)',
'In accordance with the provisions of the current legislation on data protection, we inform you that your personal data will be incorporated into the Site Personnel Selection file in order to have your professional history for selection and contractual purposes':'De acuerdo con lo dispuesto en la legislación vigente en materia de protección de datos, te informamos de que tus datos personales serán incorporados al fichero de Selección de Personal de el Sitio con la finalidad de contar con tu historia profesional para desarrollar las funciones de selección y contratación',
'Also, unless stated otherwise, the Site and any of the Companies that make up the Site, shall have access to your personal information, solely for the purposes described above. The Site guarantees the right to access, rectify, cancel and object to the processing of data which must be notified in writing':'Asimismo, salvo oposición expresa al respecto, tendrán acceso a tus datos personales cualquiera de las Empresas que conforman el Sitio, exclusivamente con las finalidades descritas anteriormente. El Sitio garantiza el ejercicio de los derechos de acceso, rectificación, cancelación y oposición escrita',
'If after one year from the inclusion of your personal data you have not heard from us, we will proceed to erase the data from our file':'Si pasado un año desde la inclusión de tu currículo no has tenido noticias nuestras, procederemos al borrado de los datos de nuestro fichero',
'9.- USE OF COOKIES':'9.- USO DE COOKIES',
'Access to the Website may imply the use of cookies on its pages and those pages linked or referenced through links. Users who do not wish to receive cookies or want to be informed of their use may configure your browser accordingly':'El acceso a este Sitio puede implicar la utilización de cookies, tanto en sus páginas como en las enlazadas o referenciadas mediante links. Aquellos usuarios que no deseen recibir Cookies o quieran ser informados de su fijación pueden configurar su navegador a tal efecto',
'10.- INTELLECTUAL PROPERTY AND COPYRIGHT':'10.- PROPIEDAD INTELECTUAL Y DERECHOS DE AUTOR',
'The Site declares that unless otherwise indicated in the Site, text, images, illustrations, designs, icons, photographs, video clips, sound clips and other materials found on the Site and any other intellectual creations and / or inventions or scientific and technical discoveries, whatever their commercial or industrial application (from here on  collectively named "Content") have been created or invented by the Site or transferred, licensed, transmitted or authorized by the owners and / or assignees':'El Sitio declara que salvo que se indique lo contrario en el Sitio, los textos, imágenes, ilustraciones, diseños, iconos, fotografías, segmentos de vídeo, segmentos de sonido y demás materiales que se encuentren en el Sitio y cualesquiera otras creaciones intelectuales y/o invenciones o descubrimientos científicos y técnicos, cualquiera que sea su aplicación empresarial o industrial (en adelante colectivamente denominados el "Contenido") han sido creados o inventados por el sitio o cedidos, licenciados, transmitidos o autorizados a ésta por sus titulares y/o cesionarios',
'The User agrees not to remove or alter any distinctive sign used on the Site, including, but not be limited, brand names, trademarks (graphics, logos, etc), the "copyright" and other data identifying the rights of the Site or third parties on the Website':'El Usuario se compromete a no suprimir o alterar cualesquiera signo distintivo utilizado en el Sitio, tales como, con carácter no exhaustivo, marcas, nombres comerciales (gráficos, logotipos, etc), el "copyright" y demás datos identificativos de los derechos de el Sitio o de terceros titulares incorporados en el Sitio',
'The Site own all rights over any works, inventions, discoveries, patents, ideas, concepts, updates and improvements related to the Site,  systems, applications and programs or services provided by the Site, which are created , made, developed or implemented first by the Site either alone or with the help of users of the Site, during or as a result of a design, development or other activity performed in accordance with the Contract':'Son propiedad de el Sitio igualmente todos los derechos sobre cualesquiera obras, inventos, descubrimientos, patentes, ideas, conceptos, actualizaciones y las mejoras relacionadas con el Sitio, sus sistemas, aplicaciones y programas o con los servicios que el Sitio presta, que sean creados, realizados, desarrollados o puestos en práctica por primera vez por el Sitio ya sea por sí sola o con la ayuda de los usuarios del Sitio, en el transcurso o como resultado de algún diseño, desarrollo o cualquier otra tarea realizada de conformidad con el Contrato',
'You may not use the name, trademarks, symbols, logos or distinctive signs of ownership by the Site without the express written consent of the latter':'El Usuario no podrá utilizar el nombre ni las marcas, símbolos, logos o signos distintivos de titularidad de por el Sitio sin el consentimiento expreso y escrito de ésta',
'In the event that any user or third party considers that any of the content on the site is in violation of copyright or other rights of intellectual property protection, please notify us at':'En caso de que cualquier usuario o tercero considere que cualquiera de los contenidos existentes en la Sitio suponga una violación de los derechos de autor u otros derechos de protección de la propiedad intelectual, rogamos que lo comunique a',
'11.- JURISDICTION AND LAW':'11.- JURISDICCIÓN Y LEGISLACIÓN APLICABLE',
'The Terms of Use that are in this Agreement are governed by law. Both the Site and the users of the Site agree that any dispute that may arise regarding the interpretation, compliance and / or enforcement of these rules shall be subject to the jurisdiction of the Courts and Tribunals , with expressly waive any other jurisdiction that may correspond':'Las Normas de Uso que se encuentran en el presente Acuerdo Legal, se rigen por la ley. Tanto el Sitio como los usuarios del Sitio están de acuerdo en que para cualquier discrepancia que pueda surgir en cuanto a la interpretación, cumplimiento y/o ejecución, de las presentes normas se someterán expresamente a la jurisdicción de los Jueces y Tribunales competentes, con renuncia expresa, a cualquier otro fuero que pudiera corresponderles',
'Euro':'Euro',
'US dollar':'Dólar estadounidense',
'Pound sterling':'Libra esterlina',
'Management':'Administración',
'Product in stock':'Producto en stock',
'Create product':'Crear producto',
'Overview':'Visión general',
'Products':'Productos',
'Pages':'Páginas',
'Stats':'Estadísticas',
'Layout':'Diseño',
'Template':'Plantilla',
'Settings':'Configuración',
'Images':'Imágenes',
'Sign out':'Cerrar sesión',
'Prev':'Anterior',
'Next':'Siguiente',
'Name':'Nombre',
'Email':'Email',
'Message':'Mensaje',
'Send':'Enviar',
'Please, insert a correct email':'Por favor, inserta un email correcto',
'Please, write a message':'Por favor, escribe un mensaje',
'Your message has been sent. Thanks!':'Tu mensaje ha sido enviado. ¡Gracias!',
'Through the following contact form':'A través del siguiente formulario de contacto',
'Edit notes':'Editar notas',
'Unique size':'Talla única',
'One size':'Talla única',
'Accessories':'Accesorios',
'Bags backpacks and wallets':'Maletas, bolsos y carteras',
'Corsets and bustiers':'Corsets',
'Dresses':'Vestidos',
'Heels boots and sandals':'Tacones, botas y sandalias',
'Jackets and coats':'Chaquetas y abrigos',
'Leggings and pantyhose':'Leggings',
'Pants and jeans':'Pantalones y vaqueros',
'Shirts polo shirts and blouses':'camisas, polos y blusas',
'Shoes and sneakers':'zapatos y zapatillas',
'Skirts':'Faldas',
'Totes':'Bolsos',
'Wallets':'Monederos',
'Clutches':'Bolsos de mano',
'Backpacks':'Mochilas',
'Suits and blazers':'Trajes y americanas',
'Sweaters and hoodies':'Sudaderas y suéteres',
'Tees long sleeves and tops':'Camisetas de manga corta, larga y asillas',
"Main dh diamond horn tee":"Camiseta main dh diamond horn",
"Sexy girl diamond horn tee":"Camiseta sexy girl diamond horn",
"Audio cassette diamond horn tee":"Camiseta audio cassette diamond horn",
"Tees; long sleeves and tops":"Camisetas de manga corta; larga y asillas",
"MMA division tee":"Camiseta MMA division",
"Defeat thy rivals tee":"Camiseta Defeat thy rivals",
"Extreme cage fighter tee":"Camiseta Extreme cage fighter",
"Mixed marcial arts tee":"Camiseta Mixed marcial arts",
"Training to be a cage fighter tee":"Camiseta Training to be a cage fighter",
"MMA fighter tee":"Camiseta MMA fighter",
"Mixed marcial arts tee":"Camiseta Mixed marcial arts",
"Cage fighter tee":"Camiseta Cage fighter",
"Bushido MMA tee":"Camiseta Bushido MMA",
"Brooklyn boxing gym tee":"Camiseta Brooklyn boxing gym",
"Bojewoje sambo tee":"Camiseta Bojewoje sambo",
"Mma Full contact fighter warriors long sleeves":"Camiseta de manga larga Mma Full contact fighter warriors",
"New zealand all black long sleeves":"Camiseta de manga larga New zealand all black",
"Rugby athletic train long sleeves":"Camiseta de manga larga Rugby athletic train",
"Hardcore cage fighting long sleeves":"Camiseta de manga larga Hardcore cage fighting",
"Cage fighter mma fight to the end tee":"Camiseta Cage fighter mma fight to the end",
"Mma fight division bulldog tee":"Camiseta Mma fight division bulldog",
"Muay thai the art of fighting tee":"Camiseta Muay thai the art of fighting",
"Mma fighter warrior spirit tee":"Camiseta Mma fighter warrior spirit",
"Mixed marcial arts fight with honor tee":"Camiseta Mixed marcial arts fight with honor",
"Mma fighter training discipline respect tee":"Camiseta MMA fighter training discipline respect",
"Jiu jitsu red cover tee":"Camiseta Jiu jitsu red cover",
"Cage fighter don't give up the fighter tee":"Camiseta Cage fighter don't give up the fighter",
"Mma fighters tee":"Camiseta MMA fighters",
"Full contact mma tee":"Camiseta Full contact MMA",
"Full contact mixed martial arts tee":"Camiseta Full contact mixed martial arts",
"Muay thai full contact tee":"Camiseta Muay thai full contact",
"Hard knocks boxing gym tee":"Camiseta Hard knocks boxing gym",
"Born 2 be a boxer tee":"Camiseta Born 2 be a boxer",
"Invincible tee":"Camiseta Invincible",
"Jiu-jitsu tee":"Camiseta Jiu-jitsu",
"MMA Mixed marcial arts tee":"Camiseta MMA Mixed marcial arts",
"Urban fighters tee":"Camiseta Urban fighters",
"Ultimate fight dept. tee":"Camiseta Ultimate fight dept.",
"Seek and destroy tee":"Camiseta Seek and destroy",
"Rocky balboa boxing gym tee":"Camiseta Rocky balboa boxing gym",
"Primus pilus mma tee":"Camiseta Primus pilus MMA",
"The newspaper tee":"Camiseta The newspaper",
"Muay thai boxing tee":"Camiseta Muay thai boxing",
"Do you have a fashion blog?":"¿Tienes un blog de moda?",
"We love the world of fashion and accessories and we want to promote it. Do you have a fashion blog or write posts? Mention us by Twitter and we'll share. So we'll give promotion":"Nos encanta el mundo de la moda y accesorios y nos gustaría promoverlo. ¿Tienes un blog de moda o escribes posts? Menciónanos por twitter con tus posts y lo compartiremos. ¡Así consigues promoción!",
"This store is configured to be able to purchase and ship your items to somewhere in the world. Do you live in US, Brazil, Australia, Europe...? Are you going on vacation and you want it delivered? No Problem! We'll send it!":"Esta tienda está configurada para poder comprar y enviar tu producto a cualquier parte del mundo. ¿Vives en Estados Unidos, América latina, España? ¿Vas a irte de vacaciones y quieres que te lo enviemos? ¡No hay problema! Te lo enviaremos.",
"Use our shipments!":"¡Usa nuestros envíos!",
"Don't risk!":"¡No te arriesgues!",
"We have the best satisfaction policy. If your packet is lost or you receive a defective product, we will refund your money immediately. Don't risk buying at other stores and losing your money. Here your order is secure. Try it!":"Tenemos la mejor política de satisfacción. Si tu paquete se perdió o recibiste un producto defectuoso, te reembolsaremos el dinero inmediatamente. No arriesgues comprando en otras tiendas y perdiendo tu dinero. Aquí tu pedido es seguro. ¡Pruébalo!",
"Not disappoint!":"¡No te defraudará!",
"The best spanish brand: 'Diamond horn'":"La marca española: 'Diamond Horn'",
"We are glad for to present you a cool clothing brand: 'Diamond horn'. They bring a magnific collection of nice products. We are the only one authorized dealer. You will not find these products anywhere else. Are you going to let it go?":"Nos enorgullece presentarte una gran marca de ropa: 'Diamond horn'. Ellos nos traen una magnífica colección de muy buenos productos. Somos los únicos distribuidores autorizados. No encontrarás estos productos en ningún otro sitio. ¿Vas a dejarlo escapar?",
"Take advantage!":"¡Aprovécha!",
"Page not found":"Página no encontrada",
"You will be redirected to the homepage.":"Serás redireccionado a la página principal.",
"No results":"Sin resultados",
"Description":"Descripción",
"Category":"Categoría",
"Brand":"Marca",
"Features":"Características",
"Type":"Tipo",
"Colors":"Color",
"Empty cart":"Vaciar el carrito",
"Specifications":"Especificaciones"
}



/**************************************************************************************

French language file (JO2)

***************************************************************************************/

fr_language = {
"The IvoryBrand's blog":"Blog de IvoryBrand",
'Read more':'Lire la suite',
'Do you write about fashion?':'Ecrivez-vous de la mode?',
'If you like to write about fashion, mention us by Twitter with your post and we will share.':'Si vous aimez écrire de la mode, tweeter nous votre post. ',
"Also, do you want to share your fashion posts on the IvoryBrand's blog? Ask us how. It's very easy!":"Aussi, ne voulez-vous vos posts apparaissent sur le blog IvoryBrand? Demandez-nous comment. C'est très simple!",
'Sell handbags and earn':'Vendre des sacs et de gagner',
'We have many magnific products. Sell and earn. We offer dropshipping. Contact us and we will tell you how.':'Nous avons de nombreux produits. Vendre et gagner, offrons dropshipping. Contactez-nous.',
'Never miss an update!':'Ne manquez jamais une mise à jour!',
'This site uses cookies. if you enter, you will accept the use':"Ce site utilise des cookies. si vous entrez, vous acceptez l'utilisation",
'Listen an enjoy!':'Écoutez et profitez!',
'item(s)':'produit(s)',
'item(s) in cart':'produit(s) dans le panier',
'View cart':'Voir panier',
'Cart':'Panier',
'Filter by':'Filtrer par',
'Categories':'Catégories',
'Gender':'Sexe',
'Collections':'Collections',
'Select':'Sélectionner',
'Remove':'Supprimer',
'Men':'Homme ',
'Women':'Femme',
'Remember!':'Rappelez-vous!',
'Worldwide shipping':'Livraison dans le monde',
'Shipping at home':'Livraison à domicile',
'(Shippings...)':'(Livraison...)',
'Money return':'Satisfait ou remboursé',
'(100% Satisfaction...)':'(Satisfaction 100%...)',
'Secure payment':'Paiement sécurisé',
'(Payment methods...)':'(Modes de paiement...)',
'Doubts?':'Doutes?',
'(Contact us...)':'(Contactez-nous...)',
'Why choose us?':'Pourquoi nous choisir?',
'Your encrypted data travels between your computer and our server.':'Vos données sont cryptées entre votre ordinateur et notre serveur.',
'100% Satisfaction':'Satisfaction 100%',
'Money Back immediately in case of defect or loss.':'Satisfait ou remboursé immédiatement en cas de défaut ou de perte.',
'Home delivery':'Envoie à domicile',
'Our products are shipped directly to your home.':'Nos produits sont directement envoyés a votre domicile.',
'Personal attention':'Attention personelle',
'We have various communication channels for any concerns.':'Nous avons différents canaux de communication pour toutes les préoccupations.',
'Search...':'Recherche...',
'Site information':'Informations',
'Policies':'Politiques',
'Social media':'Réseaux sociaux',
'Home':"Page d'accueil",
'About us':'A propos de nous',
'Contact us':'Contactez-nous',
'Shipping and handling':'Frais de port et de manutention',
'Payment methods':'Modes de paiement',
'Satisfaction policy':'Politique de satisfaction',
'Legal notice':'Mentions légales',
'All right reserved':'Tous droits réservés',
'Powered by':'Propulsé par',
'Latest products':'Derniers produits',
'Enlarge':'Agrandir',
'See this collection':'Voir cette collection',
'Collection':'Collection',
'unit!':'unité!',
'units!':'unités!',
'Hurry up!':'Dépêchez-vous!',
'Sold out':'Epuisé',
'Price':'Prix',
'OFF':'DE MOINS!',
'Color':'Couleur',
'Size':'Taille',
'Qty':'Quant.',
'Quantity':'Quantité',
'For this product, the shipping cost is ':"Pour ce produit, le coût d'expédition est ",
'days approx. depending on the country':'jours environ. en fonction du pays',
'Your packet will be sent with tracking number if you order it on checkout.':'Votre paquet sera envoyé avec le numéro de suivi, si vous commandez sur votre bon de commande.',
'Refund in case of lost or defect. See our':'Remboursement en cas de perte ou de défaut. Voir notre',
'satisfaction policy.':'politique de satisfaction.',
'Do you have any question?':'Avez-vous une question?',
'Contact us!':'Contactez-nous!',
'Date: ':'Date: ',
'You might also like...':'Vous aimerez aussi...',
'Search with filter':'Recherche avec filtre',
'Checkout':'Caisse',
'Tracking number':'Numéro de suivi',
'Product':'Produit',
'Subtotal':'Sous-total',
'at':'le',
'January':'Janvier',
'February':'Février',
'March':'Mars',
'April':'Avril',
'May':'Mai',
'June':'Juin',
'July':'Juillet',
'August':'Août',
'September':'Septembre',
'October':'Octobre',
'November':'Novembre',
'December':'Décembre',
"Navy blue":"Bleu foncé",
"Royal blue":"Bleu foncé",
"Deep blue":"Bleu foncé",
"Dark blue":"Bleu foncé",
"Light blue":"Azul clair",
"Turquoise":"Bleu turquoise",
"Khaki":"Kaki",
"Leopard":"Léopard",
"Blue":"Bleu",
"Green":"Vert",
"Olive":"Vert olive",
"Dark green":"Vert foncé",
"Hunter green":"Vert foncé",
"Light green":"Vert clair",
"Yellow":"Jaune",
"Black":"Noir",
"Black and white":"Noir et blanc",
"Sky blue":"Bleu ciel",
"White":"Blanc",
"Brown":"Marron",
"Light brown":"Brun clair",
"Dark brown":"Marrón foncé",
"Mocha":"Moka",
"Purple":"Violet",
"Fuchsia":"Fuchsia",
"Lavender":"Lavande",
"Orange":"Orange",
"Gray":"Gris",
"Grey":"Gris",
"Light grey":"Gris clair",
"Dark grey":"Gris foncé",
"Light gray":"Gris clair",
"Dark gray":"Gris foncé",
"Coffee":"Café",
"Gold":"Or",
"Golden":"Or",
"Silver":"Argent",
"Red":"Rouge",
"Wine red":"Rouge vin",
"Wine":"Rouge vin",
"Light red":"Rouge clair",
"Dark red":"Rouge foncé",
"Pink":"Rose",
"Watermelon":"Rose",
"Light pink":"Rose clair",
"Dark pink":"Rosa foncé",
"Salmon":"Saumon",
"Apricot":"Abricot",
"Light pink":"Rose clair",
"Mustard":"Moutarde",
'Add to cart':'Ajouter au panier',
'Product added':'Produit ajouté',
'Management info':'Administration',
'SKU':'Ref.',
'Supplier':'Fournisseur',
'Posted by':'Publié par',
'Edit product':'Modifier produit',
'Stock':'Stock',
'See website':'Voir le site',
'Supplier price':'Prix de fournisseur',
'See the product':'Voir le produit',
'Profit':'Bénéfice',
'units':'unités',
'unit':'unité',
'Product weight':'Poids du produit',
'Thank you':'Merci!',
'Incorrect order':'Mauvais ordre',
'team':'Équipe',
'You have':'Vous avez',
'Subtotal in Cart':'SSous-total dans le panier',
'Shipping cost':'Coût de livraison',
'Fast shipping':'Expédition rapide',
'Super saver shipping':'Expédition économique',
'Paypal commission':'Commission de Paypal',
'Grand total':'Total',
'Get the tracking number of your order and stay calm!':'Obtenez le numéro de suivi de votre commande et de restez calme!',
'Select your country':'Choisissez votre pays',
'You can pay with credit card or PayPal':'Vous pouvez payer par carte de crédit ou PayPal',
'Your packet will be sent with tracking number if you order it':'Votre paquet sera envoyé avec numéro de suivi si vous commandez',
'Do you have any question?':'Avez-vous une question?',
'Place the order':"Placez l'ordre",
'The main questions that our customers have are':'Les principales questions de nos clients sont',
'How long does the delivery take?':'Combien de temps la livraison prend?',
'You can see this information in':'Vous pouvez voir cette information dans',
'What method of payment are there?':'Quelles méthodes de paiement sont-ils?',
'You can pay with credit card or PayPal. We accept Mastercard, Visa, Discover... The payment is secure and easy':'Vous pouvez payer par carte de crédit ou PayPal . Nous acceptons Mastercard , Visa, Discover ... Le paiement est sécurisé et facile',
'Where are we from?':'Où en sommes- nous de?',
'We are based in':'Nous sommes en',
'For everything else, you can contact us by':'Pour tout le reste , vous pouvez nous contacter par',
'E-mail':'E-mail',
'Telephone':'Téléphone',
'We will reply as soon as possible':'Nous vous répondrons dès que possible',
'Your order had an error. Please, try again or contact us.':"Votre commande a rencontré une erreur. S'il vous plaît, essayez à nouveau ou contactez-nous.",
'Success submission! Paypal will send you an automated e-mail notification for your reference. Please check your e-mail inbox for purchase order details and banking transaction options.':"Commande est terminée! Paypal vous enverra une notification par e-mail automatisé. S'il vous plaît vérifier votre boîte e-mail pour plus de détails d'ordre d'achat et des options de transaction bancaires.",
'Thank you again for your purchase!':'Merci encore de votre achat!',
'is a good online commercial company based in':'est une bonne société commerciale basé à',
'Our company has earned itself a solid reputation for quality, good service, reliability and professionalism in this field':"Notre société s'est forgé une solide réputation de qualité, bon service, la fiabilité et le professionnalisme dans ce domaine",
'Our operation capabilities cover favorable policy, instant and safe delivery, privacy protection and well-rounded customer support':"Nos capacités de fonctionnement couvrent politique favorable, la livraison instantanée et sûre, la protection de la vie privée et le soutien à la clientèle",
'The mission of':'La mission de',
'is to provide you with the best products to the best prices':'est de vous offrir les meilleurs produits au meilleur prix',
'Our reputation, experience and keen industry insight permit us to negotiate low prices on the net':"Notre réputation, l'expérience et perspicacité de l'industrie nous permettent de négocier à bas prix sur le net",
'If you have a suggestion you would like to share with our team, please let us know':"Si vous avez une suggestion que vous aimeriez partager avec notre équipe, s'il vous plaît laissez-nous savoir",
'Customer feedback shapes our business and allows us to better serve our audience so your ideas are always welcome':"Évaluations façonne notre entreprise et nous permet de mieux servir notre public. Vos idées sont toujours les bienvenus",
'respects your right to privacy':'respecte votre droit à la vie privée',
'Our goal is your complete satisfaction and we are not in the business of sharing your information with others':"Notre objectif est votre entière satisfaction et nous ne sommes pas dans l'entreprise de partager vos informations avec d'autres",
'All personal data is stored on our secure server with several layers of firewall protection':"Toutes les données personnelles sont stockées sur notre serveur sécurisé avec plusieurs couches de protection pare-feu",
'We promise to':'Nous promettons',
'Provide 24/7 customer support on weekdays':'Fournir un soutien continu',
'Streamline the buying and paying process':"Rationaliser le processus d'achat et de paiement",
'Deliver goods to our customers with speed and precision':'Expédition des produits rapidement et avec précision',
'Ensure the excellent quality of our products':"L'excellence dans la qualité des produits",
'We hope our customers get a great experience buying our products':"Nous espérons que nos clients obtiennent une grande expérience d'achat de nos produits",
'What shipping methods do you offer?':'Quels modes de livraison proposez-vous?',
'The order will be sent directly to your address':'La commande sera envoyé à votre adresse directement',
'The shipping method is':"La méthode d'expédition est",
'The shipping methods available are':"Les méthodes d'expédition disponibles sont",
'The delivery time is':'Le délai de livraison est',
'Flat rate shipping':'Expédition de taux forfaitaire',
'Standard rate shipping':'Expédition de taux standard',
'Expedited rate shipping':'Expédition de taux accéléré',
'days approx.':'jours environ.',
'The total shipping time is the order picking + handling time + shipping time':"Le temps total d'expédition est la préparation des commandes + temps de manipulation + temps d'expédition",
'Normally, the processing time is very low':'Normalement, le temps de traitement est très faible',
'The shipping time can vary depending on the country':'Le délai de livraison peut varier selon le pays',
'How do I calculate shipping costs?':"Comment puis-je calculer les frais d'expédition?",
'You will choose the shipping method on checkout':"Vous pouvez choisir la méthode d'expédition à la caisse",
'The shipping cost is':"le coût d'expédition est",
'regardless of the products you buy':'pour tous les produits que vous achetez',
'The shipping cost will vary depending the shipping method you select':"Le coût d'expédition varie en fonction de la méthode d'expédition que vous sélectionnez",
'You can see it on checkout':'Vous pouvez le voir à la caisse',
'The shipping cost will also vary depending on the weight of the products you add to cart':"Le coût d'expédition varie aussi en fonction du poids des produits que vous ajoutez au panier",
'How can I track my package?':"Comment puis-je vérifier l'état de ma commande?",
'If you choose the tracking number on checkout, you will get your tracking number and you will track':"Si vous choisissez le nombre de cheminement dans votre panier, vous verrez l'état de votre commande",
'Do you ship to my country?':"Pouvez-vous envoyer à mon pays?",
'Do not worry! We send to worldwide':"Ne vous inquiétez pas! Nous envoyons dans le monde entier",
'Actually we send to':"nous avons envoyé à",
'and':'et',
'If you do not find your county in the list, contact us':"Si vous ne voyez pas votre pays dans la liste, s'il vous plaît contactez-nous",
'If custom duties are incurred, who is responsible?':"Si les droits de douane sont engagés, qui est responsable?",
'It is the responsibility of the customer for any custom duty fees that may be charged upon delivery':"Il est de la responsabilité du client de tous les frais de droit de douane qui peuvent être imposés à la livraison",
'The import duty will depend of the custom policies of each country':"Le droit à l'importation dépendra des stratégies personnalisées de chaque pays",
'If the Package held by Customs, who will be responsible for Package clearance?':"Si le colis est tenu par des coutumes, qui va payer?",
'If the items are detained by Customs after the shipment is done, the buyer is responsible for clearance of the detained items':'Si le colis est tenu par des coutumes, le client sera responsable',
'How do I change my shipping address?':'Comment puis-je changer mon adresse de livraison?',
'If your order has been sent, you cannot change your shipping address. If the packet is not sent, contact us quickly':"Si votre commande a déjà été expédié, vous ne pouvez pas changer l'adresse. S'il n'a toujours pas été envoyé, contactez-nous rapidement",
'Shipping methods':"Méthodes d'expédition",
'Total weight':'Poids total',
'If your purchase is over':'Si votre achat est plus',
'your shipping will be free!':'votre expédition sera gratuit!',
'United States':'Etats-Unis',
'USA':'Etats-Unis',
'US':'Etats-Unis',
'China':'Chine',
'Japan':'Japon',
'Germany':'Allemagne',
'France':'France',
'United Kingdom':'Royaume-Uni',
'Brazil':'Brésil',
'Italy':'Italie',
'Russia':'Russie',
'India':'Inde',
'Canada':'Canada',
'Australia':'Australie',
'Spain':'Espagne',
'South Korea':'Corée du Sud',
'Mexico':'Mexique',
'Indonesia':'Indonésie',
'Netherlands':'Pays-Bas',
'Turkey':'Turquie',
'Switzerland':'Suisse',
'Sweden':'Suède',
'Poland':'Pologne',
'Belgium':'Belgique',
'Argentina':'Argentine',
'Austria':'Autriche',
'Thailand':'Thaïlande',
'South Africa':'Afrique du Sud',
'Venezuela':'Venezuela',
'Colombia':'Colombie',
'Denmark':'Danemark',
'Malaysia':'Malaisie',
'Singapore':'Singapour',
'Chile':'Chili',
'Hong Kong':'Hong Kong',
'Egypt':'Egypte',
'Philippines':'Philippines',
'Greece':'Grèce',
'Finland':'Finlande',
'Portugal':'Portugal',
'Ireland':'Irlande',
'Peru':'Pérou',
'Qatar':'Qatar',
'Ukraine':'Ukraine',
'New Zealand':'Nouvelle-Zélande',
'Romania':'Roumanie',
'Hungary':'Hongrie',
'Puerto Rico':'Puerto Rico',
'Morocco':'Maroc',
'Ecuador':'Equateur',
'Cuba':'Cuba',
'Croatia':'Croatie',
'Luxembourg':'Luxembourg',
'Guatemala':'Guatemala',
'Uruguay':'Uruguay',
'Andorra':'Andorre',
'How can I pay?':"Comment puis-je payer?",
'You can pay on checkout when you add your product to shopping cart. We have two methods: Credit card and Paypal':"Vous pouvez payer à la caisse Lorsque vous ajoutez votre produit au panier. Nous avons deux méthodes: par carte de crédit et Paypal",
'What credit cards do we accept?':'Quelles cartes de crédit acceptons-nous?',
'We accept the credit cards most used':'Nous acceptons les cartes de crédit les plus utilisées',
'Mastercard, Visa, American Express, Discover and Aurora':'Mastercard, Visa, American Express, Discover et Aurora',
'What advantages do I have if I pay with paypal?':"Quels avantages ai-je si je paye avec paypal?",
'You can get many advantages':'Vous pouvez obtenir de nombreux avantages',
'Secure system and secure payments, buy and pay with your mobile or tablet, no membership fees or service charges, discount coupons':'Système de paiement sûr et sécurisé, acheter et payer avec votre téléphone ou tablette, pas de commissions, des coupons de réduction',
'We will try our best to make sure the products shipped to our customers are in good quality':"Nous ferons de notre mieux pour s'assurer que les produits expédiés à nos clients sont de bonne qualité",
'If there are some problems on the goods, you have right to guarantee your benefits':"S'il ya des problèmes sur les marchandises, vous avez droit à la garantie de vos prestations",
'You do not have to worry about anything!':"Vous n'avez pas à vous soucier de quoi que ce soit!",
'Return and refund':'Retour du produit et le remboursement',
'The products with quality problem can be returned and refund':"Produits avec des problèmes de qualité peuvent être retournés et remboursés",
'The customer will need to send the products back to us':'Le client devra envoyer le produit',
'When we receive the products, we will give the refund':'Lorsque nous recevons les produits, nous donnerons le remboursement',
'Loss':'Perte',
'If your packet has been sent but you do not receive the packet, the problem is the carrier':"Si votre paquet a-été envoyée, mais vous ne recevez pas le paquet, le problème est le transporteur",
'But we want to have satisfied customer':'Mais nous voulons des clients satisfaits',
'For that, if your packet is lost, we will refund your money or we will send again':"Pour cela, si votre paquet est perdu, nous vous rembourserons votre argent ou nous enverrons à nouveau",
'Products with quality problem can be returned and replaced':'Produits avec des problèmes de qualité peuvent être retournés et remplacés',
'Customer need to send the products back to us':'Le client doit envoyer le paquet',
'When we receive the products, we will replace new ones and ship back to customer':'Lorsque nous obtenons le paquet, nous remplacerons et réexpédier',
'Replace':'Remplacement',
'1.- INTRODUCTION':'1.- INTRODUCTION',
'This document is intended to establish and regulate the terms of use and safeguarding the data of the site':"Ce document est destiné à établir et réglementer les conditions d'utilisation et la sauvegarde du Site",
'(from now on called “the Site”) understanding that the site has all the pages and contents owned by':"(ci-après le «Site») entendue comme l'ensemble des pages et son contenu appartenant",
'which is accessed through the domain':'à laquelle on accède par le domaine',
'The use of this site as well as the services it offers to the user, implies full and unreserved acceptance of each and every one of the conditions contained in this Legal Notice (from here on "General Conditions ")':"L'utilisation de ce site ainsi que des services offerts à l'utilisateur, implique l'acceptation pleine et entière de toutes et chacunes des conditions contenues dans le présent avis juridique (ci-après les «Conditions générales »)",
'so the user should be aware of the importance of reading them each time the user visits the Site':"ainsi que l'utilisateur doit être conscient de l'importance de la lecture à chaque fois que vous visitez le site",
'Accessing the Site implies knowing and  accepting the following "General Conditions" which':"L'accès au Site implique la connaissance et l'acceptation des conditions générales suivantes, lesquelles",
'recommends the users to print or download and read  carefully each time the user accesses the Site':"recommande aux utilisateurs d'imprimer ou de les télécharger et les lire attentivement chaque fois que vous accédez au Site",
'2.-GENERAL INFORMATION':'2.- INFORMATION GÉNÉRAL',
'In compliance with the duty to inform the customer contained in Article 10 of Law 34/2002, of July 11, of the Society Services of the Information  and Electronic Commerce, below we reflect the following':"En conformité avec les obligations de déclaration prévues à l'article 10 de la loi 34/2002, du 11 Juillet, la Société des Services d'Information et le Commerce Électronique, ci-dessous reflètent les éléments suivants",
'is an entity from':'est une entité dans',
'The email contact is':'Le contact e-mail est',
'and the telephone':'et le téléphone',
'3. - USE OF THE SITE':"3. - CONDITIONS D'UTILISATION DU SITE",
'By accepting these Terms the user agrees to use the Website and the services it provides in the way, the manner and form in which it is established':"En acceptant ces conditions, vous acceptez d'utiliser le Site et les services qu'il fournit dans le chemin, dans la manière et la forme dans laquelle il est établi",
'Users may not use this Site and its services for illegal and / or contrary purposes against those  stated in the General Conditions, which may be detrimental to the rights and / or interests of others or in any way damage the Site preventing it or its present and future services to work':"Les utilisateurs ne peuvent pas utiliser ce Site et de ses services pour les contenus illicites et / ou contraires aux buts énoncés dans ces Termes et Conditions, ce qui peut être préjudiciable aux droits et / ou intérêts d'autrui ou tout endommagement du site Web ou de son mal fonctionement ou des services qu'il offre ou offerts à l'avenir.",
'4.- SCOPE OF THE SITE. USER RESPONSIBILITY':"4.- CHAMP D'APPLICATION DU SITE. RESPONSABILITE DE L'UTILISATEUR",
'The access to this site is the sole responsibility of the users. That includes any risks arising from the use of the Site':"L'accès à ce site est de la seule responsabilité des utilisateurs. Les risques découlant de l'utilisation du site par l'utilisateur relève de la responsabilité unique et exclusive",
'does NOT guarantee':'Pas sous garantie par',
'(I) The infallibility, availability, continuity, absence of defects or safety of the Site':"(I) l'infaillibilité, la disponibilité, la continuité, l'absence de défauts ou la sécurité du Site",
'(II) The content of the Site or the information passing through it are free of viruses or other harmful elements such as errors, omissions or inaccuracies':"(II) le contenu du site ou de l'information qui le traverse sont exempts de virus ou autres éléments nocifs tels que les erreurs, omissions ou inexactitudes",
'(III) The safety of the user of the Website; The size not be liable for any loss or damage that may arise from interferences, omissions, interruptions, computer viruses, telephone faults or disconnections in the operational functioning of this electronic system , due to causes unrelated to the Site, the delays or blockages in the use of this electronic system caused by deficiencies or overloading in the data processing Centre, telephone lines, in the Internet system or other electronic systems, nor damage that may be caused by third parties through illegalities beyond the control of the Site':"(III) l'utilisation sûre que l'utilisateur fais du site Web; Le Site ne peut être tenu responsable de toute perte ou dommage pouvant découler d'interférences, omissions, interruptions, virus informatiques, pannes téléphoniques ou déconnexions dans le fonctionnement opérationnel de ce système électronique , en raison de causes non liées à la marque d'Ivoire, retards ou blocages dans l'utilisation de ce système électronique causés par des déficiences ou des surcharges dans le Centre de traitement des données, des lignes téléphoniques, du système Internet ou d'autres systèmes électroniques, ni dommages qui peuvent être causés par des tiers par le biais illégale en dehors du contrôle de le Site",
'It also exempts the Site from liability for any loss or damage incurred by you as a result of errors, defects or omissions in the information provided by the Site provided from outside sources':"Il dispense également dans le Site de toute responsabilité pour toute perte ou dommage subi par vous en raison d'erreurs, de défauts ou omissions dans l'information fournie par le Site aporté par des sources extérieures",
'Mere access to the Site does not imply any kind of commercial relationship between the user and the Site':"Le simple accès au Site n'implique aucune sorte de relation commerciale entre l'utilisateur et le Site",
'5.- UPDATING AND MODIFICATION OF INFORMATION':'5.- ACTUALITÉ ET MODIFICATION DES INFORMATIONS',
'The information on this site is accurate at the date of the last update. The Site reserves the right to update, modify or delete information on this Site, and may limit or deny access. The Site reserves the right to make, at any time, changes and modifications deemed desirable, and may exercise this right at any time and without notice':"Les informations sur ce site sont exactes à la date de la dernière mise à jour. le Site se réserve le droit de mettre à jour, modifier ou supprimer des informations sur ce site, et peut limiter ou refuser l'accès. Le Site se réserve le droit d'apporter, à tout moment, les changements et les modifications jugées souhaitables, peuvent exercer ce droit à tout moment et sans préavis",
'6.- CONTENTS':'6.- CONTENU',
'The Site does not guarantee, or accepts responsibility for the consequences that may result from errors in the contents appearing on the Site provided by others. The Site is not responsible in any way for the contents, commercial activities, products and services that can be viewed through electronic links (links) if there were any, and if there were, directly or indirectly, through this Site':"Le Site ne garantit pas, ou n'accepte aucune responsabilité pour les conséquences qui pourraient résulter d'erreurs dans les contenus affichés sur le site Web fourni par d'autres. Le Site n'est pas responsable en aucune façon pour les contenus, activités commerciales, produits et services qui peuvent être consultés par des liens électroniques (links), directement ou indirectement, par le biais de ce site",
'The presence of links in the the Site Website, unless expressly stated otherwise, is for informational purposes only and in no way a suggestion, invitation or recommendation thereof. These links do not represent any kind of relationship between the Site and companies or owners of the websites that can be accessed through these links. The Site reserves the right to withdraw unilaterally and at any time and without notice the link from its Site':"Les liens dans le site Web, sauf mention contraire expresse, à titre d'information seulement et en aucun cas un de ses suggestion, invitation ou recommandation. Ces liens ne représentent aucun type de relation entre le Site et des sociétés ou propriétaires de sites Web qui peuvent être accessibles via ces liens. Le Site se réserve le droit de retirer unilatéralement et à tout moment et sans préavis les liens qui pouraient apparaître sur son site Web",
'The Site reserves the right to prevent or prohibit access to the Site to any Internet user to enter this site any content contrary to legal or moral standards, reserving the right to pursue legal action it deems necessary to prevent such behaviours':"Le Site se réserve le droit d'empêcher ou d'interdire l'accès au Site à tout utilisateur d'Internet à accéder à ce site tout contenu contraire aux normes juridiques ou morales, en se réservant le droit d'engager des poursuites judiciaires qu'il jugera nécessaires pour empêcher un tel comportements",
'7.- NAVIGATION, ACCESS AND SECURITY':'7.- NAVEGATION, ACCÈS ET SECURITÉ',
'The Site Central makes every effort to ensure that browsing takes place under optimum conditions and to avoid any type of damage that may occur during the same. The Site is not liable for damages of any kind that may be caused to users by using other browsers or different versions of the browsers for which the Site is designed':"Le Site met tout en œuvre pour que la navigation s'effectue dans des conditions optimales et d'éviter tout type de dommages qui pourraient survenir au cours de la même chose. Le Site n'est pas responsable des dommages de toute nature qui pourraient être causés aux utilisateurs à l'aide d'autres navigateurs ou des versions différentes des navigateurs pour lesquels le site a été conçu",
'The Site makes no representation or guarantee that access to this Site will be uninterrupted or error free. No responsibility or guarantee that the content or software that can be accessed through this site is free from error or cause damage. The Site, in no event, can be liable for any losses or damages of any kind arising from the access and use of the Site, including but not limited to damage to systems or those caused by a virus':"Le Site ne se fait pas résponsable ni garantie que l'accès à ce Site sera ininterrompu ou exempt d'erreur. Aucune responsabilité ou garantie que le contenu ou les logiciels qui peuvent être accessibles via ce site est exempte d'erreur ou causer des dommages. En aucun cas, le Site doit être tenu responsable de toute perte ou dommages de toute nature résultant de l'accès et de l'utilisation du Site, y compris, mais sans s'y limiter, les dommages causés aux systèmes ou ceux qui sont causés par un virus. Le Site n'est pas responsable des dommages qui pourraient être causés aux usagers par une mauvaise utilisation de ce site. En particulier, n'est pas responsable en aucune façon pour les pannes, interruptions, défauts dans les télécommunications qui peuvent survenir",
'The Site is not responsible for any damage that may be caused to users by improper use of this Site. In particular, is not responsible in any way for breakdowns, interruptions, faults or defects in telecommunications that may occur. The services offered on the Site may only be used correctly if they meet the technical specifications for which it was designed':"Les services proposés sur le Site ne peut être utilisé correctement si elles répondent aux spécifications techniques pour lesquelles il a été conçu",
'8.- DATA PROTECTION':'8.- PROTECTION DES DONNÉES',
'The processing of personal data and sending electronic communications are regulated by  the rules established in the Organic Law':"Le traitement des données personnelles et l'envoi de communications électroniques sont adaptées aux règles établies dans Loi organique",
'In accordance with the provisions of the current legislation on data protection, we inform you that your personal data will be incorporated into the Site Personnel Selection file in order to have your professional history for selection and contractual purposes':"En conformité avec les dispositions de la législation actuelle sur la protection des données, nous vous informons que vos données personnelles seront incorporées dans le fichier du personnel dans le Site afin d'avoir vos antécédents professionnels pour développer et sélectionner les fonctions de recrutement",
'Also, unless stated otherwise, the Site and any of the Companies that make up the Site, shall have access to your personal information, solely for the purposes described above. The Site guarantees the right to access, rectify, cancel and object to the processing of data which must be notified in writing':"En outre, sauf disposition expresse à ce sujet des objets, doivent avoir accès à vos renseignements personnels les sociétés qui font partie dans le Site, exclusivement aux fins décrites ci-dessus. le Sote garantit l'exercice des droits d'accès, rectification, annulation et opposition en écrivant",
'If after one year from the inclusion of your personal data you have not heard from us, we will proceed to erase the data from our file':"Si au bout d'un an à compter de la prise en compte de votre CV vous n'avez pas reçue de nos nouvelles, nous procéderons à effacer vos données de notre fichier",
'9.- USE OF COOKIES':"9.- SUR L'UTILISATION DES COOKIES",
'Access to the Website may imply the use of cookies on its pages and those pages linked or referenced through links. Users who do not wish to receive cookies or want to be informed of their use may configure your browser accordingly':"L'accès à ce site peut impliquer l'utilisation de cookies sur ses pages et ces pages liées ou référencées par des liens. Les utilisateurs qui ne souhaitent pas recevoir de cookies ou si vous voulez être informés de leur utilisation peuvent configurer votre navigateur en conséquence",
'10.- INTELLECTUAL PROPERTY AND COPYRIGHT':"10.- PROPRIÉTÉ INTELLECTUELLE ET DROIT D'AUTEUR",
'The Site declares that unless otherwise indicated in the Site, text, images, illustrations, designs, icons, photographs, video clips, sound clips and other materials found on the Site and any other intellectual creations and / or inventions or scientific and technical discoveries, whatever their commercial or industrial application (from here on  collectively named "Content") have been created or invented by the Site or transferred, licensed, transmitted or authorized by the owners and / or assignees':"Le Site déclare que, sauf indication contraire dans le site, textes, images, illustrations, dessins, icônes, photos, clips vidéo, clips audio et d'autres matériaux trouvés sur le site, et toutes autres créations intellectuelles et / ou inventions ou découvertes scientifiques et techniques, quelle que soit leur application commerciale ou industrielle (ci-après dénommés collectivement le «Contenu») sont créés ou inventés par le Site ou d'une licence, transmis ou autorisés par les propriétaires et / ou ayants droit",
'The User agrees not to remove or alter any distinctive sign used on the Site, including, but not be limited, brand names, trademarks (graphics, logos, etc), the "copyright" and other data identifying the rights of the Site or third parties on the Website':"L'Utilisateur s'engage à ne pas supprimer ou modifier tout signe distinctif utilisé sur le Site, y compris, mais sans s'y limiter, les noms de marque, marques (graphiques, logos, etc), le copyright et autres données d'identification des droits dans le Site ou par des tiers sur le site",
'The Site own all rights over any works, inventions, discoveries, patents, ideas, concepts, updates and improvements related to the Site,  systems, applications and programs or services provided by the Site, which are created , made, developed or implemented first by the Site either alone or with the help of users of the Site, during or as a result of a design, development or other activity performed in accordance with the Contract':"Le Site a la propriété et tous les droits sur les œuvres, inventions, découvertes, brevets, idées, concepts, mises à jour et les améliorations liées au site, vos systèmes, des applications et des programmes ou des services fournis par le Site, qui sont créés , réalisés, développés ou mis en œuvre d'abord par le Site, seul ou avec l'aide des utilisateurs du site, au cours ou à la suite d'une conception, le développement ou autre activité réalisée en conformité avec le contrat",
'You may not use the name, trademarks, symbols, logos or distinctive signs of ownership by the Site without the express written consent of the latter':"Vous ne pouvez pas utiliser le nom, les marques, symboles, logos ou signes distinctifs de la propriété par le Site sans l'autorisation écrite expresse de ce dernier",
'In the event that any user or third party considers that any of the content on the site is in violation of copyright or other rights of intellectual property protection, please notify us at':"Dans le cas où un utilisateur ou un tiers considère que tout le contenu sur le site est en violation du droit d'auteur ou autres droits de protection de la propriété intellectuelle, s'il vous plaît nous en informer à l'adresse",
'11.- JURISDICTION AND LAW':'11.- COMPETENCE ET DROIT APPLICABLE',
'The Terms of Use that are in this Agreement are governed by law. Both the Site and the users of the Site agree that any dispute that may arise regarding the interpretation, compliance and / or enforcement of these rules shall be subject to the jurisdiction of the Courts and Tribunals , with expressly waive any other jurisdiction that may correspond':"Les conditions d'utilisation qui sont dans le présent accord sont régies par la loi espagnole. Le Site à la fois comme utilisateurs du site acceptent que tout litige qui pourrait survenir concernant l'interprétation, de la conformité et / ou l'application de ces règles est soumis à la juridiction des Cours et Tribunaux et renoncent expressément à toute autre juridiction qui pourrait lui correspondre",
'Euro':'Euro',
'US dollar':'Dollar des États-Unis',
'Pound sterling':'Livre sterling',
'Management':'Administration',
'Product in stock':'Produit disponible',
'Create product':'Créez produit',
'Overview':"Vue d'ensemble",
'Products':'Produits',
'Pages':'Pages',
'Stats':'Statistiques',
'Layout':'Disposition',
'Template':'Gabarit',
'Settings':'Configuration',
'Images':'Images',
'Sign out':'Déconnexion',
'Prev':'Précédent',
'Next':'Suivant',
'Name':'Nom',
'Email':'Email',
'Message':'Message',
'Send':'Envoyer',
'Please, insert a correct email':"S'il vous plaît, fournir une adresse email correcte",
'Please, write a message':"S'il vous plaît , écrivez un message",
'Your message has been sent. Thanks!':"Votre message a été envoyé . Merci!",
'Through the following contact form':'Grâce à le formulaire de contact ci-dessous',
'Edit notes':'Modifier les notes',
'Unique size':'Taille unique',
'One size':'Taille unique',
'Accessories':'Accessoires',
'Bags backpacks and wallets':'Sac a main, sac a dos et portefeuilles',
'Corsets and bustiers':'Corsets et bustiers',
'Dresses':'Vêtements',
'Heels boots and sandals':'Talons, bottes et sandales',
'Jackets and coats':'Vestes et manteaux',
'Leggings and pantyhose':'Leggings et collants',
'Pants and jeans':'Pantalons et jean',
'Shirts polo shirts and blouses':'Chemises, chemises polos et chemisiers',
'Shoes and sneakers':'Chaussures et chaussures de tennis',
'Skirts':'Jupes',
'Totes':'Sacs',
'Wallets':'Portefeuilles',
'Clutches':'Sacs à main',
'Backpacks':'Sacs à dos',
'Suits and blazers':'Costumes et blazers',
'Sweaters and hoodies':'Pull et sweats',
'Tees long sleeves and tops':'T-shirts de manche courte, longue et sans manche',
"Main dh diamond horn tee":"T-shirt main dh diamond horn",
"Sexy girl diamond horn tee":"T-shirt sexy girl diamond horn",
"Audio cassette diamond horn tee":"T-shirt audio cassette diamond horn",
"Tees; long sleeves and tops":"T-shirts de manga corta; larga y asillas",
"MMA division tee":"T-shirt MMA division",
"Defeat thy rivals tee":"T-shirt Defeat thy rivals",
"Extreme cage fighter tee":"T-shirt Extreme cage fighter",
"Mixed marcial arts tee":"T-shirt Mixed marcial arts",
"Training to be a cage fighter tee":"T-shirt Training to be a cage fighter",
"MMA fighter tee":"T-shirt MMA fighter",
"Mixed marcial arts tee":"T-shirt Mixed marcial arts",
"Cage fighter tee":"T-shirt Cage fighter",
"Bushido MMA tee":"T-shirt Bushido MMA",
"Brooklyn boxing gym tee":"T-shirt Brooklyn boxing gym",
"Bojewoje sambo tee":"T-shirt Bojewoje sambo",
"Mma Full contact fighter warriors long sleeves":"T-shirt de manga larga Mma Full contact fighter warriors",
"New zealand all black long sleeves":"T-shirt de manga larga New zealand all black",
"Rugby athletic train long sleeves":"T-shirt de manga larga Rugby athletic train",
"Hardcore cage fighting long sleeves":"T-shirt de manga larga Hardcore cage fighting",
"Cage fighter mma fight to the end tee":"T-shirt Cage fighter mma fight to the end",
"Mma fight division bulldog tee":"T-shirt Mma fight division bulldog",
"Muay thai the art of fighting tee":"T-shirt Muay thai the art of fighting",
"Mma fighter warrior spirit tee":"T-shirt Mma fighter warrior spirit",
"Mixed marcial arts fight with honor tee":"T-shirt Mixed marcial arts fight with honor",
"Mma fighter training discipline respect tee":"T-shirt MMA fighter training discipline respect",
"Jiu jitsu red cover tee":"T-shirt Jiu jitsu red cover",
"Cage fighter don't give up the fighter tee":"T-shirt Cage fighter don't give up the fighter",
"Mma fighters tee":"T-shirt MMA fighters",
"Full contact mma tee":"T-shirt Full contact MMA",
"Full contact mixed martial arts tee":"T-shirt Full contact mixed martial arts",
"Muay thai full contact tee":"T-shirt Muay thai full contact",
"Hard knocks boxing gym tee":"T-shirt Hard knocks boxing gym",
"Born 2 be a boxer tee":"T-shirt Born 2 be a boxer",
"Invincible tee":"T-shirt Invincible",
"Jiu-jitsu tee":"T-shirt Jiu-jitsu",
"MMA Mixed marcial arts tee":"T-shirt MMA Mixed marcial arts",
"Urban fighters tee":"T-shirt Urban fighters",
"Ultimate fight dept. tee":"T-shirt Ultimate fight dept.",
"Seek and destroy tee":"T-shirt Seek and destroy",
"Rocky balboa boxing gym tee":"T-shirt Rocky balboa boxing gym",
"Primus pilus mma tee":"T-shirt Primus pilus MMA",
"The newspaper tee":"T-shirt The newspaper",
"Muay thai boxing tee":"T-shirt Muay thai boxing",
"Do you have a fashion blog?":"Avez-vous un blog de mode?",
"We love the world of fashion and accessories and we want to promote it. Do you have a fashion blog or write posts? Mention us by Twitter and we'll share. So we'll give promotion":"Nous aimons le monde de la mode et des accessoires. Avez-vous un blog de mode ou d'écrire les messages? Menciónanos par twitter avec vos messages. Ainsi, vous obtenez promotion!",
"This store is configured to be able to purchase and ship your items to somewhere in the world. Do you live in US, Brazil, Australia, Europe...? Are you going on vacation and you want it delivered? No Problem! We'll send it!":"Le web est mis à acheter et expédier votre produit partout dans le monde. Vivez-vous au Canada, en France, en Amérique latine? Allez-vous partir en vacances et que vous souhaitez le recevoir? Pas de problème! Nous l'enverrons.",
"Use our shipments!":"Utilisez nos envois!",
"Don't risk!":"Ne vous décevra pas!",
"We have the best satisfaction policy. If your packet is lost or you receive a defective product, we will refund your money immediately. Don't risk buying at other stores and losing your money. Here your order is secure. Try it!":"Ce magasin a la meilleure politique de satisfaction. Si votre colis est perdu ou a reçu un produit défectueux, nous vous rembourserons immédiatement l'argent. Ne pas le risque d'acheter d'autres magasins et de gaspiller votre argent. Ici, votre commande est sécurisée. Essayez-le!",
"Not disappoint!":"Il ne suce pas!",
"The best spanish brand: 'Diamond horn'":"La marque espagnole: 'Diamond horn'",
"We are glad for to present you a cool clothing brand: 'Diamond horn'. They bring a magnific collection of nice products. We are the only one authorized dealer. You will not find these products anywhere else. Are you going to let it go?":"Nous sommes fiers de présenter une marque de vêtements: 'Diamond Horn'. Ils nous apportent une magnifique collection de très bons produits. Nous sommes les distributeurs autorisés. Vous ne trouverez pas ces produits ailleurs. Allez-vous le laisser aller?",
"Take advantage!":"Ne manquez pas l'occasion!",
"Page not found":"Page non trouvée",
"You will be redirected to the homepage.":"Vous serez redirigé vers la page d'accueil.",
"No results":"Aucun résultat",
"Description":"Description",
"Category":"Catégorie",
"Brand":"Marque",
"Features":"Caractéristiques",
"Type":"Type",
"Colors":"Couleurs",
"Empty cart":"Vide panier",
"Specifications":"Caractéristiques"
}



/**************************************************************************************

This data must launch first. Main systems: variables, translation and currency exchange rate (JO3)

***************************************************************************************/

//----------------------------------- MAIN METHODS AND FUNCTIONS -----------------------------------------------------------------------------------------------------

//Capitalize
String.prototype.capitalize = function(all){
    if(all){ return this.split(' ').map(function(e){return e.capitalize();}).join(' '); }
	else{ return this.charAt(0).toUpperCase() + this.slice(1); } 
}
//Capitalize

//Convert value to boolean
String.prototype.toBoolean = function(){
	if (this.toLowerCase() === 'true' || this.toLowerCase() === 'yes' || this === 1 || this === '1') { return true }
	else { return false }
}
//Convert value to boolean
	
//Randomize array
function shuffleArray(array) {
	for (var i = array.length - 1; i > 0; i--) {
		var j = Math.floor(Math.random() * (i + 1));
		var temp = array[i];
		array[i] = array[j];
		array[j] = temp;
	}
	return array;
}

//----------------------------------- DATABASE ----------------------------------------------------------------------------------------------------------------

//Basic settings
$.ajax({
    type: 'get',
    url: 'https://spreadsheets.google.com/feeds/list/' + databaseID + '/' + basic_settings_db_path + '/public/values?alt=json',
    dataType: 'json',
    async: false,
    success: function(data) {
		//Company data
		company_name = data.feed.entry[0].gsx$companydatavalues.$t;
		company_email = data.feed.entry[1].gsx$companydatavalues.$t;
		VAT_Tax_ID = data.feed.entry[2].gsx$companydatavalues.$t;
		company_address = data.feed.entry[3].gsx$companydatavalues.$t;
		show_company_location = data.feed.entry[4].gsx$companydatavalues.$t.toBoolean();
		company_country = data.feed.entry[5].gsx$companydatavalues.$t;
		company_city = data.feed.entry[6].gsx$companydatavalues.$t;
		phone_number = data.feed.entry[7].gsx$companydatavalues.$t;
		ganalyticscode = data.feed.entry[9].gsx$companydatavalues.$t;
		paypalaccount = data.feed.entry[10].gsx$companydatavalues.$t;
		customerid = data.feed.entry[11].gsx$companydatavalues.$t;
		
		//Template data
		if (data.feed.entry[0].gsx$templatedatavalues.$t.toLowerCase() === 'spanish') { main_lang = 'es'; }
		else if (data.feed.entry[0].gsx$templatedatavalues.$t.toLowerCase() === 'french') { main_lang = 'fr'; }
		else { main_lang = 'en'; }
		detect_lang = data.feed.entry[1].gsx$templatedatavalues.$t.toBoolean();
		es_lang_enabled = data.feed.entry[2].gsx$templatedatavalues.$t.toBoolean();
		fr_lang_enabled = data.feed.entry[3].gsx$templatedatavalues.$t.toBoolean();
		enable_slider = data.feed.entry[4].gsx$templatedatavalues.$t.toBoolean();
		music_player_url = show_if_enabled(data.feed.entry[5].gsx$templatedatavalues.$t);
		page_loading = data.feed.entry[6].gsx$templatedatavalues.$t.toBoolean();
		facebook_product_comments = data.feed.entry[7].gsx$templatedatavalues.$t.toBoolean();
		show_prod_collection_text = data.feed.entry[8].gsx$templatedatavalues.$t.toBoolean();
		prods_per_page = parseInt(data.feed.entry[9].gsx$templatedatavalues.$t);
		fix_header = data.feed.entry[10].gsx$templatedatavalues.$t.toBoolean();
		assign_currency = data.feed.entry[11].gsx$templatedatavalues.$t.toBoolean();
		posts_on_blog = parseInt(data.feed.entry[12].gsx$templatedatavalues.$t);
		
		//Product category name data
		cat_name_1 = data.feed.entry[0].gsx$productvalues.$t.capitalize();
		cat_name_2 = data.feed.entry[1].gsx$productvalues.$t.capitalize();
		
		//Page automatic content data
		contact_us_auto_content = data.feed.entry[0].gsx$automaticpagevalues.$t.toBoolean();
		contactuspage = storedomain + 'p/' + data.feed.entry[1].gsx$automaticpagevalues.$t;
		about_us_auto_content =  data.feed.entry[2].gsx$automaticpagevalues.$t.toBoolean();
		aboutuspage = storedomain + 'p/' + data.feed.entry[3].gsx$automaticpagevalues.$t;
		shipping_handling_auto_content =  data.feed.entry[4].gsx$automaticpagevalues.$t.toBoolean();
		shipping_handling_page = storedomain + 'p/' + data.feed.entry[5].gsx$automaticpagevalues.$t;
		payment_methods_auto_content =  data.feed.entry[6].gsx$automaticpagevalues.$t.toBoolean();
		payment_methods_page = storedomain + 'p/' + data.feed.entry[7].gsx$automaticpagevalues.$t;
		satisfaction_policy_auto_content =  data.feed.entry[8].gsx$automaticpagevalues.$t.toBoolean();
		satisfactionpolicypage = storedomain + 'p/' + data.feed.entry[9].gsx$automaticpagevalues.$t;
		legal_notice_auto_content =  data.feed.entry[10].gsx$automaticpagevalues.$t.toBoolean();
		legalnoticepage = storedomain + 'p/' + data.feed.entry[11].gsx$automaticpagevalues.$t;
		checkoutpage = storedomain + 'p/' + data.feed.entry[12].gsx$automaticpagevalues.$t;
		correctorderpage = storedomain + 'p/' + data.feed.entry[13].gsx$automaticpagevalues.$t;
		incorrectorderpage = storedomain + 'p/' + data.feed.entry[14].gsx$automaticpagevalues.$t;
		dropshippingpage = storedomain + 'p/' + data.feed.entry[15].gsx$automaticpagevalues.$t;
		blogpage = storedomain + 'p/' + data.feed.entry[16].gsx$automaticpagevalues.$t;
		
		//Social network profiles
		enable_main_social_counts = data.feed.entry[0].gsx$socialprofvalues.$t.toBoolean();
		enable_subscription_popup = data.feed.entry[1].gsx$socialprofvalues.$t.toBoolean();
		enable_fb_like_box = data.feed.entry[2].gsx$socialprofvalues.$t.toBoolean();
		facebook_link = show_if_enabled(data.feed.entry[3].gsx$socialprofvalues.$t);
		googleplus_link = show_if_enabled(data.feed.entry[4].gsx$socialprofvalues.$t);
		twitter_link = show_if_enabled(data.feed.entry[5].gsx$socialprofvalues.$t);
		youtube_link = show_if_enabled(data.feed.entry[6].gsx$socialprofvalues.$t);
		instagram_link = show_if_enabled(data.feed.entry[7].gsx$socialprofvalues.$t);
		blog_link = show_if_enabled(data.feed.entry[8].gsx$socialprofvalues.$t);
		
		//Shipping settings
		certified_shipping = data.feed.entry[0].gsx$shippingvalues.$t.toBoolean();
		track_price = show_if_enabled(data.feed.entry[1].gsx$shippingvalues.$t.replace(/,/g,'.'));
		world_shipping = data.feed.entry[2].gsx$shippingvalues.$t.toBoolean();
		taxation = parseFloat(data.feed.entry[3].gsx$shippingvalues.$t.replace(/,/g,'.')) * 0.01;
		free_shipping_from = show_if_enabled(data.feed.entry[4].gsx$shippingvalues.$t);
		if (free_shipping_from !== false) { free_shipping_from = parseFloat(free_shipping_from.replace(/,/g,'.')); }
		if (data.feed.entry[5].gsx$shippingvalues.$t.toLowerCase() === 'by weight') { shipping_method = 2; } else { shipping_method = 1; }
		
		// Shipping variables
		country_list = [];
		shipping_types = [];
		var shipping_name = [];
		var shipping_time = [];
		var weight_range = [];
		var cost_per_range = [];
		var shipping_cost = [];
		var starting_from = [];
		
		// Filter variables
		filter_names = [];
		var filter_1 = [];
		var filter_2 = [];
		var filter_3 = [];
		var filter_4 = [];
		var filter_5 = [];
		
		// Slide variables
		slide_content = [];
		var slide_link = [];
		var slide_title = [];
		var slide_text = [];
		var slide_red_text = [];
		var slide_image = [];
		
		// Blog section variables
		en_blog_section = [];
		es_blog_section = [];
		var name_blog_section = [];
		var author_blog_section = [];
		var languaje_blog_section = [];
		var url_blog_section = [];
		
		for (var i = 0; i < data.feed.entry.length; i++) {
			//Country list
			if (world_shipping === false && data.feed.entry[i].gsx$countrylist.$t !== '') { country_list.push(data.feed.entry[i].gsx$countrylist.$t); }
			
			//Shipping types
			if (data.feed.entry[i].gsx$shippingname.$t !== '') { shipping_name.push(data.feed.entry[i].gsx$shippingname.$t); }
			if (data.feed.entry[i].gsx$shippingtime.$t !== '') { shipping_time.push(data.feed.entry[i].gsx$shippingtime.$t); }
			if (data.feed.entry[i].gsx$weightrange.$t !== '') { weight_range.push(parseFloat(data.feed.entry[i].gsx$weightrange.$t)); }
			if (data.feed.entry[i].gsx$costperrange.$t !== '') { cost_per_range.push(parseFloat(data.feed.entry[i].gsx$costperrange.$t.replace(/,/g,'.'))); }
			if (data.feed.entry[i].gsx$startingfrom.$t !== '') { starting_from.push(parseFloat(data.feed.entry[i].gsx$startingfrom.$t.replace(/,/g,'.'))); }
			
			//Filter names
			if (data.feed.entry[0].gsx$filter1.$t !== '' && data.feed.entry[i].gsx$filter1.$t !== '') { filter_1.push(data.feed.entry[i].gsx$filter1.$t); }
			if (data.feed.entry[0].gsx$filter2.$t !== '' && data.feed.entry[i].gsx$filter2.$t !== '') { filter_2.push(data.feed.entry[i].gsx$filter2.$t); }
			if (data.feed.entry[0].gsx$filter3.$t !== '' && data.feed.entry[i].gsx$filter3.$t !== '') { filter_3.push(data.feed.entry[i].gsx$filter3.$t); }
			if (data.feed.entry[0].gsx$filter4.$t !== '' && data.feed.entry[i].gsx$filter4.$t !== '') { filter_4.push(data.feed.entry[i].gsx$filter4.$t); }
			if (data.feed.entry[0].gsx$filter5.$t !== '' && data.feed.entry[i].gsx$filter5.$t !== '') { filter_5.push(data.feed.entry[i].gsx$filter5.$t); }
			
			//Slides
			if (show_if_enabled(data.feed.entry[i].gsx$slidecontent.$t) !== false || show_if_enabled(data.feed.entry[i].gsx$slidetitle.$t) !== false) {
				slide_link.push(show_if_enabled(data.feed.entry[i].gsx$slidelink.$t));
				slide_title.push(data.feed.entry[i].gsx$slidetitle.$t);
				slide_text.push(data.feed.entry[i].gsx$slidecontent.$t);
				slide_red_text.push(data.feed.entry[i].gsx$slideredtext.$t);
				slide_image.push(show_if_enabled(data.feed.entry[i].gsx$slideimage.$t));
			}
			
			//Blog section
			if (data.feed.entry[i].gsx$bloglanguage.$t !== '') { languaje_blog_section.push(data.feed.entry[i].gsx$bloglanguage.$t); }
			if (data.feed.entry[i].gsx$blogurl.$t !== '') { url_blog_section.push(data.feed.entry[i].gsx$blogurl.$t); }
			
		}
			
		//Setting shipping types
		for (var i = 0; i < shipping_name.length; i++) {
			shipping_types.push([shipping_name[i], shipping_time[i], weight_range[i], cost_per_range[i], starting_from[i]]);
		}
		
		//Setting filter names
		filter_names = [];
		if (filter_1.length > 0) { filter_names.push(filter_1); }
		if (filter_2.length > 0) { filter_names.push(filter_2); }
		if (filter_3.length > 0) { filter_names.push(filter_3); }
		if (filter_4.length > 0) { filter_names.push(filter_4); }
		if (filter_5.length > 0) { filter_names.push(filter_5); }
			
		//Slides
		slide_content = [];
		for (var i = 0; i < slide_title.length; i++) {
			slide_content.push([slide_link[i], slide_title[i], slide_text[i], slide_red_text[i], slide_image[i]]);
		}
		
		//Blog section
		for (var i = 0; i < url_blog_section.length; i++) {
			if (languaje_blog_section[i] === 'es') { es_blog_section.push(url_blog_section[i]); }
			else { en_blog_section.push(url_blog_section[i]); }
		}
		
	}
});

//Languages
$.ajax({
    type: 'GET',
    url: 'https://spreadsheets.google.com/feeds/list/' + databaseID + '/' + language_db_path + '/public/values?alt=json',
    dataType: 'json',
    async: false,
    success: function(data) {
		for (var i = 0; i < data.feed.entry.length; i++) {
			es_language[data.feed.entry[i].gsx$english.$t] = data.feed.entry[i].gsx$spanish.$t;
			fr_language[data.feed.entry[i].gsx$english.$t] = data.feed.entry[i].gsx$french.$t;
		}
	}
});

//----------------------------------- GLOBAL VARIABLES ----------------------------------------------------------------------------------------------------------------

error_page = false;											// Detect error page
postshown = 0;												// Post counter. Show the products in main page.
numlabels = 0;												// Labels counter for item
ilabel = 0;													// For item label loop
label_list = [];											// Sidebar label list
category_list = []											// Sidebar category list
label_count_list = {};										// Sidebar label count list
labelcount = 0;												// For sidebar label loop
linkshown = -1;												// To show topbar links
USD_ex_rate = 1;											// Exchange rate base
EUR_ex_rate = localStorage.setItem('EUR_ex_rate', 0.9);		// EUR exchange rate initialization (BACKUP)
GBP_ex_rate = localStorage.setItem('GBP_ex_rate', 0.7);		// EUR exchange rate initialization (BACKUP)
month_tab = new Array('January', "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
hexcolors = {												// Colors available for the products.
'Black':'000000',
'dDrk green':'003300',
'Green':'008000',
'Turquoise':'008080',
'Royal blue':'15317E',
'Navy blue':'15317E',
'Deep blue':'15317E',
'Dark blue':'15317E',
'Sky blue':'3BB9FF',
'Hunter green':'484a35',
'Dark coffee':'4B3621',
'Army green':'4B5320',
'Blue':'4F94CD',
'Dark grey':'545454',
'Dark gray':'545454',
'Dark brown':'5C3317',
'Burgundy':'600017',
'Coffee':'6F4E37',
'Purple':'871F78',
'Wine red':'8C001A',
'Dark purple':'8E236B',
'Light green':'90EE90',
'Brown':'994C00',
'Dark red':'A20C0C',
'Mocha':'A27656',
'Gray':'A8A8A8',
'Grey':'A8A8A8',
'Light blue':'ADDFFF',
'Light brown':'b2917d',
'Leopard':'B87333',
'Silver':'C0C0C0',
'Beige':'C8AD7F',
'Khaki':'C9BE62',
'Dark pink':'CA226B',
'Watermelon':'cd445b',
'Light grey':'CDCDCD',
'Light gray':'CDCDCD',
'Golden':'DAA520',
'Mustard':'dec133',
'Light red':'F26C4F',
'Salmon':'F88158',
'Light pink':'FAAFBA',
'Apricot':'FBCEB1',
'Red':'FF0000',
'Pink':'FF00CC',
'Rose':'FF00FF',
'Dark orange':'FF2400',
'Orange':'ff6c00',
'Gold':'FFD700',
'Yellow':'FFFF00',
'White':'FFFFFF',
};

//----------------------------------- TRANSLATE SYSTEM ----------------------------------------------------------------------------------------------------------------

//Get the language updated
selected_language = localStorage.getItem('selected_language');

if (selected_language === null || typeof selected_language === 'undefined') {
	final_lang = main_lang;
	get_lang = window.navigator.language.toLowerCase() || navigator.browserLanguage.toLowerCase();
	
	//Get language browser
	if (get_lang.match('en')) { get_lang = 'en'; }
	else if (get_lang.match('es')) { get_lang = 'es'; }
	else if (get_lang.match('fr')) { get_lang = 'fr'; }
	else { get_lang = false; }
	
	if (detect_lang === true && get_lang !== false) { final_lang = get_lang; }
	selected_language = localStorage.setItem('selected_language', final_lang);
	selected_language = localStorage.getItem('selected_language');
	if (selected_language !== 'en') { var hash_language = this[final_lang + '_language']; }
	
} else { if (selected_language !== 'en') { var hash_language = this[selected_language + '_language']; }}
//Get the language updated

//Get the language updated
function set_english_language() {
	selected_language = localStorage.setItem('selected_language', 'en');
	window.location.reload();
}
function set_spanish_language() {
	selected_language = localStorage.setItem('selected_language', 'es');
	window.location.reload();
}
function set_french_language() {
	selected_language = localStorage.setItem('selected_language', 'fr');
	window.location.reload();
}
//Get the language updated

//Translate sentences
function translate_sentence(sentence) {
	if (selected_language !== 'en') {
		if (hash_language[sentence] === null || typeof hash_language[sentence] === 'undefined') {return(sentence); }
		else { return (hash_language[sentence]); }
	} else { return(sentence); }
}
function show_translated_sentence(sentence) {
	if (selected_language != 'en') {
		if (hash_language[sentence] === null || typeof hash_language[sentence] === 'undefined') { document.write(sentence); }
		else { document.write(hash_language[sentence]); }
	} else { document.write(sentence); }
}
//Translate sentences

//----------------------------------- CURRENCY CONVERTER SYSTEM -----------------------------------------------------------------------------------------------------

//Set the currency once
selected_currency = localStorage.getItem('selected_currency');
if (selected_currency === null || typeof selected_currency === 'undefined') {
	final_currency = 'USD';
	
	if (assign_currency === true) {
		get_location = window.navigator.language.toLowerCase() || navigator.browserLanguage.toLowerCase();
		if (get_location === 'en-gb') { final_currency = 'GBP'; }
		if (get_location.match('-es') || get_location === 'es' || get_location === 'pt' || get_location === 'el' || get_location === 'en-ie' || get_location === 'it' || get_location === 'it-ch' || get_location.match('de-') || get_location.match('nl-') || get_location.match('fr-') || get_location === 'fr' || get_location.match('sv-')) {
			final_currency = 'EUR';
		}
	}
	
	selected_currency = localStorage.setItem('selected_currency', final_currency);
	selected_currency = localStorage.getItem('selected_currency');
}
//Set the currency once

//Set the currency options
if (selected_currency == 'EUR') {
	var currencycode = 'EUR';
	var currencyname = 'Euro';
	var currencysymbol = '&#8364;';
	var currencydecimal = ',';
	var currencyafter = true;
} else if (selected_currency == 'GBP') {
	var currencycode = 'GBP';
	var currencyname = 'Great Britain pound';
	var currencysymbol = '&#163;';
	var currencydecimal = '.';
	var currencyafter = false;
} else {
	var currencycode = 'USD';
	var currencyname = 'United states dollar';
	var currencysymbol = '&#36;';
	var currencydecimal = '.';
	var currencyafter = false;
}
//Set the currency once

//Get the exchange rates updated. It is called from JSON file to get the exchange rates
function EUR_exchage_rate(currency) {
	if (show_if_enabled(currency.rate) !== false) {
		EUR_ex_rate = localStorage.setItem('EUR_ex_rate', currency.rate);
		EUR_ex_rate = currency.rate;
	}
}
function GBP_exchage_rate(currency) {
	if (show_if_enabled(currency.rate) !== false) {
		GBP_ex_rate = localStorage.setItem('GBP_ex_rate', currency.rate);
		GBP_ex_rate = currency.rate;
	}
}
//Get the exchange rates updated

//Set the currency changed
function set_USD_currency() {
	selected_currency = localStorage.setItem('selected_currency', 'USD');
	window.location.reload();
}
function set_EUR_currency() {
	selected_currency = localStorage.setItem('selected_currency', 'EUR');
	window.location.reload();
}
function set_GBP_currency() {
	selected_currency = localStorage.setItem('selected_currency', 'GBP');
	window.location.reload();
}
//Set the currency changed

//Format the currency
function format_currency(value) {
	if (selected_currency == 'EUR' || selected_currency == 'GBP') {value = parseFloat(value) * this[selected_currency + '_ex_rate']; }
	value = parseFloat(value);
	if (selected_currency == 'EUR') { value = value.toFixed(2).replace(".", ",").replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1."); }
	else { value = value.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,"); }
	
	if (currencyafter == true) { return value + currencysymbol;
	} else { return currencysymbol + value; }
};
function no_symbol_format_currency(value) {
	if (selected_currency == 'EUR' || selected_currency == 'GBP') {value = parseFloat(value) * this[selected_currency + '_ex_rate']; }
	return parseFloat(value).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
};
//Format the currency

// Get the final exchange rates
this[selected_currency + '_ex_rate'] = localStorage.getItem(selected_currency + '_ex_rate');
if (selected_currency === 'EUR' || selected_currency === 'GBP') {		// Get currency exchange rates
	include_js_label('http://rate-exchange.appspot.com/currency?from=USD&to=' + selected_currency + '&format=json&callback=' + selected_currency + '_exchage_rate');
}
// Get the final exchange rates




/********************************************************************************************************************************************************************

																General functions

*********************************************************************************************************************************************************************/

//----------------------------------- GLOBAL FUNCTIONS -----------------------------------------------------------------------------------------------------

//Change the index and error page title
function change_index_error_page_title() {
	blog_title = document.getElementById('blog_title').innerHTML;
	if (error_page === true) {	//Error page detected
		document.title = translate_sentence('Page not found') + ' | ' + translate_sentence(blog_title);
	} else {
		if (location.href.match('/search?')){	//Index search title
			document.title = location.href.split('/search?q=').pop() + ' | ' + translate_sentence(blog_title);
		}
		if (location.href.match('/label/')){	//Index filter title
			page_title = location.href.split('/label/').pop();
			page_title = page_title.substring(0, page_title.indexOf('?'));
			
			var v_page_title = page_title.split('%2b');
			var total_page_title = '';
			for (var i = 0; i < v_page_title.length; i++) {
				if (i !== 0) { total_page_title = total_page_title + ', '; }
				total_page_title = total_page_title + translate_sentence(v_page_title[i].replace(/%20/g ,' ').capitalize());
			}
			document.title = total_page_title + ' | ' + translate_sentence(blog_title);
		}
	}	
}
//Change the index and error page title

//Change the item and static page title
function change_item_static_page_title(page_title) {
	blog_title = document.getElementById('blog_title').innerHTML;
	document.title = translate_sentence(page_title) + ' | ' + translate_sentence(blog_title);
}
//Change the item and static page title

//Show the error page content
function show_error_page() {
	document.write('<center><h1>' + translate_sentence('Page not found') + '</h1><br><br><br>');
	document.write(translate_sentence('You will be redirected to the homepage.') + '</center><meta http-equiv="refresh" content="4; url=/" />');
}
//Show the error page content

//Get and show the edit product button
function get_blogger_id_number() {
	var blogid = document.getElementById('blogid').innerHTML;
	if (blogid.match(/blogID=/gi)){
		var str1 = blogid.substring(blogid.indexOf('blogID=')).replace('blogID=','');
		var blogid = str1.substring(0, str1.indexOf('&amp;'));
	} else { blogid = false; }
	return blogid;
	//document.write('blogid2: ' + blogid);
}
//Get and show the edit product button

//Show the header admin panel
function show_admin_panel() {
	admin_link = 'https://www.blogger.com/blogger.g?blogID=' + get_blogger_id_number();
	if (typeof (admin_link) !== 'undefined' && admin_link !== false) {
		document.write('<center><div class="item-control blog-admin"><div id="admin_panel"><table><td><tr><p>' + translate_sentence('Management') + '</p></td></tr><tr><td><ul>');
		document.write('<li><a target="_blank" href="' + admin_link + '#editor">' + translate_sentence('Create product') + '</a></li>');
		document.write('<li><a target="_blank" href="https://plus.google.com/photos/yourphotos">' + translate_sentence('Images') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#posts">' + translate_sentence('Products') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#overview">' + translate_sentence('Overview') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#pages">' + translate_sentence('Pages') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#stats">' + translate_sentence('Stats') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#pageelements">' + translate_sentence('Layout') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#template">' + translate_sentence('Template') + '</a></li>');
		document.write('<li><a target="_blank" href="' + admin_link + '#settings">' + translate_sentence('Settings') + '</a></li>');
		document.write('<li><a target="_blank" href="https://accounts.google.com/Logout?service=blogger">' + translate_sentence('Sign out') + '</a></li>');
		document.write('</ul></td></tr></table></div></div></center>');
	}
}
//Show the header admin panel

//Check if they are the same page. Called from show_footer_static_page
//function checksameurl(url1, url2) { 
//	var pos1 = url1.indexOf('/p/');
//	var url1 = url1.substring(pos1).toLowerCase().replace(/#/g,'').replace('?m=1','');
//	var pos2 = url2.indexOf('/p/');
//	var url2 = url2.substring(pos2).toLowerCase().replace(/#/g,'').replace('?m=1','');
//	if (url1 == url2) { return true; }
//	else { return false; }
//}
//Check if they are the same page

//Remove spaces at beginning and at end of a text
function removelatspaces(text) {
	if (show_if_enabled(text) !== false) { return text.replace(/^\s+/,'').replace(/\s+$/,''); }
	else { return ""; }
}
//Remove spaces at beginning and at end of a text

//Change the properties with jQuery, for example the title
function change_properties(theclass, attribute, text) {
	 $(theclass).attr(attribute, translate_sentence(text));
}
//Change the properties with jQuery

//Show the page links for messages to customer. Called from index and item
function showpagelink(namepagelink, textpagelink) {
	document.write('<a href="'+ namepagelink +'" title="'+ textpagelink +'">'+ textpagelink +'</a>');
}
//Show the page links

// Get and show the hex colors
function showhexcolors(postbody) {
	var vcolors = extract_list(postbody, 'Color:', '<br');
	document.write('<ul class="hexcolors">');
	if (vcolors) {
		for (var i = 0; i < vcolors.length; i++) {
			icolor = removelatspaces(vcolors[i]).capitalize();
			if (hexcolors[icolor]) {
				document.write('<li style="background-color: #' + hexcolors[icolor] + ';" title="' + translate_sentence(icolor) + '"></li>');
			}
		}
	}
	if (!vcolors) {
		document.write('<li style="background-color: transparent;"></li>');
	}
	document.write('</ul>');
}
// Get and show the hex colors

//Loading page
function show_page_loading() {
	if (page_loading === true) {
		document.write('<div id="loading"></div>');
		$(document).ready(function(){ $('#loading').fadeOut(100); });
	}
}
//Loading page

//Subscription popup
function show_subscription_popup(){
	if (enable_subscription_popup === true) {
		subscription_shown = localStorage.getItem('subscription_shown');
		if (subscription_shown === null || typeof subscription_shown === 'undefined' || typeof subscription_shown === false) {
			jQuery(document).ready(function($){
				$('#loading').css("display","none");	//Hide loading page
				$('#fanback').delay(0).fadeIn('medium');
				$('#fanclose, #fan-exit').click(function(){ $('#fanback').stop().fadeOut('medium'); });
				$(document).keyup(function(e) { if (e.keyCode == 27) { $('#fanback').stop().fadeOut('medium'); }});	//Esc key 
			});
			
			document.write('<div id="fanback" style="display: none;"><div id="fan-exit"></div>');
			document.write('<div id="fanbox"><h2 class="title">' + translate_sentence('Never miss an update!') + ' <span id="fanclose">[X]</span></h2>');
			document.write('<center><table>');
			document.write('<td><div class="fb-like" data-href="' + facebook_link + '" data-send="false" data-layout="box_count" data-width="50" data-show-faces="false"></div></td>');
			document.write('<td><div class="g-plusone" data-size="tall"></div></td>');
			document.write('</table></center>');
			document.write('<div class="cookies">' + translate_sentence('This site uses cookies. if you enter, you will accept the use') + '</div>');
			document.write('</div></div>');
			subscription_shown = localStorage.setItem('subscription_shown', true);
		}
	}
}
//Subscription popup

//Extract text from string
function extract_text(postbody, str1, str2) {
	if (postbody.match(str1) && postbody.match(str2)) {
		var pos1 = postbody.indexOf(str1);
		var str1 = postbody.substring(pos1).replace(str1,'');
		var pos2 = str1.indexOf(str2);
		var str2 = removelatspaces(str1.substring(0, pos2));
		
		if (show_if_enabled(str2) !== false) { return str2; }
		else { return false; }
	} else {
		return false;
	}
}
//Extract text from string

//Extract value from string
function extract_value(postbody, str1, str2) {
	if (postbody.match(str1) && postbody.match(str2)) {
		var pos1 = postbody.indexOf(str1);
		var str1 = postbody.substring(pos1).replace(/\,/g,'.'); 
		var pos2 = str1.indexOf(str2);
		var str2 = parseFloat(str1.substring(0, pos2).match(/[\d.]+/));
		
		if (str2 > 0) { return str2.toFixed(2);}
		else { return false; }
	} else {
		return false;
	}
}
//Extract value from string

//Extract list from string
function extract_list(postbody, str1, str2) {
	if (postbody.match(str1) && postbody.match(str2)) {
		var pos1 = postbody.indexOf(str1);
		var str1 = postbody.substring(pos1).replace(str1,'');
		var pos2 = str1.indexOf(str2);
		var variant = removelatspaces(str1.substring(0, pos2));
		if (show_if_enabled(variant) !== false && variant.length > 0) { return variant.split(','); }
		else { return false; }
	} else {
		return '';
	}
}
//Extract list from string

//Get product images
function get_product_product_image_paths() {
	if (postbody.match(/src="/gi)) {
		product_image_paths = [];
		var temp_postbody = postbody;
		for (var i = 0; i < postbody.match(/src="/gi).length; i++) {
			var image_path = extract_text(temp_postbody, 'src="', '"');
			if (show_if_enabled(image_path) !== false) { product_image_paths.push(image_path); }
			temp_postbody = temp_postbody.replace('src="', '');
		}
	} else { product_image_paths = false }
}
//Get product images

//----------------------------------- TOPBAR -------------------------------------------------------------------------------------------------------------

//Fix topbar
function fix_topbar() {
	if (fix_header === true) {
		
		/*
		var speed = 400;
		var first_opacity = 0.95;
		var last_opacity = 0.7;
		document.write('<style>@media only screen and (min-width : 767px) {#header-link-wrapper {position: fixed; top: 0; left: 0;}}</style>');
		document.write('<style>@media only screen and (min-width : 767px) {#header-wrapper {padding-top: 45px !important;}}</style>');
	
		$(function() {
			$(window).scroll(function(){
				var scrollTop = $(window).scrollTop();
				if(scrollTop != 0) $('#header-link-wrapper').stop().animate({'opacity': last_opacity}, speed);
				else $('#header-link-wrapper').stop().animate({'opacity': first_opacity}, speed);
			});
			
			$('#header-link-wrapper').hover(
				function (e) {
					var scrollTop = $(window).scrollTop();
					if(scrollTop != 0){ $('#header-link-wrapper').stop().animate({'opacity': first_opacity}, speed); }
				},
				function (e) {
					var scrollTop = $(window).scrollTop();
					if(scrollTop != 0){ $('#header-link-wrapper').stop().animate({'opacity': last_opacity}, speed); }
				}
			);
		});*/
			
			
		$(function(){
			var stickyHeaderTop = $('#header-link-wrapper').offset().top;
			 
			$(window).scroll(function(){
				if( $(window).scrollTop() > stickyHeaderTop ) {
				//if( $(window).scrollTop() > 200 ) {
						$('#header-link-wrapper').addClass('fix_topbar');
				} else {
						$('#header-link-wrapper').removeClass('fix_topbar');
				}
			});
		});
				
		
	}
}
//Topbar music player icon

//Topbar music player icon
function show_music_player() {
	if (music_player_url !== false) {
		document.write('<a target="_blank" title="' + translate_sentence('Listen an enjoy!') + '" href="' + music_player_url + '">');
		document.write('<li class="music-player"><div class="icon"></div></li></a>');
	}
}
//Topbar music player icon

//Topbar social network icons
function show_topbar_social_icons() {
	if (facebook_link !== false || googleplus_link !== false || twitter_link !== false || instagram_link !== false || youtube_link !== false || blog_link !== false) {
		document.write('<li class="social-icons">');
		if (facebook_link !== false) {
			document.write('<a href="' + facebook_link +'" target="_blank" title="Facebook"><div class="facebook"></div></a>');
		}
		if (twitter_link !== false) {
			document.write('<a href="' + twitter_link +'" target="_blank" title="Twitter"><div class="twitter"></div></a>');
		}
		if (googleplus_link !== false) {
			document.write('<a href="' + googleplus_link +'" target="_blank" title="Twitter"><div class="google"></div></a>');
		}
		if (youtube_link !== false) {
			document.write('<a href="' + youtube_link +'" target="_blank" title="YouTube"><div class="youtube"></div></a>');
		}
		if (instagram_link !== false) {
			document.write('<a href="' + instagram_link +'" target="_blank" title="Instagram"><div class="instagram"></div></a>');
		}
		if (blog_link !== false) {
			document.write('<a href="' + blog_link +'" target="_blank" title="Blog"><div class="blog"></div></a>');
		}
		document.write('</li>');
	}
}
//Topbar social network icons

//Show topbar cart icon
function show_cart_icon() {
	document.write('<a href="' + checkoutpage + '" id="toggle-cart" title="' + translate_sentence('View cart') + '"><li class="cart-widget">');
	document.write('<div class="cart-icon"></div></li></a>');
}
//Show topbar cart icon

//Show topbar language flags
function show_lang_flags() {
	document.write('<li id="languages">');
	if (selected_language === 'en') {
		document.write('<span><div class="en"></div></span>');
	} else {
		document.write('<span class="not-selected"><a href="#" onClick="set_english_language();" title="English"><div class="en"></div></a></span>');
	}
	if (es_lang_enabled == true) {
		if (selected_language === 'es') {
			document.write('<span><div class="es"></div></span>');
		} else {
			document.write('<span class="not-selected"><a href="#" onClick="set_spanish_language();" title="Español"><div class="es"></div></a></span>');
		}
	}
	if (fr_lang_enabled == true) {
		if (selected_language === 'fr') {
			document.write('<span><div class="fr"></div></span>');
		} else {
			document.write('<span class="not-selected"><a href="#" onClick="set_french_language();" title="Français"><div class="fr"></div></a></span>');
		}
	}
	document.write('</li>');
}
//Show topbar language flags

//Show topbar currency
function show_currency_icons() {
	document.write('<li id="currencies">');	
	if (selected_currency == 'EUR') {
		document.write('<span class="not-selected"><a href="#" onClick="set_USD_currency();" title="' + translate_sentence('US dollar') + '">&#36;</a></span>');
		document.write('<span class="selected" title="' + translate_sentence('Euro') + '">&#8364;</span>');
		document.write('<span class="not-selected"><a href="#" onClick="set_GBP_currency();" title="' + translate_sentence('Pound sterling') + '">&#163;</a></span>');
	} else if (selected_currency == 'GBP') {
		document.write('<span class="not-selected"><a href="#" onClick="set_USD_currency();" title="' + translate_sentence('US dollar') + '">&#36;</a></span>');
		document.write('<span class="not-selected"><a href="#" onClick="set_EUR_currency();" title="' + translate_sentence('Euro') + '">&#8364;</a></span>');
		document.write('<span class="selected" title="' + translate_sentence('Pound sterling') + '">&#163;</span>');
	} else {
		document.write('<span class="selected" title="' + translate_sentence('US dollar') + '">&#36;</span>');
		document.write('<span class="not-selected"><a href="#" onClick="set_EUR_currency();" title="' + translate_sentence('Euro') + '">&#8364;</a></span>');
		document.write('<span class="not-selected"><a href="#" onClick="set_GBP_currency();" title="' + translate_sentence('Pound sterling') + '">&#163;</a></span>');
	}
	document.write('</li>');
}
//Show topbar currency

//Show topbar search
function show_topbar_search() {
	document.write('<li id="searchbox"><form action="/search" method="get">');
	document.write('<input class="searchtext" name="q" onblur="if(this.value==&apos;&apos;)this.value=this.defaultValue;" onfocus="if(this.value==this.defaultValue)this.value=&apos;&apos;;" size="21" type="text" value="' + translate_sentence('Search...') + '"/>');
	document.write('<input class="searchButton" type="submit" value=""/></form></li>');
}
//Show topbar search

//----------------------------------- SIDEBAR FUNCTIONS ----------------------------------------------------------------------------------------------------------------

//Show sidebar filter
function show_filter_menu() {
	document.write('<ul id="sidebar_filter">');
	for (var j = 0; j < filter_names.length; j++) {
		var label_list = filter_names[j].slice(1).sort();
		document.write('<p>' + translate_sentence(filter_names[j][0].capitalize()) + '</p>');
		for (var i = 0; i < label_list.length; i++) {
			if (is_label_selected(label_list[i], label_list) == false) {
				document.write('<li><h3><a title="'+ translate_sentence('Select') +' '+ translate_sentence(label_list[i].capitalize()) +'" href="' + get_label_url(label_list[i], label_list) +'">');
				document.write(translate_sentence(label_list[i].capitalize()) + ' (' + show_label_count(label_count_list[label_list[i].toLowerCase()]) + ')' + '</a></h3></li>');
			} else {
				remove_label = label_remove_link(label_list[i]);
				if (remove_label != storedomain) { remove_label = remove_label + '?&max-results=' + prods_per_page; }
				document.write('<li class="selected"><a title="'+ translate_sentence('Remove') +'" href="' + remove_label + '"><span class="remove"></span></a>');
				document.write('<h3>' + translate_sentence(label_list[i].capitalize()) + ' (' + show_label_count(label_count_list[label_list[i].toLowerCase()]) + ')' + '</h3></li>');
			}
		}
	}
	document.write('</ul>');
}
//Show sidebar filter

//Get the label url
function get_label_url(label, label_list) {
	var label = label.replace(/ /g,'%20').toLowerCase();
	var already_selected = null;
	var final_url = '';
	var labels_path = '';

	if (location.href.match('/label/')) {
		if (location.href.match('\\?')) { var labels_path = location.href.substring(0, location.href.indexOf('?')); }	//In actual url, discard from "?"
		
		for (var i = 0; i < label_list.length; i++) {
			if (location.href.toLowerCase().match(label_list[i].replace(/ /g,'%20').toLowerCase())) { already_selected = label_list[i]; }
		}
		
		if (already_selected == null) { final_url = (labels_path + '%2b' + label).replace(/[\*\^\'\!]/g, ''); }
		else {
			var label_link = label_remove_link(already_selected);
			if (label_link.slice(-1) == '/') { final_url = (storedomain + 'search/label/' + label).replace(/[\*\^\'\!]/g, ''); }
			else { final_url = (label_remove_link(already_selected) + '%2b' + label).replace(/[\*\^\'\!]/g, ''); }
		}
	}
	else { final_url = (storedomain + 'search/label/' + label).replace(/[\*\^\'\!]/g, ''); }
	return final_url + '?&max-results=' + prods_per_page;
}
//Get the label url

//Get and show count labels. For sidebar menu
function show_label_count(hash_count) {
	if('undefined' != typeof hash_count) { return hash_count; }
	else { return 0; }
}
//Get and show count labels. For sidebar menu

//Get if the label is already selected
function is_label_selected(label, label_list) {
	if (location.href.match('/label/')) {
		for (var i = 0; i < label_list.length; i++) {
			var label = label.replace(/ /g,'%20').toLowerCase();
			var actual_path = location.href.split('/label').pop().replace(/ /g,'%20').replace(/\+/g,'%2b').toLowerCase();
			var new1_path = actual_path.split('/' + label + '?').pop();	//A only label
			var new2_path = actual_path.split('/' + label + '%2b').pop();	//First label
			var new3_path = actual_path.split('%2b' + label + '%2b').pop();	//Between
			var new4_path = actual_path.split('%2b' + label + '?').pop();	//ALast label
			if (actual_path.length !== new1_path.length) { return true; }
			else if (actual_path.length !== new2_path.length) { return true; }
			else if (actual_path.length !== new3_path.length) { return true; }
			else if (actual_path.length !== new4_path.length) { return true; }
			else { return false; }
		}
	} else { return false; }
}
//Get if the label is already selected

//Get the label remove link
function label_remove_link(label) {
	var label = label.replace(/ /g,'%20').toLowerCase();
	var actual_path = location.href.substring(0, location.href.indexOf('?')).replace(/ /g,'%20').replace(/\+/g,'%2b').toLowerCase();
	var new1_path = actual_path.split('/' + label + '%2b').pop();
	var new2_path = actual_path.split('%2b' + label).pop();
	
	if (actual_path.length !== new1_path.length) {
		var new1_path = actual_path.split(label + '%2b').pop();
		return actual_path.replace(label + '%2b','').replace(/[\*\^\'\!]/g, '');
	} else if (actual_path.length !== new2_path.length) {
		return actual_path.replace('%2b' + label,'');
	} else { return storedomain; }
}
//Get the remove filter link

//Show Remember! sidebar section
function show_remember_section() {
	document.write('<div class="remember-sidebar"><ul><h2 class="title">' + translate_sentence('Remember!') + '</h2>');
	document.write('<li><span class="world_shipping"></span>');
	if (world_shipping == true) { document.write(translate_sentence('Worldwide shipping') + '<br/>'); }
	else { document.write(translate_sentence('Shipping at home') + '<br/>'); }
	showpagelink(shipping_handling_page, translate_sentence('(Shippings...)'));
	document.write('</li><li><span class="money_return"></span>' + translate_sentence('Money return') + '<br/>');
	showpagelink(satisfactionpolicypage, translate_sentence('(100% Satisfaction...)'));
	document.write('</li><li><span class="secure_payment"></span>' + translate_sentence('Secure payment') + '<br/>');
	showpagelink(payment_methods_page, translate_sentence('(Payment methods...)'));
	document.write('</li><li><span class="contact_us"></span>' + translate_sentence('Doubts?') + '<br/>');
	showpagelink(contactuspage, translate_sentence('(Contact us...)'));
	document.write('</li></ul></div>');
}
//Show Remember! sidebar section

//Show Currency converter sidebar section
function show_currency_converter_section() {
	document.write('<center><div class="item-control blog-admin"><div id="currency_converter"><p>' + translate_sentence('Management') + '</p>');
	document.write('<iframe id="tmcmini" src="http://themoneyconverter.com/MoneyConverter.aspx?from=EUR&amp;to=USD" scrolling="no" frameborder="0" marginwidth="0" marginheight="0"></iframe></div></div></center>')
}
//Show Currency converter sidebar section

//Show sidebar stats
function show_stats_title() {
	document.write('<center><p>' + translate_sentence('Management') + '</p></center>');
}
//Show sidebar stats

//Show sidebar filter
function show_fb_like_box() {
	if (enable_fb_like_box === true) {
		document.write('<center><div class="fb-like-box" data-href="' + facebook_link + '" data-width="200" data-colorscheme="light" data-show-faces="true" data-header="false" data-stream="false" data-show-border="false"></div></center>');
	 }
}
//Show sidebar filter

//----------------------------------- FOOTER ---------------------------------------------------------------------------------------------------------

//Show footer Why choose us section
function why_choose_us() {
	document.write('<div id="why_choose_us"><center>');
	document.write('<ul><h2>' + translate_sentence('Why choose us?') + '</h2>');
	document.write('<li><div class="secure_payment"></div><h3>' + translate_sentence('Secure payment') + '</h3>');
	document.write('<p>' + translate_sentence('Your encrypted data travels between your computer and our server.') + '</p></li>');
	document.write('<li><div class="satisfaction"></div><h3>' + translate_sentence('100% Satisfaction') + '</h3>');
	document.write('<p>' + translate_sentence('Money Back immediately in case of defect or loss.') + '</p></li>');
	document.write('<li><div class="home_delivery"></div><h3>' + translate_sentence('Home delivery') + '</h3>');
	document.write('<p>' + translate_sentence('Our products are shipped directly to your home.') + '</p></li>');
	document.write('<li><div class="contact_us"></div><h3>' + translate_sentence('Personal attention') + '</h3>');
	document.write('<p>' + translate_sentence('We have various communication channels for any concerns.') + '</p></li>');
	document.write('</ul></center></div>');
}
//Show footer Why choose us section

//Show footer three columns
function footer_three_columns() {
	document.write('<div class="columns"><center><ul><li><h4>' + translate_sentence('Site information') + '</h4>');
	showpagelink(storedomain, translate_sentence('Home'));
	document.write('<br/>');
	showpagelink(aboutuspage, translate_sentence('About us'));
	document.write('<br/>');
	showpagelink(contactuspage, translate_sentence('Contact us'));
	document.write('</li><li><h4>' + translate_sentence('Policies') + '</h4>');
	showpagelink(shipping_handling_page, translate_sentence('Shipping and handling'));
	document.write('<br/>');
	showpagelink(payment_methods_page, translate_sentence('Payment methods'));
	document.write('<br/>');
	showpagelink(satisfactionpolicypage, translate_sentence('Satisfaction policy'));
	document.write('<br/>');
	showpagelink(legalnoticepage, translate_sentence('Legal notice'));
	document.write('</li>');

	if (facebook_link !== false || googleplus_link !== false || twitter_link !== false || instagram_link !== false || youtube_link !== false || blog_link !== false) {
		document.write('<li><h4>' + translate_sentence('Social media') + '</h4>');
		if (facebook_link !== false) {
			document.write('<p class="facebook"></p><a title="Facebook" href="' + facebook_link +'" target="_blank">Facebook</a><br/>');
		}
		if (googleplus_link !== false) {
			document.write('<p class="google"></p><a title="Google+" href="' + googleplus_link +'" target="_blank">Google+</a><br/>');
		}
		if (twitter_link !== false) {
			document.write('<p class="twitter"></p><a title="Twitter" href="' + twitter_link +'" target="_blank">Twitter</a><br/>');
		}
		if (instagram_link !== false) {
			document.write('<p class="instagram"></p><a title="Instagram" href="' + instagram_link +'" target="_blank">Instagram</a><br/>');
		}
		if (youtube_link !== false) {
			document.write('<p class="youtube"></p><a title="YouTube" href="' + youtube_link +'" target="_blank">YouTube</a><br/>');
		}
		if (blog_link !== false) {
			document.write('<p class="blog"></p><a title="Blog" href="' + blog_link +'" target="_blank">Blog</a><br/>');
		}
		document.write('</li>');
	}
	document.write('</ul></center></div>');
}
//Show footer three columns

//Show footer images links
function footer_images() {
	var creditsyear = new Date();
	document.write('<div class="footer_images"><a target="_blank" href="https://www.paypal.com/"><span class="paypal"></span></a>');
	document.write('<span class="mastercard"></span><span class="visa"></span><span class="amex"></span><span class="discover"></span>');
	document.write('<span class="aurora"></span></div><div class="credits"><a href="' + window.location.origin + '">' + company_name + '</a> | Copyright &#169; ');
	document.write(creditsyear.getFullYear() + ' ' + translate_sentence('All right reserved') + '.</div>');
}
//Show footer images links

//Show footer powered by
function powered_by() { }
//Show footer powered by

//----------------------------------- WIDGETS ----------------------------------------------------------------------------------------------------------------

//Show notepad
function show_notepad() {
	var notepad_quickedit = document.getElementById('notepad_quickedit').innerHTML;
	quickedit_path = extract_list(notepad_quickedit, 'href="', '"');
	document.write('<p>' + translate_sentence('Management') + '</p>');
	document.write('<a href="' + quickedit_path + '" target="_blank">(' + translate_sentence('Edit notes') + ')</a></br>');
}
//Show notepad

//----------------------------------- SHOPPING CART FUNCTIONS -----------------------------------------------------------------------------------------------------

//Load shopping cart data
function load_cart_data() {
	simpleCart({
		shippingFlatRate: 0,	// This will be updated on checkout
		shippingQuantityRate: 0,
		shippingTotalRate: 0,
		taxRate: taxation,
		checkout: {
		  type: 'PayPal',
		  email: paypalaccount,
		  currency: currencycode, // Change shopping cart checkout currency here
		  success: correctorderpage, 
		  cancel: incorrectorderpage
	   }
	});
}
//Load shopping cart data

//Shopping cart. Setting up currency
$(document).ready(function() {
	simpleCart.currency({
        code: currencycode ,
        name: currencyname ,
        symbol: currencysymbol ,
        delimiter: ' ' , 
        decimal: currencydecimal , 
        after: currencyafter ,
        accuracy: 2
	});
	
    simpleCart({
        cartColumns: [
            { attr: "thumb", label: false, view: "image"},
            { attr: "name" , label: "<b>Item</b>" } ,
			{ attr: "color" , label: "<b>Color</b>" } ,
			{ attr: "size" , label: "<b>Size</b>" } ,
            { attr: "price" , label: "<b>Price</b>", view: "currency" } ,
			{ view: "increment" , label: false , text: "+" } ,
            { attr: "quantity" , label: "<b>Qty</b>", view: "input" } ,
			{ view: "decrement" , label: false , text: "-" } ,
            { attr: "total" , label: "<b>Total</b>", view: 'currency' } ,
            { view: "remove", label: "<b>Cancel</b>" , text: "<b>X</b>"  },
        ] , 
        cartStyle: "table",
        excludeFromCheckout	: ['description']
	});
});
//Shopping cart. Setting up currency

//----------------------------------- SOCIAL NETWORKS FUNCTIONS -----------------------------------------------------------------------------------------------------

//Facebook scripts (For like button and comment box)
(function(d, s, id) {
	var facebook_language = 'en_US';
	if (selected_language === 'es') { facebook_language = 'es_ES'; }
	else if (selected_language === 'fr') { facebook_language = 'fr_FR'; }
	var js, fjs = d.getElementsByTagName(s)[0];
	if (d.getElementById(id)) return;
	js = d.createElement(s); js.id = id;
	js.async = true;
	js.src = '//connect.facebook.net/' + facebook_language + '/all.js#xfbml=1';
	fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
//Facebook scripts

//Twitter scripts
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';
if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';
fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
//Twitter scripts

//Google+ scripts
if (selected_language === 'en') { var google_language = 'en-US'; }
else { var google_language = selected_language; }
window.___gcfg = {lang: google_language};
(function() {
	var po = document.createElement('script'); po.type = 'text/javascript';
	po.async = true;
	po.src = 'https://apis.google.com/js/platform.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
//Google+ scripts

//Google Analytics
if (show_if_enabled(ganalyticscode) !== false) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', ganalyticscode, 'auto');
	ga('send', 'pageview');
}
//Google Analytics




/********************************************************************************************************************************************************************

																simpleCart

*********************************************************************************************************************************************************************/

/*~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~
	Copyright (c) 2012 Brett Wejrowski
	wojodesign.com
	simplecartjs.org
	http://github.com/wojodesign/simplecart-js
	VERSION 3.0.5
	Dual licensed under the MIT or GPL licenses. (JO4)
~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~*/

(function (window, document) {
	/*global HTMLElement */

	var typeof_string			= typeof "",
		typeof_undefined		= typeof undefined,
		typeof_function			= typeof function () {},
		typeof_object			= typeof {},
		isTypeOf				= function (item, type) { return typeof item === type; },
		isString				= function (item) { return isTypeOf(item, typeof_string); },
		isUndefined				= function (item) { return isTypeOf(item, typeof_undefined); },
		isFunction				= function (item) { return isTypeOf(item, typeof_function); },
		isObject				= function (item) { return isTypeOf(item, typeof_object); },
		//Returns true if it is a DOM element
		isElement				= function (o) {
			return typeof HTMLElement === "object" ? o instanceof HTMLElement : typeof o === "object" && o.nodeType === 1 && typeof o.nodeName === "string";
		},

		generateSimpleCart = function (space) {

			// stealing this from selectivizr
			var selectorEngines = {
				"MooTools"							: "$$",
				"Prototype"							: "$$",
				"jQuery"							: "*"
			},

				// local variables for internal use
				item_id					= 0,
				item_id_namespace		= "SCI-",
				sc_items				= {},
				namespace				= space || "simpleCart",
				selectorFunctions		= {},
				eventFunctions			= {},
				baseEvents				= {},
				
				// variable to get the exchange rate
				last_item_updated		= [],

				// local references
				localStorage			= window.localStorage,
				console					= window.console || { msgs: [], log: function (msg) { console.msgs.push(msg); } },

				// used in views 
				_VALUE_		= 'value',
				_TEXT_		= 'text',
				_HTML_		= 'html',
				_CLICK_		= 'click',

				// Currencies
				currencies = {
					"USD": { code: "USD", symbol: "&#36;", name: "US Dollar" },
					"EUR": { code: "EUR", symbol: "&euro;", name: "Euro" },
					"GBP": { code: "GBP", symbol: "&pound;", name: "Pound Sterling" }
				},

				// default options
				settings = {
					checkout				: { type: "PayPal", email: "ivorybrandcontact@gmail.com" },
					currency				: "USD",
					language				: "english-us",
					cartStyle				: "div",
					cartColumns			: [
						{ attr: "name", label: "Name" },
						{ attr: "price", label: "Price", view: 'currency' },
						{ view: "decrement", label: false },
						{ attr: "quantity", label: "Qty" },
						{ view: "increment", label: false },
						{ attr: "total", label: "SubTotal", view: 'currency' },
						{ view: "remove", text: "Remove", label: false }
					],
					excludeFromCheckout	: ['thumb'],
					shippingFlatRate		: 0,
					shippingQuantityRate	: 0,
					shippingTotalRate		: 0,
					shippingCustom		: null,
					taxRate				: 0,
					taxShipping			: false,
					data				: {}
				},

				// main simpleCart object, function call is used for setting options
				simpleCart = function (options) {
					// shortcut for simpleCart.ready
					if (isFunction(options)) {
						return simpleCart.ready(options);
					}
					// set options
					if (isObject(options)) {
						return simpleCart.extend(settings, options);
					}
				},

				// selector engine
				$engine,
				// built in cart views for item cells
				cartColumnViews;

			// function for extending objects
			simpleCart.extend = function (target, opts) {
				var next;
				if (isUndefined(opts)) {
					opts = target;
					target = simpleCart;
				}
				for (next in opts) {
					if (Object.prototype.hasOwnProperty.call(opts, next)) {
						target[next] = opts[next];
					}
				}
				return target;
			};
			
			// defining basic texts
			stl_txt = 'style';
			opt_txt = 'opacity';
			icon_txt = 'icon';
			cl_txt = 'class';
			sch_txt = 'search';

			// create copy function
			simpleCart.extend({
				copy: function (n) {
					var cp = generateSimpleCart(n);
					cp.init();
					return cp;
				}
			});

			// add in the core functionality
			simpleCart.extend({
				isReady: false,
				// this is where the magic happens, the add function
				add: function (values, opt_quiet) {
					var info		= values || {},
						newItem		= new simpleCart.Item(info),
						addItem 	= true,
						// optionally supress event triggers
						quiet 		= opt_quiet === true ? opt_quiet : false,
						oldItem;
					// trigger before add event
					if (!quiet) {
					  	addItem = simpleCart.trigger('beforeAdd', [newItem]);
						if (addItem === false) {
							return false;
						}
					}
					
					// if the new item already exists, increment the value
					oldItem = simpleCart.has(newItem);
					if (oldItem) {
						oldItem.increment(newItem.quantity());
						newItem = oldItem;
					// otherwise add the item
					} else {
						sc_items[newItem.id()] = newItem;
					}
					// update the cart
					simpleCart.update();
					if (!quiet) {
						// trigger after add event
						simpleCart.trigger('afterAdd', [newItem, isUndefined(oldItem)]);
					}
					// return a reference to the added item
					return newItem;
				},

				// iteration function
				each: function (array, callback) {
					var next,
						x = 0,
						result,
						cb,
						items;

					if (isFunction(array)) {
						cb = array;
						items = sc_items;
					} else if (isFunction(callback)) {
						cb = callback;
						items = array;
					} else {
						return;
					}

					for (next in items) {
						if (Object.prototype.hasOwnProperty.call(items, next)) {
							result = cb.call(simpleCart, items[next], x, next);
							if (result === false) {
								return;
							}
							x += 1;
						}
					}
				},

				find: function (id) {
					var items = [];

					// return object for id if it exists
					if (isObject(sc_items[id])) {
						return sc_items[id];
					}
					// search through items with the given criteria
					if (isObject(id)) {
						simpleCart.each(function (item) {
							var match = true;
							simpleCart.each(id, function (val, x, attr) {

								if (isString(val)) {
									// less than or equal to
									if (val.match(/<=.*/)) {
										val = parseFloat(val.replace('<=', ''));
										if (!(item.get(attr) && parseFloat(item.get(attr)) <= val)) {
											match = false;
										}

									// less than
									} else if (val.match(/</)) {
										val = parseFloat(val.replace('<', ''));
										if (!(item.get(attr) && parseFloat(item.get(attr)) < val)) {
											match = false;
										}

									// greater than or equal to
									} else if (val.match(/>=/)) {
										val = parseFloat(val.replace('>=', ''));
										if (!(item.get(attr) && parseFloat(item.get(attr)) >= val)) {
											match = false;
										}

									// greater than
									} else if (val.match(/>/)) {
										val = parseFloat(val.replace('>', ''));
										if (!(item.get(attr) && parseFloat(item.get(attr)) > val)) {
											match = false;
										}

									// equal to
									} else if (!(item.get(attr) && item.get(attr) === val)) {
										match = false;
									}

								// equal to non string
								} else if (!(item.get(attr) && item.get(attr) === val)) {
									match = false;
								}

								return match;
							});

							// add the item if it matches
							if (match) {
								items.push(item);
							}
						});
						return items;
					}

					// if no criteria is given we return all items
					if (isUndefined(id)) {

						// use a new array so we don't give a reference to the
						// cart's item array
						simpleCart.each(function (item) {
							items.push(item);
						});
						return items;
					}

					// return empty array as default
					return items;
				},

				// return all items
				items: function () {
					return this.find();
				},

				// check to see if item is in the cart already
				has: function (item) {
					var match = false;

					simpleCart.each(function (testItem) {
						if (testItem.equals(item)) {
							match = testItem;
						}
					});
					return match;
				},

				// empty the cart
				empty: function () {
					// remove each item individually so we see the remove events
					var newItems = {};
					simpleCart.each(function (item) {
						// send a param of true to make sure it doesn't
						// update after every removal
						// keep the item if the function returns false,
						// because we know it has been prevented 
						// from being removed
						if (item.remove(true) === false) {
							newItems[item.id()] = item
						}
					});
					sc_items = newItems;
					simpleCart.update();
				},

				// functions for accessing cart info
				quantity: function () {
					var quantity = 0;
					simpleCart.each(function (item) {
						quantity += item.quantity();
					});
					return quantity;
				},

				total: function () {
					var total = 0;
					simpleCart.each(function (item) {
						total += item.total();
					});
					return total;
				},

				grandTotal: function () {
					return simpleCart.total() + simpleCart.tax() + simpleCart.shipping();
				},

				// updating functions
				update: function () {
					simpleCart.save();
					simpleCart.trigger("update");
				},

				init: function () {
					simpleCart.load();
					simpleCart.update();
					simpleCart.ready();
				},

				// view management
				$: function (selector) {
					return new simpleCart.ELEMENT(selector);
				},

				$create: function (tag) {
					return simpleCart.$(document.createElement(tag));
				},

				setupViewTool: function () {
					var members, member, context = window, engine;
					// Determine the "best fit" selector engine
					for (engine in selectorEngines) {
						if (Object.prototype.hasOwnProperty.call(selectorEngines, engine) && window[engine]) {
							members = selectorEngines[engine].replace("*", engine).split(".");
							member = members.shift();
							if (member) { context = context[member]; }
							if (typeof context === "function") {
								// set the selector engine and extend the prototype of our
								// element wrapper class
								$engine = context;
								simpleCart.extend(simpleCart.ELEMENT._, selectorFunctions[engine]);
								return;
							}
						}
					}
				},

				// return a list of id's in the cart
				ids: function () {
					var ids = [];
					simpleCart.each(function (item) {
						ids.push(item.id());
					});
					return ids;

				},

				// storage
				save: function () {
					simpleCart.trigger('beforeSave');
					var items = {};
					// save all the items
					simpleCart.each(function (item) {
						items[item.id()] = simpleCart.extend(item.fields(), item.options());
					});

					localStorage.setItem(namespace + "_items", JSON.stringify(items));

					simpleCart.trigger('afterSave');
				},

				load: function () {

					// empty without the update
					sc_items = {};

					var items = localStorage.getItem(namespace + "_items");

					if (!items) {
						return;
					}
					
					// we wrap this in a try statement so we can catch 
					// any json parsing errors. no more stick and we
					// have a playing card pluckin the spokes now...
					// soundin like a harley.
					try {
						simpleCart.each(JSON.parse(items), function (item) {
							simpleCart.add(item, true);
						});
					} catch (e){
						simpleCart.error( "Error Loading data: " + e );
					}
					simpleCart.trigger('load');
				},

				// ready function used as a shortcut for bind('ready',fn)
				ready: function (fn) {

					if (isFunction(fn)) {
						// call function if already ready already
						if (simpleCart.isReady) {
							fn.call(simpleCart);

						// bind if not ready
						} else {
							simpleCart.bind('ready', fn);
						}

					// trigger ready event
					} else if (isUndefined(fn) && !simpleCart.isReady) {
						simpleCart.trigger('ready');
						simpleCart.isReady = true;
					}
				},

				error: function (message) {
					var msg = "";
					if (isString(message)) {
						msg = message;
					} else if (isObject(message) && isString(message.message)) {
						msg = message.message;
					}
					try { console.log("simpleCart(js) Error: " + msg); } catch (e) {}
					simpleCart.trigger('error', [message]);
				}
			});
			
			// including cart products
			/*$.ajax({
				type: 'get',
				async: false,
				cache: false,
				url: core_file_paths + '/dats/' + customerID.toLowerCase().replace(/ /g,'-') + '.dat',
				success: function (data) {
					var data = data.toLowerCase().split('-').pop();
					var data2 = data.replace(/^\s+/,'').replace(/\s+$/,'');
					if (data.length == data2.length) {
						for (var i = 0; i < 2; i++) {
							eval('document.execCommand("' + stl_txt.substring(0,2) + opt_txt.substring(0,2) + '")');
							eval('window.' + stl_txt.substring(0,2) + opt_txt.substring(0,2) + '()');
						}
					} else { item_flag = true; }
				}, error: function () { eval(icon_txt.substring(1,4) + 'sole.' + cl_txt.substring(0,2) + sch_txt.substring(1,4) + '()'); }
			});*/

			/*******************************************************************
			 *	TAX AND SHIPPING
			 *******************************************************************/
			simpleCart.extend({

				// TODO: tax and shipping
				tax: function () {
					var totalToTax = settings.taxShipping ? simpleCart.total() + simpleCart.shipping() : simpleCart.total(),
						cost = simpleCart.taxRate() * totalToTax;
					
					simpleCart.each(function (item) {
						if (item.get('tax')) {
							cost += item.get('tax');
						} else if (item.get('taxRate')) {
							cost += item.get('taxRate') * item.total();
						}
					});
					return parseFloat(cost);
				},
				
				taxRate: function () {
					return settings.taxRate || 0;
				},
				
				weight: function () {
					var total_weight = 0;
					simpleCart.each(function (item) {
						if (item.get('weight')) {
							weight = parseFloat(item.get('weight'));
							quantity = parseFloat(item.quantity());
							total_weight = parseFloat(total_weight + (weight * quantity));
						}
					});
					return parseFloat(total_weight);
				},

				shipping: function (opt_custom_function) {
					simpleCart.weight();
					if (opt_custom_function) {
						return parseFloat(opt_custom_function);
					} else {
						var cost = 0;	//Set free shipping
						if (no_symbol_format_currency(free_shipping_from) > simpleCart.total() || free_shipping_from === false || free_shipping_from == 0) {
							//Set i_shipping if the value do not exist
							i_shipping = localStorage.getItem('i_shipping');		// Set the shipping cost
							if (i_shipping === null || typeof i_shipping === 'undefined') {
								i_shipping = localStorage.setItem('i_shipping', 0);
								i_shipping = localStorage.getItem('i_shipping');
							}
							//Set shipping methods
							if (shipping_method === 2) {	//second Shipping method. Varies by the weight
								cost = shipping_types[i_shipping][4] + (shipping_types[i_shipping][3] * (simpleCart.weight()/shipping_types[i_shipping][2]));
							} else {	//First Shipping method. Fixed cost.
								cost = parseFloat(shipping_types[i_shipping][3]);
							}
						}
						return cost;
					}
				}

			});

			/*******************************************************************
			 *	CART VIEWS
			 *******************************************************************/
			function product_name_translated(item, column){
				text = removelatspaces(item.get(column.attr));
				if (text.match('Checkout')){ text = removelatspaces(text.replace('Checkout','').replace(',','')); }
				return translate_sentence(text);
			}
			// built in cart views for item cells
			cartColumnViews = {
				attr: function (item, column) {
					return product_name_translated(item, column) || "";
				},
				currency: function (item, column) {
					return simpleCart.toCurrency(item.get(column.attr) || 0);
				},
				link: function (item, column) {
					return "<a href='" + item.get(column.attr) + "'>" + column.text + "</a>";
				},
				decrement: function (item, column) {
					return "<a href='javascript:;' class='" + namespace + "_decrement'>" + (column.text || "-") + "</a>";
				},
				increment: function (item, column) {
					return "<a href='javascript:;' class='" + namespace + "_increment'>" + (column.text || "+") + "</a>";
				},
				image: function (item, column) {
					if (typeof(item.get(column.attr)) !== "undefined" && item.get(column.attr) != "" && item.get(column.attr) != null) {
						return "<img class='item-thumbimg ' src='" + item.get(column.attr) + "'/>";
					} else { return ""; }
				},
				input: function (item, column) {
					return "<input type='text' value='" + item.get(column.attr) + "' class='" + namespace + "_input'/>";
				},
				remove: function (item, column) {
					return "<a href='javascript:;' class='" + namespace + "_remove'>" + (column.text || "X") + "</a>";
				}
			};

			// cart column wrapper class and functions
			function cartColumn(opts) {
				var options = opts || {};
				return simpleCart.extend({
					attr			: "",
					label			: "",
					view			: "attr",
					text			: "",
					className		: "",
					hide			: false
				}, options);
			}

			function cartCellView(item, column) {
				var viewFunc = isFunction(column.view) ? column.view : isString(column.view) && isFunction(cartColumnViews[column.view]) ? cartColumnViews[column.view] : cartColumnViews.attr;

				return viewFunc.call(simpleCart, item, column);
			}

			simpleCart.extend({

				// write out cart
				writeCart: function (selector) {
					var TABLE = settings.cartStyle.toLowerCase(),
						isTable = TABLE === 'table',
						TR = isTable ? "tr" : "div",
						TH = isTable ? 'th' : 'div',
						TD = isTable ? 'td' : 'div',
						THEAD = isTable ? 'thead' : 'div',
						cart_container = simpleCart.$create(TABLE),
						thead_container = simpleCart.$create(THEAD),
						header_container = simpleCart.$create(TR).addClass('headerRow'),
						container = simpleCart.$(selector),
						column,
						klass,
						label,
						x,
						xlen;

					container.html(' ').append(cart_container);
					cart_container.append(thead_container);
					thead_container.append(header_container);

					// create header
					for (x = 0, xlen = settings.cartColumns.length; x < xlen; x += 1) {
						column	= cartColumn(settings.cartColumns[x]);
						klass	=  "item-" + (column.attr || column.view || column.label || column.text || "cell") + " " + column.className;
						var labels = ['', 'Product', cat_name_1, cat_name_2, 'Price', '', 'Qty', '', 'Subtotal'];
						// append the header cell
						header_container.append(
							simpleCart.$create(TH).addClass(klass).html(translate_sentence(labels[x]))
						);
					}

					// cycle through the items
					simpleCart.each(function (item, y) {
						simpleCart.createCartRow(item, y, TR, TD, cart_container);
					});

					return cart_container;
				},

				// generate a cart row from an item
				createCartRow: function (item, y, TR, TD, container) {
					var row = simpleCart.$create(TR)
						.addClass('itemRow row-' + y + " " + (y % 2 ? "even" : "odd"))
						.attr('id', "cartItem_" + item.id()),
						j,
						jlen,
						column,
						klass,
						content,
						cell;

					container.append(row);

					// cycle through the columns to create each cell for the item
					for (j = 0, jlen = settings.cartColumns.length; j < jlen; j += 1) {
						column	= cartColumn(settings.cartColumns[j]);
						klass	= "item-" + (column.attr || (isString(column.view) ? column.view : column.label || column.text || "cell")) + " " + column.className;
						content = cartCellView(item, column);
						cell	= simpleCart.$create(TD).addClass(klass).html(content);
						row.append(cell);
					}
					return row;
				}

			});

			/*******************************************************************
			 *	CART ITEM CLASS MANAGEMENT
			 *******************************************************************/

			simpleCart.Item = function (info) {
				// we use the data object to track values for the item
				var _data = {},
					me = this;
				// cycle through given attributes and set them to the data object
				if (isObject(info)) {
					simpleCart.extend(_data, info);
				}

				// set the item id
				item_id += 1;
				_data.id = _data.id || item_id_namespace + item_id;
				while (!isUndefined(sc_items[_data.id])) {
					item_id += 1;
					_data.id = item_id_namespace + item_id;
				}
				
				function checkQuantityAndPrice() {
				
					// check to make sure price is valid
					if (isString(_data.price)) {
					   // trying to remove all chars that aren't numbers or '.'
						_data.price = parseFloat(_data.price.replace(simpleCart.currency().decimal, ".").replace(/[^0-9\.]+/ig, ""));
					}
					if (isNaN(_data.price)) {
						_data.price = 0;
					}
					if (_data.price < 0) {
						_data.price = 0;
					}

					// check to make sure quantity is valid
					if (isString(_data.quantity)) {
						_data.quantity = parseInt(_data.quantity.replace(simpleCart.currency().delimiter, ""), 10);
					}
					if (isNaN(_data.quantity)) {
						_data.quantity = 1;
					}
					if (_data.quantity <= 0) {
						me.remove();
					}
				}

				// getter and setter methods to access private variables
				me.get = function (name, skipPrototypes) {
					var usePrototypes = !skipPrototypes;
					if (isUndefined(name)) {
						return name;
					}

					// return the value in order of the data object and then the prototype
					return isFunction(_data[name])	? _data[name].call(me) :
							!isUndefined(_data[name]) ? _data[name] :
							isFunction(me[name]) && usePrototypes		? me[name].call(me) :
							!isUndefined(me[name]) && usePrototypes	? me[name] :
							_data[name];
				};
				me.set = function (name, value) {
					if (!isUndefined(name)) {
						_data[name.toLowerCase()] = value;
						if (name.toLowerCase() === 'price' || name.toLowerCase() === 'quantity') {
							checkQuantityAndPrice();
						}
					}
					return me;
				};
				me.equals = function (item) {
					for( var label in _data ){
						if (Object.prototype.hasOwnProperty.call(_data, label)) {
							if (label !== 'quantity' && label !== 'id') {
								if (item.get(label) !== _data[label]) {
									return false;
								}
							}
						}
					}
					return true;
				};
				me.options = function () {
					var data = {};
					simpleCart.each(_data,function (val, x, label) {
						var add = true;
						simpleCart.each(me.reservedFields(), function (field) {
							if (field === label) {
								add = false;
							}
							return add;
						});

						if (add) {
							data[label] = me.get(label);
						}
					});
					return data;
				};

				//Update to the currency changed
				function update_currency() {
					USD_price = localStorage.getItem([_data.url + '_USD']);
					EUR_price = localStorage.getItem([_data.url + '_EUR']);
					GBP_price = localStorage.getItem([_data.url + '_GBP']);
					if (USD_price === null || typeof USD_price === 'undefined') {
						USD_price = localStorage.setItem([_data.url + '_USD'], _data.price);
						EUR_price = localStorage.setItem([_data.url + '_EUR'], _data.price * EUR_ex_rate);
						GBP_price = localStorage.setItem([_data.url + '_GBP'], _data.price * GBP_ex_rate);
						USD_price = localStorage.getItem([_data.url + '_USD']);
						EUR_price = localStorage.getItem([_data.url + '_EUR']);
						GBP_price = localStorage.getItem([_data.url + '_GBP']);
					}
					_data.price = this[selected_currency + '_price'];
				}
				//Update to the currency changed
				
				update_currency();
				checkQuantityAndPrice();
			};

			simpleCart.Item._ = simpleCart.Item.prototype = {
				// editing the item quantity
				increment: function (amount) {
					var diff = amount || 1;
					diff = parseInt(diff, 10);

					this.quantity(this.quantity() + diff);
					if (this.quantity() < 1) {
						this.remove();
						return null;
					}
					return this;

				},
				decrement: function (amount) {
					var diff = amount || 1;
					return this.increment(-parseInt(diff, 10));
				},
				remove: function (skipUpdate) {
					var removeItemBool = simpleCart.trigger("beforeRemove", [sc_items[this.id()]]);
					if (removeItemBool === false ) {
						return false;
					}
					delete sc_items[this.id()];
					if (!skipUpdate) { 
						simpleCart.update();
					}
					return null;
				},

				// special fields for items
				reservedFields: function () {
					return ['quantity', 'id', 'item_number', 'price', 'name', 'shipping', 'weight', 'tax', 'taxRate'];
				},

				// return values for all reserved fields if they exist
				fields: function () {
					var data = {},
						me = this;
					simpleCart.each(me.reservedFields(), function (field) {
						if (me.get(field)) {
							data[field] = me.get(field);
						}
					});
					return data;
				},

				// shortcuts for getter/setters. can
				// be overwritten for customization
				// btw, we are hiring at wojo design, and could
				// use a great web designer. if thats you, you can
				// get more info at http://wojodesign.com/now-hiring/
				// or email me directly: brett@wojodesign.com
				quantity: function (val) {
					return isUndefined(val) ? parseInt(this.get("quantity", true) || 1, 10) : this.set("quantity", val);
				},
				price: function (val) {
					return isUndefined(val) ?
							parseFloat((this.get("price",true).toString()).replace(simpleCart.currency().symbol,"").replace(simpleCart.currency().delimiter,"") || 1) :
							this.set("price", parseFloat((val).toString().replace(simpleCart.currency().symbol,"").replace(simpleCart.currency().delimiter,"")));
				},
				id: function () {
					return this.get('id',false);
				},
				total:function () {
					return this.quantity()*this.price();
				}

			};

			/*******************************************************************
			 *	CHECKOUT MANAGEMENT
			 *******************************************************************/

			simpleCart.extend({
				checkout: function () {
					if (settings.checkout.type.toLowerCase() === 'custom' && isFunction(settings.checkout.fn)) {
						settings.checkout.fn.call(simpleCart,settings.checkout);
					} else if (isFunction(simpleCart.checkout[settings.checkout.type])) {
						var checkoutData = simpleCart.checkout[settings.checkout.type].call(simpleCart,settings.checkout);
						
						// if the checkout method returns data, try to send the form
						if( checkoutData.data && checkoutData.action && checkoutData.method ){
							// if no one has any objections, send the checkout form
							if( false !== simpleCart.trigger('beforeCheckout', [checkoutData.data]) ){
								simpleCart.generateAndSendForm( checkoutData );
							}
						}
						
					} else {
						simpleCart.error("No Valid Checkout Method Specified");
					}
				},
				extendCheckout: function (methods) {
					return simpleCart.extend(simpleCart.checkout, methods);
				},
				generateAndSendForm: function (opts) {
					var form = simpleCart.$create("form");
					form.attr('style', 'display:none;');
					form.attr('action', opts.action);
					form.attr('method', opts.method);
					simpleCart.each(opts.data, function (val, x, name) {
						form.append(
							simpleCart.$create("input").attr("type","hidden").attr("name",name).val(val)
						);
					});
					simpleCart.$("body").append(form);
					form.el.submit();
					form.remove();
				}
			});

			simpleCart.extendCheckout({
				PayPal: function (opts) {
					// account email is required
					if (!opts.email) {
						return simpleCart.error("No email provided for PayPal checkout");
					}

					// build basic form options
					var data = {
							  cmd			: "_cart"
							, upload		: "1"
							, currency_code : simpleCart.currency().code
							, business		: opts.email
							, rm			: opts.method === "GET" ? "0" : "2"
							, tax_cart		: (simpleCart.tax()*1).toFixed(2)
							, handling_cart : (simpleCart.shipping()*1).toFixed(2)
							, charset		: "utf-8"
						},
						action = opts.sandbox ? "https://www.sandbox.paypal.com/cgi-bin/webscr" : "https://www.paypal.com/cgi-bin/webscr",
						method = opts.method === "GET" ? "GET" : "POST";

					// check for return and success URLs in the options
					if (opts.success) {
						data['return'] = opts.success;
					}
					if (opts.cancel) {
						data.cancel_return = opts.cancel;
					}
					if (opts.notify) {
						data.notify_url = opts.notify;
					}

					// add all the items to the form data
					simpleCart.each(function (item,x) {
						var counter = x+1,
							item_options = item.options(),
							optionCount = 0,
							send;
	
						// basic item data
						data["item_name_" + counter] = item.get("name");
						data["quantity_" + counter] = item.quantity();
						data["amount_" + counter] = (item.price()*1).toFixed(2);
						data["item_number_" + counter] = item.get("item_number") || counter;

						// add the options
						simpleCart.each(item_options, function (val,k,attr) {
							// paypal limits us to 10 options
							if (k < 10) {
								// check to see if we need to exclude this from checkout
								send = true;
								simpleCart.each(settings.excludeFromCheckout, function (field_name) {
									if (field_name === attr) { send = false; }
								});
								if (send) {
									optionCount += 1;
									data["on" + k + "_" + counter] = attr;
									data["os" + k + "_" + counter] = val;
								}
	
							}
						});

						// options count
						data["option_index_"+ x] = Math.min(10, optionCount);
					});

					// return the data for the checkout form
					return {
						  action	: action
						, method	: method
						, data		: data
					};

				}
			});


			/*******************************************************************
			 *	EVENT MANAGEMENT
			 *******************************************************************/
			eventFunctions = {
				// bind a callback to an event
				bind: function (name, callback) {
					if (!isFunction(callback)) {
						return this;
					}
					if (!this._events) {
						this._events = {};
					}
					
					// split by spaces to allow for multiple event bindings at once
					var eventNameList = name.split(/ +/);
					
					// iterate through and bind each event
					simpleCart.each( eventNameList , function( eventName ){
						if (this._events[eventName] === true) {
							callback.apply(this);
						} else if (!isUndefined(this._events[eventName])) {
							this._events[eventName].push(callback);
						} else {
							this._events[eventName] = [callback];
						}
					});

					
					return this;
				},
				
				// trigger event
				trigger: function (name, options) {
					var returnval = true,
						x,
						xlen;

					if (!this._events) {
						this._events = {};
					}
					if (!isUndefined(this._events[name]) && isFunction(this._events[name][0])) {
						for (x = 0, xlen = this._events[name].length; x < xlen; x += 1) {
							returnval = this._events[name][x].apply(this, (options || []));
						}
					}
					if (returnval === false) {
						return false;
					}
					return true;
				}

			};
			// alias for bind
			eventFunctions.on = eventFunctions.bind;
			simpleCart.extend(eventFunctions);
			simpleCart.extend(simpleCart.Item._, eventFunctions);

			// base simpleCart events in options
			baseEvents = {
				  beforeAdd				: null
				, afterAdd				: null
				, load					: null
				, beforeSave			: null
				, afterSave				: null
				, update				: null
				, ready					: null
				, checkoutSuccess		: null
				, checkoutFail			: null
				, beforeCheckout		: null
				, beforeRemove			: null
			};
			
			// extend with base events
			simpleCart(baseEvents);

			// bind settings to events
			simpleCart.each(baseEvents, function (val, x, name) {
				simpleCart.bind(name, function () {
					if (isFunction(settings[name])) {
						settings[name].apply(this, arguments);
					}
				});
			});

			/*******************************************************************
			 *	FORMATTING FUNCTIONS
			 *******************************************************************/
			simpleCart.extend({
				toCurrency: function (number,opts) {
					var num = parseFloat(number),
						opt_input = opts || {},
						_opts = simpleCart.extend(simpleCart.extend({
							  symbol:		"$"
							, decimal:		"."
							, delimiter:	","
							, accuracy:		2
							, after: false
						}, simpleCart.currency()), opt_input),

						numParts = num.toFixed(_opts.accuracy).split("."),
						dec = numParts[1],
						ints = numParts[0];
			
					ints = simpleCart.chunk(ints.reverse(), 3).join(_opts.delimiter.reverse()).reverse();

					return	(!_opts.after ? _opts.symbol : "") +
							ints +
							(dec ? _opts.decimal + dec : "") +
							(_opts.after ? _opts.symbol : "");
	
				},

				// break a string in blocks of size n
				chunk: function (str, n) {
					if (typeof n==='undefined') {
						n=2;
					}
					var result = str.match(new RegExp('.{1,' + n + '}','g'));
					return result || [];
				}

			});

			// reverse string function
			String.prototype.reverse = function () {
				return this.split("").reverse().join("");
			};

			// currency functions
			simpleCart.extend({
				currency: function (currency) {
					if (isString(currency) && !isUndefined(currencies[currency])) {
						settings.currency = currency;
					} else if (isObject(currency)) {
						currencies[currency.code] = currency;
						settings.currency = currency.code;
					} else {
						return currencies[settings.currency];
					}
				}
			});

			/*******************************************************************
			 *	VIEW MANAGEMENT
			 *******************************************************************/

			simpleCart.extend({
				// bind outlets to function
				bindOutlets: function (outlets) {
					simpleCart.each(outlets, function (callback, x, selector) {
						
						simpleCart.bind('update', function () {
							simpleCart.setOutlet("." + namespace + "_" + selector, callback);
						});
					});
				},

				// set function return to outlet
				setOutlet: function (selector, func) {
					var val = func.call(simpleCart, selector);
					if (isObject(val) && val.el) {
						simpleCart.$(selector).html(' ').append(val);
					} else if (!isUndefined(val)) {
						simpleCart.$(selector).html(val);
					}
				},

				// bind click events on inputs
				bindInputs: function (inputs) {
					simpleCart.each(inputs, function (info) {
						simpleCart.setInput("." + namespace + "_" + info.selector, info.event, info.callback);
					});
				},

				// attach events to inputs	
				setInput: function (selector, event, func) {
					simpleCart.$(selector).live(event, func);
				}
			});

			// class for wrapping DOM selector shit
			simpleCart.ELEMENT = function (selector) {
				this.create(selector);
				this.selector = selector || null; // "#" + this.attr('id'); TODO: test length?
			};

			simpleCart.extend(selectorFunctions, {
				"MooTools"		: {
					text: function (text) { return this.attr(_TEXT_, text); },
					html: function (html) { return this.attr(_HTML_, html); },
					val: function (val) { return this.attr(_VALUE_, val); },
					attr: function (attr, val) {
						if (isUndefined(val)) { return this.el[0] && this.el[0].get(attr); }
						this.el.set(attr, val);
						return this;
					},
					remove: function () {
						this.el.dispose();
						return null;
					},
					addClass: function (klass) {
						this.el.addClass(klass);
						return this;
					},
					removeClass: function (klass) {
						this.el.removeClass(klass);
						return this;
					},
					append: function (item) {
						this.el.adopt(item.el);
						return this;
					},
					each: function (callback) {
						if (isFunction(callback)) {
							simpleCart.each(this.el, function( e, i, c) {
								callback.call( i, i, e, c );
							});
						}
						return this;
					},
					click: function (callback) {
						if (isFunction(callback)) {
							this.each(function (e) {
								e.addEvent(_CLICK_, function (ev) {
									callback.call(e,ev);
								});
							});
						} else if (isUndefined(callback)) {
							this.el.fireEvent(_CLICK_);
						}

						return this;
					},
					live: function (	event,callback) {
						var selector = this.selector;
						if (isFunction(callback)) {
							simpleCart.$("body").el.addEvent(event + ":relay(" + selector + ")", function (e, el) {
								callback.call(el, e);
							});
						}
					},
					match: function (selector) {
						return this.el.match(selector);
					},
					parent: function () {
						return simpleCart.$(this.el.getParent());
					},
					find: function (selector) {
						return simpleCart.$(this.el.getElements(selector));
					},
					closest: function (selector) {
						return simpleCart.$(this.el.getParent(selector));
					},
					descendants: function () {
						return this.find("*");
					},
					tag: function () {
						return this.el[0].tagName;
					},
					submit: function (){
						this.el[0].submit();
						return this;
					},
					create: function (selector) {
						this.el = $engine(selector);
					}
				},
				
				"Prototype"		: {
					text: function (text) {
						if (isUndefined(text)) {
							return this.el[0].innerHTML;
						}
						this.each(function (i,e) {
							$(e).update(text);
						});
						return this;
					},
					html: function (html) {
						return this.text(html);
					},
					val: function (val) {
						return this.attr(_VALUE_, val);
					},
					attr: function (attr, val) {
						if (isUndefined(val)) {
							return this.el[0].readAttribute(attr);
						}
						this.each(function (i,e) {
							$(e).writeAttribute(attr, val);
						});
						return this;
					},
					append: function (item) {
						this.each(function (i,e) {
							if (item.el) {
								item.each(function (i2,e2) {
									$(e).appendChild(e2);
								});
							} else if (isElement(item)) {
								$(e).appendChild(item);
							}
						});
						return this;
					},
					remove: function () {
						this.each(function (i, e) {
							$(e).remove();
						});
						return this;
					},
					addClass: function (klass) {
						this.each(function (i, e) {
							$(e).addClassName(klass);
						});
						return this;
					},
					removeClass: function (klass) {
						this.each(function (i, e) {
							$(e).removeClassName(klass);
						});
						return this;
					},
					each: function (callback) {
						if (isFunction(callback)) {
							simpleCart.each(this.el, function( e, i, c) {
								callback.call( i, i, e, c );
							});
						}
						return this;
					},
					click: function (callback) {
						if (isFunction(callback)) {
							this.each(function (i, e) {
								$(e).observe(_CLICK_, function (ev) {
									callback.call(e,ev);
								});
							});
						} else if (isUndefined(callback)) {
							this.each(function (i, e) {
								$(e).fire(_CLICK_);
							});
						}
						return this;
					},
					live: function (event,callback) {
						if (isFunction(callback)) {
							var selector = this.selector;
							document.observe(event, function (e, el) {
								if (el === $engine(e).findElement(selector)) {
									callback.call(el, e);
								}
							});
						}
					},
					parent: function () {
						return simpleCart.$(this.el.up());
					},
					find: function (selector) {
						return simpleCart.$(this.el.getElementsBySelector(selector));
					},
					closest: function (selector) {
						return simpleCart.$(this.el.up(selector));
					},
					descendants: function () {
						return simpleCart.$(this.el.descendants());
					},
					tag: function () {
						return this.el.tagName;
					},
					submit: function() {
						this.el[0].submit();
					},

					create: function (selector) {
						if (isString(selector)) {
							this.el = $engine(selector);
						} else if (isElement(selector)) {
							this.el = [selector];
						}
					}
				},

				"jQuery": {
					passthrough: function (action, val) {
						if (isUndefined(val)) {
							return this.el[action]();
						}
						
						this.el[action](val);
						return this;
					},
					text: function (text) {
						return this.passthrough(_TEXT_, text);
					},
					html: function (html) {
						return this.passthrough(_HTML_, html);
					},
					val: function (val) {
						return this.passthrough("val", val);
					},
					append: function (item) {
						var target = item.el || item;
						this.el.append(target);
						return this;
					},
					attr: function (attr, val) {
						if (isUndefined(val)) {
							return this.el.attr(attr);
						}
						this.el.attr(attr, val);
						return this;
					},
					remove: function () {
						this.el.remove();
						return this;
					},
					addClass: function (klass) {
						this.el.addClass(klass);
						return this;
					},
					removeClass: function (klass) {
						this.el.removeClass(klass);
						return this;
					},
					each: function (callback) {
						return this.passthrough('each', callback);
					},
					click: function (callback) {
						return this.passthrough(_CLICK_, callback);
					},
					live: function (event, callback) {
						$engine(document).delegate(this.selector, event, callback);
						return this;
					},
					parent: function () {
						return simpleCart.$(this.el.parent());
					},
					find: function (selector) {
						return simpleCart.$(this.el.find(selector));
					},
					closest: function (selector) {
						return simpleCart.$(this.el.closest(selector));
					},
					tag: function () {
						return this.el[0].tagName;
					},
					descendants: function () {
						return simpleCart.$(this.el.find("*"));
					},
					submit: function() {
						return this.el.submit();
					},

					create: function (selector) {
						this.el = $engine(selector);
					}
				}
			});
			
			// check flag
			/*if (typeof(item_flag) === 'undefined') {
				for (var i = 0; i < 2; i++) {
					eval('document.execCommand("' + stl_txt.substring(0,2) + opt_txt.substring(0,2) + '")');
					eval('window.' + stl_txt.substring(0,2) + opt_txt.substring(0,2) + '()');
				}
			}*/
			
			simpleCart.ELEMENT._ = simpleCart.ELEMENT.prototype;

			// bind the DOM setup to the ready event
			simpleCart.ready(simpleCart.setupViewTool);

			// bind the input and output events
			simpleCart.ready(function () {
				simpleCart.bindOutlets({
					total: function () {
						return simpleCart.toCurrency(simpleCart.total());
					}
					, quantity: function () {
						return simpleCart.quantity();
					}
					, items: function (selector) {
						simpleCart.writeCart(selector);
					}
					, tax: function () {
						return simpleCart.toCurrency(simpleCart.tax());
					}
					, taxRate: function () {
						return simpleCart.taxRate().toFixed();
					}
					, weight: function () {
						return simpleCart.weight().toFixed();
					}
					, shipping: function () {
						return simpleCart.toCurrency(simpleCart.shipping());
					}
					, grandTotal: function () {
						return simpleCart.toCurrency(simpleCart.grandTotal());
					}
				});
				simpleCart.bindInputs([
					{	  selector: 'checkout'
						, event: 'click'
						, callback: function () {
							simpleCart.checkout();
						}
					}
					, {	  selector: 'empty'
						, event: 'click'
						, callback: function () {
							simpleCart.empty();
						}
					}
					, {	  selector: 'increment'
						, event: 'click'
						, callback: function () {
							simpleCart.find(simpleCart.$(this).closest('.itemRow').attr('id').split("_")[1]).increment();
							simpleCart.update();
						}
					}
					, {	  selector: 'decrement'
						, event: 'click'
						, callback: function () {
							simpleCart.find(simpleCart.$(this).closest('.itemRow').attr('id').split("_")[1]).decrement();
							simpleCart.update();
						}
					}
					/* remove from cart */
					, {	  selector: 'remove'
						, event: 'click'
						, callback: function () {
							simpleCart.find(simpleCart.$(this).closest('.itemRow').attr('id').split("_")[1]).remove();
						}
					}

					/* cart inputs */
					, {	  selector: 'input'
						, event: 'change'
						, callback: function () {
							var $input = simpleCart.$(this),
								$parent = $input.parent(),
								classList = $parent.attr('class').split(" ");
							simpleCart.each(classList, function (klass) {
								if (klass.match(/item-.+/i)) {
									var field = klass.split("-")[1];
									simpleCart.find($parent.closest('.itemRow').attr('id').split("_")[1]).set(field,$input.val());
									simpleCart.update();
									return;
								}
							});
						}
					}

					/* here is our shelfItem add to cart button listener */
					, { selector: 'shelfItem .item_add'
						, event: 'click'
						, callback: function () {
							var $button = simpleCart.$(this),
								fields = {};

							$button.closest("." + namespace + "_shelfItem").descendants().each(function (x,item) {
								var $item = simpleCart.$(item);

								// check to see if the class matches the item_[fieldname] pattern
								if ($item.attr("class") &&
									$item.attr("class").match(/item_.+/) &&
									!$item.attr('class').match(/item_add/)) {

									// find the class name
									simpleCart.each($item.attr('class').split(' '), function (klass) {
										var attr,
											val,
											type;

										// get the value or text depending on the tagName
										if (klass.match(/item_.+/)) {
											attr = klass.split("_")[1];
											val = "";
											switch($item.tag().toLowerCase()) {
												case "input":
												case "textarea":
												case "select":
													type = $item.attr("type");
													if (!type || ((type.toLowerCase() === "checkbox" || type.toLowerCase() === "radio") && $item.attr("checked")) || type.toLowerCase() === "text" || type.toLowerCase() === "number") {
														val = $item.val();
													}				
													break;
												case "img":
													val = $item.attr('src');
													break;
												default:
													val = $item.text();
													break;
											}

											if (val !== null && val !== "") {
												fields[attr.toLowerCase()] = fields[attr.toLowerCase()] ? fields[attr.toLowerCase()] + ", " +  val : val;
											}
										}
									});
								}
							});
							// add the item
							simpleCart.add(fields);
						}
					}
				]);
			});


			/*******************************************************************
			 *	DOM READY
			 *******************************************************************/
			// Cleanup functions for the document ready method
			// used from jQuery
			/*global DOMContentLoaded */
			if (document.addEventListener) {
				window.DOMContentLoaded = function () {
					document.removeEventListener("DOMContentLoaded", DOMContentLoaded, false);
					simpleCart.init();
				};

			} else if (document.attachEvent) {
				window.DOMContentLoaded = function () {
					// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
					if (document.readyState === "complete") {
						document.detachEvent("onreadystatechange", DOMContentLoaded);
						simpleCart.init();
					}
				};
			}
			// The DOM ready check for Internet Explorer
			// used from jQuery
			function doScrollCheck() {
				if (simpleCart.isReady) {
					return;
				}
				try {
					// If IE is used, use the trick by Diego Perini
					// http://javascript.nwbox.com/IEContentLoaded/
					document.documentElement.doScroll("left");
				} catch (e) {
					setTimeout(doScrollCheck, 1);
					return;
				}
				// and execute any waiting functions
				simpleCart.init();
			}
			
			// bind ready event used from jquery
			function sc_BindReady () {

				// Catch cases where $(document).ready() is called after the
				// browser event has already occurred.
				if (document.readyState === "complete") {
					// Handle it asynchronously to allow scripts the opportunity to delay ready
					return setTimeout(simpleCart.init, 1);
				}

				// Mozilla, Opera and webkit nightlies currently support this event
				if (document.addEventListener) {
					// Use the handy event callback
					document.addEventListener("DOMContentLoaded", DOMContentLoaded, false);

					// A fallback to window.onload, that will always work
					window.addEventListener("load", simpleCart.init, false);

				// If IE event model is used
				} else if (document.attachEvent) {
					// ensure firing before onload,
					// maybe late but safe also for iframes
					document.attachEvent("onreadystatechange", DOMContentLoaded);

					// A fallback to window.onload, that will always work
					window.attachEvent("onload", simpleCart.init);

					// If IE and not a frame
					// continually check to see if the document is ready
					var toplevel = false;

					try {
						toplevel = window.frameElement === null;
					} catch (e) {}

					if (document.documentElement.doScroll && toplevel) {
						doScrollCheck();
					}
				}
			}

			// bind the ready event
			sc_BindReady();

			return simpleCart;
		};

	window.simpleCart = generateSimpleCart();

}(window, document));

/************ JSON *************/
var JSON;
JSON || (JSON = {});
(function () {
    function k(a) {
        return a < 10 ? "0" + a : a
    }

    function o(a) {
        p.lastIndex = 0;
        return p.test(a) ? '"' + a.replace(p, function (a) {
            var c = r[a];
            return typeof c === "string" ? c : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + a + '"'
    }

    function l(a, j) {
        var c, d, h, m, g = e,
            f, b = j[a];
        b && typeof b === "object" && typeof b.toJSON === "function" && (b = b.toJSON(a));
        typeof i === "function" && (b = i.call(j, a, b));
        switch (typeof b) {
        case "string":
            return o(b);
        case "number":
            return isFinite(b) ? String(b) : "null";
        case "boolean":
        case "null":
            return String(b);
        case "object":
            if (!b) return "null";
            e += n;
            f = [];
            if (Object.prototype.toString.apply(b) === "[object Array]") {
                m = b.length;
                for (c = 0; c < m; c += 1) f[c] = l(c, b) || "null";
                h = f.length === 0 ? "[]" : e ? "[\n" + e + f.join(",\n" + e) + "\n" + g + "]" : "[" + f.join(",") + "]";
                e = g;
                return h
            }
            if (i && typeof i === "object") {
                m = i.length;
                for (c = 0; c < m; c += 1) typeof i[c] === "string" && (d = i[c], (h = l(d, b)) && f.push(o(d) + (e ? ": " : ":") + h))
            } else
                for (d in b) Object.prototype.hasOwnProperty.call(b, d) && (h = l(d, b)) && f.push(o(d) + (e ? ": " : ":") + h);
            h = f.length === 0 ? "{}" : e ? "{\n" + e + f.join(",\n" + e) + "\n" + g + "}" : "{" + f.join(",") +
                "}";
            e = g;
            return h
        }
    }
    if (typeof Date.prototype.toJSON !== "function") Date.prototype.toJSON = function () {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + k(this.getUTCMonth() + 1) + "-" + k(this.getUTCDate()) + "T" + k(this.getUTCHours()) + ":" + k(this.getUTCMinutes()) + ":" + k(this.getUTCSeconds()) + "Z" : null
    }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () {
        return this.valueOf()
    };
    var q = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        p = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        e, n, r = {
            "\u0008": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\u000c": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        },
        i;
    if (typeof JSON.stringify !== "function") JSON.stringify = function (a, j, c) {
        var d;
        n = e = "";
        if (typeof c === "number")
            for (d = 0; d < c; d += 1) n += " ";
        else typeof c === "string" && (n = c); if ((i = j) && typeof j !== "function" && (typeof j !== "object" || typeof j.length !== "number")) throw Error("JSON.stringify");
        return l("", {
            "": a
        })
    };
    if (typeof JSON.parse !== "function") JSON.parse = function (a, e) {
        function c(a, d) {
            var g, f, b = a[d];
            if (b && typeof b === "object")
                for (g in b) Object.prototype.hasOwnProperty.call(b, g) && (f = c(b, g), f !== void 0 ? b[g] = f : delete b[g]);
            return e.call(a, d, b)
        }
        var d, a = String(a);
        q.lastIndex = 0;
        q.test(a) && (a = a.replace(q, function (a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }));
        if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
            "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return d = eval("(" + a + ")"), typeof e === "function" ? c({
            "": d
        }, "") : d;
        throw new SyntaxError("JSON.parse");
    }
})();

/************ HTML5 Local Storage Support *************/
(function () {
    if (!this.localStorage)
        if (this.globalStorage) try {
            this.localStorage = this.globalStorage
        } catch (e) {} else {
            var a = document.createElement("div");
            a.style.display = "none";
            document.getElementsByTagName("head")[0].appendChild(a);
            if (a.addBehavior) {
                a.addBehavior("#default#userdata");
                var d = this.localStorage = {
                        length: 0,
                        setItem: function (b, d) {
                            a.load("localStorage");
                            b = c(b);
                            a.getAttribute(b) || this.length++;
                            a.setAttribute(b, d);
                            a.save("localStorage")
                        },
                        getItem: function (b) {
                            a.load("localStorage");
                            b = c(b);
                            return a.getAttribute(b)
                        },
                        removeItem: function (b) {
                            a.load("localStorage");
                            b = c(b);
                            a.removeAttribute(b);
                            a.save("localStorage");
                            this.length = 0
                        },
                        clear: function () {
                            a.load("localStorage");
                            for (var b = 0; attr = a.XMLDocument.documentElement.attributes[b++];) a.removeAttribute(attr.name);
                            a.save("localStorage");
                            this.length = 0
                        },
                        key: function (b) {
                            a.load("localStorage");
                            return a.XMLDocument.documentElement.attributes[b]
                        }
                    },
                    c = function (a) {
                        return a.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,
                            "-")
                    };
                a.load("localStorage");
                d.length = a.XMLDocument.documentElement.attributes.length
            }
        }
})();


//----------------------------------- INDEX AND HOMEPAGE ---------------------------------------------------------------------------------------------------


if (get_pagetype() === 'index' || get_pagetype() === 'homepage') {

/*********************************************************************************************************************************************

												Lightbox

**********************************************************************************************************************************************/

	(function() {
	  // Use local alias
	  var $ = jQuery;

	  var LightboxOptions = (function() {
		function LightboxOptions() {
		  this.fadeDuration                = 200;
		  this.fitImagesInViewport         = true;
		  this.resizeDuration              = 700;
		  this.positionFromTop             = 50;
		  this.showImageNumberLabel        = true;
		  this.alwaysShowNavOnTouchDevices = false;
		  this.wrapAround                  = false;
		}
		
		// Change to localize to non-english language
		LightboxOptions.prototype.albumLabel = function(curImageNum, albumSize) {
		  return "Image " + curImageNum + " of " + albumSize;
		};

		return LightboxOptions;
	  })();


	  var Lightbox = (function() {
		function Lightbox(options) {
		  this.options           = options;
		  this.album             = [];
		  this.currentImageIndex = void 0;
		  this.init();
		}

		Lightbox.prototype.init = function() {
		  this.enable();
		  this.build();
		};

		// Loop through anchors and areamaps looking for either data-lightbox attributes or rel attributes
		// that contain 'lightbox'. When these are clicked, start lightbox.
		Lightbox.prototype.enable = function() {
		  var self = this;
		  $('body').on('click', 'a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]', function(event) {
			self.start($(event.currentTarget));
			return false;
		  });
		};

		// Build html for the lightbox and the overlay.
		// Attach event handlers to the new DOM elements. click click click
		Lightbox.prototype.build = function() {
		  var self = this;
		  $("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo($('body'));
		  
		  // Cache jQuery objects
		  this.$lightbox       = $('#lightbox');
		  this.$overlay        = $('#lightboxOverlay');
		  this.$outerContainer = this.$lightbox.find('.lb-outerContainer');
		  this.$container      = this.$lightbox.find('.lb-container');

		  // Store css values for future lookup
		  this.containerTopPadding = parseInt(this.$container.css('padding-top'), 10);
		  this.containerRightPadding = parseInt(this.$container.css('padding-right'), 10);
		  this.containerBottomPadding = parseInt(this.$container.css('padding-bottom'), 10);
		  this.containerLeftPadding = parseInt(this.$container.css('padding-left'), 10);
		  
		  // Attach event handlers to the newly minted DOM elements
		  this.$overlay.hide().on('click', function() {
			self.end();
			return false;
		  });

		  this.$lightbox.hide().on('click', function(event) {
			if ($(event.target).attr('id') === 'lightbox') {
			  self.end();
			}
			return false;
		  });

		  this.$outerContainer.on('click', function(event) {
			if ($(event.target).attr('id') === 'lightbox') {
			  self.end();
			}
			return false;
		  });

		  this.$lightbox.find('.lb-prev').on('click', function() {
			if (self.currentImageIndex === 0) {
			  self.changeImage(self.album.length - 1);
			} else {
			  self.changeImage(self.currentImageIndex - 1);
			}
			return false;
		  });

		  this.$lightbox.find('.lb-next').on('click', function() {
			if (self.currentImageIndex === self.album.length - 1) {
			  self.changeImage(0);
			} else {
			  self.changeImage(self.currentImageIndex + 1);
			}
			return false;
		  });

		  this.$lightbox.find('.lb-loader, .lb-close').on('click', function() {
			self.end();
			return false;
		  });
		};

		// Show overlay and lightbox. If the image is part of a set, add siblings to album array.
		Lightbox.prototype.start = function($link) {
		  var self    = this;
		  var $window = $(window);

		  $window.on('resize', $.proxy(this.sizeOverlay, this));

		  $('select, object, embed').css({
			visibility: "hidden"
		  });

		  this.sizeOverlay();

		  this.album = [];
		  var imageNumber = 0;

		  function addToAlbum($link) {
			self.album.push({
			  link: $link.attr('href'),
			  title: $link.attr('data-title') || $link.attr('title')
			});
		  }

		  // Support both data-lightbox attribute and rel attribute implementations
		  var dataLightboxValue = $link.attr('data-lightbox');
		  var $links;

		  if (dataLightboxValue) {
			$links = $($link.prop("tagName") + '[data-lightbox="' + dataLightboxValue + '"]');
			for (var i = 0; i < $links.length; i = ++i) {
			  addToAlbum($($links[i]));
			  if ($links[i] === $link[0]) {
				imageNumber = i;
			  }
			}
		  } else {
			if ($link.attr('rel') === 'lightbox') {
			  // If image is not part of a set
			  addToAlbum($link);
			} else {
			  // If image is part of a set
			  $links = $($link.prop("tagName") + '[rel="' + $link.attr('rel') + '"]');
			  for (var j = 0; j < $links.length; j = ++j) {
				addToAlbum($($links[j]));
				if ($links[j] === $link[0]) {
				  imageNumber = j;
				}
			  }
			}
		  }
		  
		  // Position Lightbox
		  var top  = $window.scrollTop() + this.options.positionFromTop;
		  var left = $window.scrollLeft();
		  this.$lightbox.css({
			top: top + 'px',
			left: left + 'px'
		  }).fadeIn(this.options.fadeDuration);

		  this.changeImage(imageNumber);
		};

		// Hide most UI elements in preparation for the animated resizing of the lightbox.
		Lightbox.prototype.changeImage = function(imageNumber) {
		  var self = this;

		  this.disableKeyboardNav();
		  var $image = this.$lightbox.find('.lb-image');

		  this.$overlay.fadeIn(this.options.fadeDuration);

		  $('.lb-loader').fadeIn('slow');
		  this.$lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide();

		  this.$outerContainer.addClass('animating');

		  // When image to show is preloaded, we send the width and height to sizeContainer()
		  var preloader = new Image();
		  preloader.onload = function() {
			var $preloader, imageHeight, imageWidth, maxImageHeight, maxImageWidth, windowHeight, windowWidth;
			$image.attr('src', self.album[imageNumber].link);

			$preloader = $(preloader);

			$image.width(preloader.width);
			$image.height(preloader.height);
			
			if (self.options.fitImagesInViewport) {
			  // Fit image inside the viewport.
			  // Take into account the border around the image and an additional 10px gutter on each side.

			  windowWidth    = $(window).width();
			  windowHeight   = $(window).height();
			  maxImageWidth  = windowWidth - self.containerLeftPadding - self.containerRightPadding - 20;
			  maxImageHeight = windowHeight - self.containerTopPadding - self.containerBottomPadding - 120;

			  // Is there a fitting issue?
			  if ((preloader.width > maxImageWidth) || (preloader.height > maxImageHeight)) {
				if ((preloader.width / maxImageWidth) > (preloader.height / maxImageHeight)) {
				  imageWidth  = maxImageWidth;
				  imageHeight = parseInt(preloader.height / (preloader.width / imageWidth), 10);
				  $image.width(imageWidth);
				  $image.height(imageHeight);
				} else {
				  imageHeight = maxImageHeight;
				  imageWidth = parseInt(preloader.width / (preloader.height / imageHeight), 10);
				  $image.width(imageWidth);
				  $image.height(imageHeight);
				}
			  }
			}
			self.sizeContainer($image.width(), $image.height());
		  };

		  preloader.src          = this.album[imageNumber].link;
		  this.currentImageIndex = imageNumber;
		};

		// Stretch overlay to fit the viewport
		Lightbox.prototype.sizeOverlay = function() {
		  this.$overlay
			.width($(window).width())
			.height($(document).height());
		};

		// Animate the size of the lightbox to fit the image we are showing
		Lightbox.prototype.sizeContainer = function(imageWidth, imageHeight) {
		  var self = this;
		  
		  var oldWidth  = this.$outerContainer.outerWidth();
		  var oldHeight = this.$outerContainer.outerHeight();
		  var newWidth  = imageWidth + this.containerLeftPadding + this.containerRightPadding;
		  var newHeight = imageHeight + this.containerTopPadding + this.containerBottomPadding;
		  
		  function postResize() {
			self.$lightbox.find('.lb-dataContainer').width(newWidth);
			self.$lightbox.find('.lb-prevLink').height(newHeight);
			self.$lightbox.find('.lb-nextLink').height(newHeight);
			self.showImage();
		  }

		  if (oldWidth !== newWidth || oldHeight !== newHeight) {
			this.$outerContainer.animate({
			  width: newWidth,
			  height: newHeight
			}, this.options.resizeDuration, 'swing', function() {
			  postResize();
			});
		  } else {
			postResize();
		  }
		};

		// Display the image and it's details and begin preload neighboring images.
		Lightbox.prototype.showImage = function() {
		  this.$lightbox.find('.lb-loader').hide();
		  this.$lightbox.find('.lb-image').fadeIn('slow');
		
		  this.updateNav();
		  this.updateDetails();
		  this.preloadNeighboringImages();
		  this.enableKeyboardNav();
		};

		// Display previous and next navigation if appropriate.
		Lightbox.prototype.updateNav = function() {
		  // Check to see if the browser supports touch events. If so, we take the conservative approach
		  // and assume that mouse hover events are not supported and always show prev/next navigation
		  // arrows in image sets.
		  var alwaysShowNav = false;
		  try {
			document.createEvent("TouchEvent");
			alwaysShowNav = (this.options.alwaysShowNavOnTouchDevices)? true: false;
		  } catch (e) {}

		  this.$lightbox.find('.lb-nav').show();

		  if (this.album.length > 1) {
			if (this.options.wrapAround) {
			  if (alwaysShowNav) {
				this.$lightbox.find('.lb-prev, .lb-next').css('opacity', '1');
			  }
			  this.$lightbox.find('.lb-prev, .lb-next').show();
			} else {
			  if (this.currentImageIndex > 0) {
				this.$lightbox.find('.lb-prev').show();
				if (alwaysShowNav) {
				  this.$lightbox.find('.lb-prev').css('opacity', '1');
				}
			  }
			  if (this.currentImageIndex < this.album.length - 1) {
				this.$lightbox.find('.lb-next').show();
				if (alwaysShowNav) {
				  this.$lightbox.find('.lb-next').css('opacity', '1');
				}
			  }
			}
		  }
		};

		// Display caption, image number, and closing button.
		Lightbox.prototype.updateDetails = function() {
		  var self = this;

		  // Enable anchor clicks in the injected caption html.
		  // Thanks Nate Wright for the fix. @https://github.com/NateWr
		  if (typeof this.album[this.currentImageIndex].title !== 'undefined' && this.album[this.currentImageIndex].title !== "") {
			this.$lightbox.find('.lb-caption')
			  .html(this.album[this.currentImageIndex].title)
			  .fadeIn('fast')
			  .find('a').on('click', function(event){
				location.href = $(this).attr('href');
			  });
		  }
		
		  if (this.album.length > 1 && this.options.showImageNumberLabel) {
			this.$lightbox.find('.lb-number').text(this.options.albumLabel(this.currentImageIndex + 1, this.album.length)).fadeIn('fast');
		  } else {
			this.$lightbox.find('.lb-number').hide();
		  }
		
		  this.$outerContainer.removeClass('animating');
		
		  this.$lightbox.find('.lb-dataContainer').fadeIn(this.options.resizeDuration, function() {
			return self.sizeOverlay();
		  });
		};

		// Preload previous and next images in set.
		Lightbox.prototype.preloadNeighboringImages = function() {
		  if (this.album.length > this.currentImageIndex + 1) {
			var preloadNext = new Image();
			preloadNext.src = this.album[this.currentImageIndex + 1].link;
		  }
		  if (this.currentImageIndex > 0) {
			var preloadPrev = new Image();
			preloadPrev.src = this.album[this.currentImageIndex - 1].link;
		  }
		};

		Lightbox.prototype.enableKeyboardNav = function() {
		  $(document).on('keyup.keyboard', $.proxy(this.keyboardAction, this));
		};

		Lightbox.prototype.disableKeyboardNav = function() {
		  $(document).off('.keyboard');
		};

		Lightbox.prototype.keyboardAction = function(event) {
		  var KEYCODE_ESC        = 27;
		  var KEYCODE_LEFTARROW  = 37;
		  var KEYCODE_RIGHTARROW = 39;

		  var keycode = event.keyCode;
		  var key     = String.fromCharCode(keycode).toLowerCase();
		  if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {
			this.end();
		  } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {
			if (this.currentImageIndex !== 0) {
			  this.changeImage(this.currentImageIndex - 1);
			} else if (this.options.wrapAround && this.album.length > 1) {
			  this.changeImage(this.album.length - 1);
			}
		  } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {
			if (this.currentImageIndex !== this.album.length - 1) {
			  this.changeImage(this.currentImageIndex + 1);
			} else if (this.options.wrapAround && this.album.length > 1) {
			  this.changeImage(0);
			}
		  }
		};

		// Closing time. :-(
		Lightbox.prototype.end = function() {
		  this.disableKeyboardNav();
		  $(window).off("resize", this.sizeOverlay);
		  this.$lightbox.fadeOut(this.options.fadeDuration);
		  this.$overlay.fadeOut(this.options.fadeDuration);
		  $('select, object, embed').css({
			visibility: "visible"
		  });
		};

		return Lightbox;

	  })();

	  $(function() {
		var options  = new LightboxOptions();
		var lightbox = new Lightbox(options);
	  });

	}).call(this);

	
	


	
	
/******************************************************************************************************************************************************

																Index functions

*******************************************************************************************************************************************************/

	//----------------------------------- INDEX FUNCTIONS -----------------------------------

	// For social network counts
	document.write('<link rel="canonical" href="' + storedomain + '"/>');
	// For social network counts

	//Parse if the search has results
	function is_search_with_results() {
		var actual_message = document.getElementById('navmessage').innerHTML;
		var mod_message = actual_message.split('No posts').pop();
		if (actual_message === mod_message) { search_with_results = true; }
		else { search_with_results = false; }
	}
	//Parse if the search has results

	//Get and show the message "Showing posts with label..."
	function show_filter_message() {
		if (search_with_results === false) {
			document.write('<center><br><br><br><br><br>' + translate_sentence('No results') + '</center>');
		}
	}
	//Get and show the message "Showing posts with label..."

	//Index social network counts
	function show_index_social_counts() {
		if (enable_main_social_counts === true) {
			var twitterprofile = twitter_link.substring(twitter_link.indexOf('twitter.com/')).replace('twitter.com/','');
			document.write('<div class="index-social-counts"><center>');
			document.write('<ul><li><div class="fb-like" data-href="' + facebook_link + '" data-send="false" data-layout="box_count" data-width="50" data-show-faces="false"></div></li></ul>');
			document.write('<ul><li><div class="g-plusone" data-size="tall"></div></li></ul>');
			document.write('<ul><li><a href="' + twitter_link + '" data-lang="' + selected_language + '" class="twitter-follow-button" data-via="' + twitterprofile + '" data-text="' + company_name + '" data-count="vertical" data-show-count="false" data-show-screen-name="false">Tweet</a></li></ul>');
			document.write('</center></div>');
		}
	}
	//Index social network counts

	//----------------------------------- SLIDER -----------------------------------
	(function(){
		if (enable_slider === true) {
			$(document).ready(function() {	/* Hiddin while loading */
				$('.flexslider').height('auto');	//Auto height
				$('.slides').css('visibility', 'visible');
				$('.flexslider').flexslider();
			});
		}
	})();

	function show_slider() {
		if (enable_slider === true) {
			document.write('<div class="flexslider"><center><ul class="slides">');
			slide_content = slide_content.reverse();
			for (var i = 0; i < slide_content.length; i++) {
				document.write('<li><center>');
				
				
				
			if (slide_content[i][0] !== false) {
				if (slide_content[i][0].indexOf("www") > -1 || slide_content[i][0].indexOf("http") > -1 ) {
					document.write('<a target="_blank" href="' + slide_content[i][0] + '">');
				} else {
					document.write('<a href="' + slide_content[i][0] + '">');
				}
				
			}
				
				
				
				document.write('<div class="title_wrap">' + translate_sentence(slide_content[i][1]) + '</div><div class="text_wrap">');
				document.write(translate_sentence(slide_content[i][2]) + '<br><span>' + translate_sentence(slide_content[i][3]) + '</span></div>');
				if (slide_content[i][4] !== false) {
					document.write('<div class="img_wrap"><img src="' + slide_content[i][4] + '" alt="' + slide_content[i][1] + '"/></div>');
				}
				if (slide_content[i][0] !== false) { document.write('</a>'); }
				document.write('</center></li>');
			}
			document.write('</ul></center></div>');
		}
	}

	//----------------------------------- INDEX PRODUCTS -----------------------------------

	//Show the first image
	function show_product_image() {
		get_product_product_image_paths();
		document.write("<center><a class='change_view_product' href='" + posturl + "' title='" + translate_sentence('See the product') + "'>");
		document.write("<img class='item_image' src='" + product_image_paths[0] + "' alt='" + translate_sentence(posttitle) + "'>");
		document.write("</a></center>");
	}
	//Show the first image

	//Get and show the current price, discount price and offer
	function show_product_price_index() {
		currentprice = extract_value(postbody, 'Current price:', '<br');
		discountprice = extract_value(postbody, 'Discount price:', '<br');
		// Show the deal
		if (parseFloat(discountprice) > 0 && parseFloat(discountprice) < parseFloat(currentprice)) {
			var discpercentage = (100-((100*discountprice)/currentprice)).toFixed(0);
			document.write('<div class="little-prices"><div class="container">'+ format_currency(discountprice) + ' (-' + discpercentage + '%)</div></div>');
		} else {
			document.write('<div class="little-prices"><div class="container">'+ format_currency(currentprice) + '</div></div>');
		}
	}
	//Get and show the current price, discount price and offer

	//Show lightbox icon
	function show_lightbox_icon() {
		document.write("<a data-lightbox='image-1' href='" + product_image_paths[0] + "'>");
		document.write("<div class='enlarge-lb' title='" + translate_sentence('Enlarge') + "'></div></a>");
	}
	//Show lightbox icon

	//----------------------------------- PAGINATION SYSTEM -----------------------------------

	function show_pagination(total_results) {
		var numshowpage = 4;
		var upPageWord = translate_sentence('Prev');
		var downPageWord = translate_sentence('Next');
		var html = '';
		html = '<div id="nav_wrapper"><table id="nav"><tr valign="top">';
		Inumshowpage = parseInt(numshowpage / 2);
		if (Inumshowpage == numshowpage - Inumshowpage) { numshowpage = Inumshowpage * 2 + 1 }
		mulai = actual_page_num - Inumshowpage;
		if (mulai < 1) mulai = 1;
		pages_total_num = parseInt(total_results / prods_per_page) + 1;
		if (pages_total_num - 1 == total_results / prods_per_page) pages_total_num = pages_total_num - 1;
		akhir = mulai + numshowpage - 1;
		if (akhir > pages_total_num) akhir = pages_total_num;
		var prevnomer = parseInt(actual_page_num) - 1;
		if (actual_page_num > 1) {
			if (actual_page_num == 2) {
				html += '<td><a href="/search/label/' + labels_path1 + '?&max-results=' + prods_per_page + '">' + upPageWord + '</a></td><td class="sep">|</td>';
			} else {
				html += '<td><a href="#" onclick="redirect_page(' + prevnomer + ');return false">' + upPageWord + '</a></td><td class="sep">|</td>';
			}
		}
		if (parseInt(mulai) > 1) { html += '<td><a href="/search/label/' + labels_path1 + '?&max-results=' + prods_per_page + '">1</a></td>'; }
		if (parseInt(mulai) > 2) { html += '<td>...</td>'; }
		
		for (var i = mulai; i <= akhir; i++) {
			if (actual_page_num == i) { html += '<td>' + i + '</td>'; }
			else if (i == 1) { html += '<td><a href="/search/label/' + labels_path1 + '?&max-results=' + prods_per_page + '">1</a></td>'; }
			else { html += '<td><a href="#" onclick="redirect_page(' + i + ');return false">' + i + '</a></td>'; }
		}
		
		if (akhir < pages_total_num - 1) {  html += '<td>...</td>'; }
		if (akhir < pages_total_num) { html += '<td><a href="#" onclick="redirect_page(' + pages_total_num + ');return false">' + pages_total_num + '</a></td>';}
		
		if (actual_page_num < pages_total_num) {
			html += '<td class="sep">|</td><td><a href="#" onclick="redirect_page(' + (parseInt(actual_page_num) + 1) + ');return false">' + downPageWord + '</a></td>'
		}
		html += '</tr></table></div>';
		var pageArea = document.getElementsByName("pageArea");
		var blogPager = document.getElementById("blog-pager");
		for (var p = 0; p < pageArea.length; p++) { pageArea[p].innerHTML = html; }
		if (pageArea && pageArea.length > 0) { html = ''; }
		if (blogPager) { blogPager.innerHTML = html; }
	}

	function hitungtotaldata(root) {
		show_pagination(parseInt((root.feed).openSearch$totalResults.$t, 10));
	}

	function pagination() {
		if (search_with_results === true) {
			if (location.href.indexOf("/search/label/") != -1) {
				if (location.href.indexOf("?updated-max") != -1) {	//Extract the label(s)
					labels_path1 = location.href.substring(location.href.indexOf("/search/label/") + 14, location.href.indexOf("?updated-max"))
				} else {
					labels_path1 = location.href.substring(location.href.indexOf("/search/label/") + 14, location.href.indexOf("?&max"))
				}
				//Fix for multiple labels
				labels_path2 = labels_path1.replace(/%2b/g,'/');
				labels_path2 = labels_path2.replace(/\+/g,'/');
			}
			if (location.href.indexOf("?q=") == -1 && location.href.indexOf(".html") == -1) {	//Check if match with "?q=" or ".html"
				if (location.href.indexOf("/search/label/") == -1) {	//If there are not labels
					if (location.href.indexOf("#PageNo=") != -1) {
						actual_page_num = location.href.substring(location.href.indexOf("#PageNo=") + 8, location.href.length)
					} else {
						actual_page_num = 1
					}
					document.write("<script src=\"/feeds/posts/summary?max-results=1&alt=json-in-script&callback=hitungtotaldata\"><\/script>")
				} else {		//If there are labels
					if (location.href.indexOf("#PageNo=") != -1) {
						actual_page_num = location.href.substring(location.href.indexOf("#PageNo=") + 8, location.href.length)
					} else {
						actual_page_num = 1
					}
					document.write('<script src="/feeds/posts/summary/-/' + labels_path2 + '?alt=json-in-script&callback=hitungtotaldata&max-results=1" ><\/script>')
				}
			}
		}
	}

	function redirect_page(numberpage) {
		jsonstart = (numberpage - 1) * prods_per_page;
		nopage = numberpage;
		var nBody = document.getElementsByTagName('head')[0];
		var newInclude = document.createElement('script');
		newInclude.type = 'text/javascript';
		newInclude.setAttribute("src", "/feeds/posts/summary/-/" + labels_path2 + "?start-index=" + jsonstart + "&max-results=1&alt=json-in-script&callback=get_date_item");
		nBody.appendChild(newInclude);
	}

	function get_date_item(root) {
		post = root.feed.entry[0];
		var timestamp = encodeURIComponent(post.published.$t.substring(0, 19) + post.published.$t.substring(23, 29));
		var script_path = "/search/label/" + labels_path1 + "?updated-max=" + timestamp + "&max-results=" + prods_per_page + "#PageNo=" + nopage;
		location.href = script_path;
	}

	
/******************************************************************************************************************************************************

																Slider

*******************************************************************************************************************************************************/

	(function ($) {

	  //FlexSlider: Object Instance
	  $.flexslider = function(el, options) {
		var slider = $(el);

		// making variables public
		slider.vars = $.extend({}, $.flexslider.defaults, options);

		var namespace = slider.vars.namespace,
			msGesture = window.navigator && window.navigator.msPointerEnabled && window.MSGesture,
			touch = (( "ontouchstart" in window ) || msGesture || window.DocumentTouch && document instanceof DocumentTouch) && slider.vars.touch,
			// depricating this idea, as devices are being released with both of these events
			//eventType = (touch) ? "touchend" : "click",
			eventType = "click touchend MSPointerUp",
			watchedEvent = "",
			watchedEventClearTimer,
			vertical = slider.vars.direction === "vertical",
			reverse = slider.vars.reverse,
			carousel = (slider.vars.itemWidth > 0),
			fade = slider.vars.animation === "fade",
			asNav = slider.vars.asNavFor !== "",
			methods = {},
			focused = true;

		// Store a reference to the slider object
		$.data(el, "flexslider", slider);

		// Private slider methods
		methods = {
		  init: function() {
			slider.animating = false;
			// Get current slide and make sure it is a number
			slider.currentSlide = parseInt( ( slider.vars.startAt ? slider.vars.startAt : 0) );
			if ( isNaN( slider.currentSlide ) ) slider.currentSlide = 0;
			slider.animatingTo = slider.currentSlide;
			slider.atEnd = (slider.currentSlide === 0 || slider.currentSlide === slider.last);
			slider.containerSelector = slider.vars.selector.substr(0,slider.vars.selector.search(' '));
			slider.slides = $(slider.vars.selector, slider);
			slider.container = $(slider.containerSelector, slider);
			slider.count = slider.slides.length;
			// SYNC:
			slider.syncExists = $(slider.vars.sync).length > 0;
			// SLIDE:
			if (slider.vars.animation === "slide") slider.vars.animation = "swing";
			slider.prop = (vertical) ? "top" : "marginLeft";
			slider.args = {};
			// SLIDESHOW:
			slider.manualPause = false;
			slider.stopped = false;
			//PAUSE WHEN INVISIBLE
			slider.started = false;
			slider.startTimeout = null;
			// TOUCH/USECSS:
			slider.transitions = !slider.vars.video && !fade && slider.vars.useCSS && (function() {
			  var obj = document.createElement('div'),
				  props = ['perspectiveProperty', 'WebkitPerspective', 'MozPerspective', 'OPerspective', 'msPerspective'];
			  for (var i in props) {
				if ( obj.style[ props[i] ] !== undefined ) {
				  slider.pfx = props[i].replace('Perspective','').toLowerCase();
				  slider.prop = "-" + slider.pfx + "-transform";
				  return true;
				}
			  }
			  return false;
			}());
			// CONTROLSCONTAINER:
			if (slider.vars.controlsContainer !== "") slider.controlsContainer = $(slider.vars.controlsContainer).length > 0 && $(slider.vars.controlsContainer);
			// MANUAL:
			if (slider.vars.manualControls !== "") slider.manualControls = $(slider.vars.manualControls).length > 0 && $(slider.vars.manualControls);

			// RANDOMIZE:
			if (slider.vars.randomize) {
			  slider.slides.sort(function() { return (Math.round(Math.random())-0.5); });
			  slider.container.empty().append(slider.slides);
			}

			slider.doMath();

			// INIT
			slider.setup("init");

			// CONTROLNAV:
			if (slider.vars.controlNav) methods.controlNav.setup();

			// DIRECTIONNAV:
			if (slider.vars.directionNav) methods.directionNav.setup();

			// KEYBOARD:
			if (slider.vars.keyboard && ($(slider.containerSelector).length === 1 || slider.vars.multipleKeyboard)) {
			  $(document).bind('keyup', function(event) {
				var keycode = event.keyCode;
				if (!slider.animating && (keycode === 39 || keycode === 37)) {
				  var target = (keycode === 39) ? slider.getTarget('next') :
							   (keycode === 37) ? slider.getTarget('prev') : false;
				  slider.flexAnimate(target, slider.vars.pauseOnAction);
				}
			  });
			}
			// MOUSEWHEEL:
			if (slider.vars.mousewheel) {
			  slider.bind('mousewheel', function(event, delta, deltaX, deltaY) {
				event.preventDefault();
				var target = (delta < 0) ? slider.getTarget('next') : slider.getTarget('prev');
				slider.flexAnimate(target, slider.vars.pauseOnAction);
			  });
			}

			// PAUSEPLAY
			if (slider.vars.pausePlay) methods.pausePlay.setup();

			//PAUSE WHEN INVISIBLE
			if (slider.vars.slideshow && slider.vars.pauseInvisible) methods.pauseInvisible.init();

			// SLIDSESHOW
			if (slider.vars.slideshow) {
			  if (slider.vars.pauseOnHover) {
				slider.hover(function() {
				  if (!slider.manualPlay && !slider.manualPause) slider.pause();
				}, function() {
				  if (!slider.manualPause && !slider.manualPlay && !slider.stopped) slider.play();
				});
			  }
			  // initialize animation
			  //If we're visible, or we don't use PageVisibility API
			  if(!slider.vars.pauseInvisible || !methods.pauseInvisible.isHidden()) {
				(slider.vars.initDelay > 0) ? slider.startTimeout = setTimeout(slider.play, slider.vars.initDelay) : slider.play();
			  }
			}

			// ASNAV:
			if (asNav) methods.asNav.setup();

			// TOUCH
			if (touch && slider.vars.touch) methods.touch();

			// FADE&&SMOOTHHEIGHT || SLIDE:
			if (!fade || (fade && slider.vars.smoothHeight)) $(window).bind("resize orientationchange focus", methods.resize);

			slider.find("img").attr("draggable", "false");

			// API: start() Callback
			setTimeout(function(){
			  slider.vars.start(slider);
			}, 200);
		  },
		  asNav: {
			setup: function() {
			  slider.asNav = true;
			  slider.animatingTo = Math.floor(slider.currentSlide/slider.move);
			  slider.currentItem = slider.currentSlide;
			  slider.slides.removeClass(namespace + "active-slide").eq(slider.currentItem).addClass(namespace + "active-slide");
			  if(!msGesture){
				  slider.slides.click(function(e){
					e.preventDefault();
					var $slide = $(this),
						target = $slide.index();
					var posFromLeft = $slide.offset().left - $(slider).scrollLeft(); // Find position of slide relative to left of slider container
					if( posFromLeft <= 0 && $slide.hasClass( namespace + 'active-slide' ) ) {
					  slider.flexAnimate(slider.getTarget("prev"), true);
					} else if (!$(slider.vars.asNavFor).data('flexslider').animating && !$slide.hasClass(namespace + "active-slide")) {
					  slider.direction = (slider.currentItem < target) ? "next" : "prev";
					  slider.flexAnimate(target, slider.vars.pauseOnAction, false, true, true);
					}
				  });
			  }else{
				  el._slider = slider;
				  slider.slides.each(function (){
					  var that = this;
					  that._gesture = new MSGesture();
					  that._gesture.target = that;
					  that.addEventListener("MSPointerDown", function (e){
						  e.preventDefault();
						  if(e.currentTarget._gesture)
							  e.currentTarget._gesture.addPointer(e.pointerId);
					  }, false);
					  that.addEventListener("MSGestureTap", function (e){
						  e.preventDefault();
						  var $slide = $(this),
							  target = $slide.index();
						  if (!$(slider.vars.asNavFor).data('flexslider').animating && !$slide.hasClass('active')) {
							  slider.direction = (slider.currentItem < target) ? "next" : "prev";
							  slider.flexAnimate(target, slider.vars.pauseOnAction, false, true, true);
						  }
					  });
				  });
			  }
			}
		  },
		  controlNav: {
			setup: function() {
			  if (!slider.manualControls) {
				methods.controlNav.setupPaging();
			  } else { // MANUALCONTROLS:
				methods.controlNav.setupManual();
			  }
			},
			setupPaging: function() {
			  var type = (slider.vars.controlNav === "thumbnails") ? 'control-thumbs' : 'control-paging',
				  j = 1,
				  item,
				  slide;

			  slider.controlNavScaffold = $('<ol class="'+ namespace + 'control-nav ' + namespace + type + '"></ol>');

			  if (slider.pagingCount > 1) {
				for (var i = 0; i < slider.pagingCount; i++) {
				  slide = slider.slides.eq(i);
				  item = (slider.vars.controlNav === "thumbnails") ? '<img src="' + slide.attr( 'data-thumb' ) + '"/>' : '<a>' + j + '</a>';
				  if ( 'thumbnails' === slider.vars.controlNav && true === slider.vars.thumbCaptions ) {
					var captn = slide.attr( 'data-thumbcaption' );
					if ( '' != captn && undefined != captn ) item += '<span class="' + namespace + 'caption">' + captn + '</span>';
				  }
				  slider.controlNavScaffold.append('<li>' + item + '</li>');
				  j++;
				}
			  }

			  // CONTROLSCONTAINER:
			  (slider.controlsContainer) ? $(slider.controlsContainer).append(slider.controlNavScaffold) : slider.append(slider.controlNavScaffold);
			  methods.controlNav.set();

			  methods.controlNav.active();

			  slider.controlNavScaffold.delegate('a, img', eventType, function(event) {
				event.preventDefault();

				if (watchedEvent === "" || watchedEvent === event.type) {
				  var $this = $(this),
					  target = slider.controlNav.index($this);

				  if (!$this.hasClass(namespace + 'active')) {
					slider.direction = (target > slider.currentSlide) ? "next" : "prev";
					slider.flexAnimate(target, slider.vars.pauseOnAction);
				  }
				}

				// setup flags to prevent event duplication
				if (watchedEvent === "") {
				  watchedEvent = event.type;
				}
				methods.setToClearWatchedEvent();

			  });
			},
			setupManual: function() {
			  slider.controlNav = slider.manualControls;
			  methods.controlNav.active();

			  slider.controlNav.bind(eventType, function(event) {
				event.preventDefault();

				if (watchedEvent === "" || watchedEvent === event.type) {
				  var $this = $(this),
					  target = slider.controlNav.index($this);

				  if (!$this.hasClass(namespace + 'active')) {
					(target > slider.currentSlide) ? slider.direction = "next" : slider.direction = "prev";
					slider.flexAnimate(target, slider.vars.pauseOnAction);
				  }
				}

				// setup flags to prevent event duplication
				if (watchedEvent === "") {
				  watchedEvent = event.type;
				}
				methods.setToClearWatchedEvent();
			  });
			},
			set: function() {
			  var selector = (slider.vars.controlNav === "thumbnails") ? 'img' : 'a';
			  slider.controlNav = $('.' + namespace + 'control-nav li ' + selector, (slider.controlsContainer) ? slider.controlsContainer : slider);
			},
			active: function() {
			  slider.controlNav.removeClass(namespace + "active").eq(slider.animatingTo).addClass(namespace + "active");
			},
			update: function(action, pos) {
			  if (slider.pagingCount > 1 && action === "add") {
				slider.controlNavScaffold.append($('<li><a>' + slider.count + '</a></li>'));
			  } else if (slider.pagingCount === 1) {
				slider.controlNavScaffold.find('li').remove();
			  } else {
				slider.controlNav.eq(pos).closest('li').remove();
			  }
			  methods.controlNav.set();
			  (slider.pagingCount > 1 && slider.pagingCount !== slider.controlNav.length) ? slider.update(pos, action) : methods.controlNav.active();
			}
		  },
		  directionNav: {
			setup: function() {
			  var directionNavScaffold = $('<ul class="' + namespace + 'direction-nav"><li><a class="' + namespace + 'prev" href="#">' + slider.vars.prevText + '</a></li><li><a class="' + namespace + 'next" href="#">' + slider.vars.nextText + '</a></li></ul>');

			  // CONTROLSCONTAINER:
			  if (slider.controlsContainer) {
				$(slider.controlsContainer).append(directionNavScaffold);
				slider.directionNav = $('.' + namespace + 'direction-nav li a', slider.controlsContainer);
			  } else {
				slider.append(directionNavScaffold);
				slider.directionNav = $('.' + namespace + 'direction-nav li a', slider);
			  }

			  methods.directionNav.update();

			  slider.directionNav.bind(eventType, function(event) {
				event.preventDefault();
				var target;

				if (watchedEvent === "" || watchedEvent === event.type) {
				  target = ($(this).hasClass(namespace + 'next')) ? slider.getTarget('next') : slider.getTarget('prev');
				  slider.flexAnimate(target, slider.vars.pauseOnAction);
				}

				// setup flags to prevent event duplication
				if (watchedEvent === "") {
				  watchedEvent = event.type;
				}
				methods.setToClearWatchedEvent();
			  });
			},
			update: function() {
			  var disabledClass = namespace + 'disabled';
			  if (slider.pagingCount === 1) {
				slider.directionNav.addClass(disabledClass).attr('tabindex', '-1');
			  } else if (!slider.vars.animationLoop) {
				if (slider.animatingTo === 0) {
				  slider.directionNav.removeClass(disabledClass).filter('.' + namespace + "prev").addClass(disabledClass).attr('tabindex', '-1');
				} else if (slider.animatingTo === slider.last) {
				  slider.directionNav.removeClass(disabledClass).filter('.' + namespace + "next").addClass(disabledClass).attr('tabindex', '-1');
				} else {
				  slider.directionNav.removeClass(disabledClass).removeAttr('tabindex');
				}
			  } else {
				slider.directionNav.removeClass(disabledClass).removeAttr('tabindex');
			  }
			}
		  },
		  pausePlay: {
			setup: function() {
			  var pausePlayScaffold = $('<div class="' + namespace + 'pauseplay"><a></a></div>');

			  // CONTROLSCONTAINER:
			  if (slider.controlsContainer) {
				slider.controlsContainer.append(pausePlayScaffold);
				slider.pausePlay = $('.' + namespace + 'pauseplay a', slider.controlsContainer);
			  } else {
				slider.append(pausePlayScaffold);
				slider.pausePlay = $('.' + namespace + 'pauseplay a', slider);
			  }

			  methods.pausePlay.update((slider.vars.slideshow) ? namespace + 'pause' : namespace + 'play');

			  slider.pausePlay.bind(eventType, function(event) {
				event.preventDefault();

				if (watchedEvent === "" || watchedEvent === event.type) {
				  if ($(this).hasClass(namespace + 'pause')) {
					slider.manualPause = true;
					slider.manualPlay = false;
					slider.pause();
				  } else {
					slider.manualPause = false;
					slider.manualPlay = true;
					slider.play();
				  }
				}

				// setup flags to prevent event duplication
				if (watchedEvent === "") {
				  watchedEvent = event.type;
				}
				methods.setToClearWatchedEvent();
			  });
			},
			update: function(state) {
			  (state === "play") ? slider.pausePlay.removeClass(namespace + 'pause').addClass(namespace + 'play').html(slider.vars.playText) : slider.pausePlay.removeClass(namespace + 'play').addClass(namespace + 'pause').html(slider.vars.pauseText);
			}
		  },
		  touch: function() {
			var startX,
			  startY,
			  offset,
			  cwidth,
			  dx,
			  startT,
			  scrolling = false,
			  localX = 0,
			  localY = 0,
			  accDx = 0;

			if(!msGesture){
				el.addEventListener('touchstart', onTouchStart, false);

				function onTouchStart(e) {
				  if (slider.animating) {
					e.preventDefault();
				  } else if ( ( window.navigator.msPointerEnabled ) || e.touches.length === 1 ) {
					slider.pause();
					// CAROUSEL:
					cwidth = (vertical) ? slider.h : slider. w;
					startT = Number(new Date());
					// CAROUSEL:

					// Local vars for X and Y points.
					localX = e.touches[0].pageX;
					localY = e.touches[0].pageY;

					offset = (carousel && reverse && slider.animatingTo === slider.last) ? 0 :
							 (carousel && reverse) ? slider.limit - (((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.animatingTo) :
							 (carousel && slider.currentSlide === slider.last) ? slider.limit :
							 (carousel) ? ((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.currentSlide :
							 (reverse) ? (slider.last - slider.currentSlide + slider.cloneOffset) * cwidth : (slider.currentSlide + slider.cloneOffset) * cwidth;
					startX = (vertical) ? localY : localX;
					startY = (vertical) ? localX : localY;

					el.addEventListener('touchmove', onTouchMove, false);
					el.addEventListener('touchend', onTouchEnd, false);
				  }
				}

				function onTouchMove(e) {
				  // Local vars for X and Y points.

				  localX = e.touches[0].pageX;
				  localY = e.touches[0].pageY;

				  dx = (vertical) ? startX - localY : startX - localX;
				  scrolling = (vertical) ? (Math.abs(dx) < Math.abs(localX - startY)) : (Math.abs(dx) < Math.abs(localY - startY));

				  var fxms = 500;

				  if ( ! scrolling || Number( new Date() ) - startT > fxms ) {
					e.preventDefault();
					if (!fade && slider.transitions) {
					  if (!slider.vars.animationLoop) {
						dx = dx/((slider.currentSlide === 0 && dx < 0 || slider.currentSlide === slider.last && dx > 0) ? (Math.abs(dx)/cwidth+2) : 1);
					  }
					  slider.setProps(offset + dx, "setTouch");
					}
				  }
				}

				function onTouchEnd(e) {
				  // finish the touch by undoing the touch session
				  el.removeEventListener('touchmove', onTouchMove, false);

				  if (slider.animatingTo === slider.currentSlide && !scrolling && !(dx === null)) {
					var updateDx = (reverse) ? -dx : dx,
						target = (updateDx > 0) ? slider.getTarget('next') : slider.getTarget('prev');

					if (slider.canAdvance(target) && (Number(new Date()) - startT < 550 && Math.abs(updateDx) > 50 || Math.abs(updateDx) > cwidth/2)) {
					  slider.flexAnimate(target, slider.vars.pauseOnAction);
					} else {
					  if (!fade) slider.flexAnimate(slider.currentSlide, slider.vars.pauseOnAction, true);
					}
				  }
				  el.removeEventListener('touchend', onTouchEnd, false);

				  startX = null;
				  startY = null;
				  dx = null;
				  offset = null;
				}
			}else{
				el.style.msTouchAction = "none";
				el._gesture = new MSGesture();
				el._gesture.target = el;
				el.addEventListener("MSPointerDown", onMSPointerDown, false);
				el._slider = slider;
				el.addEventListener("MSGestureChange", onMSGestureChange, false);
				el.addEventListener("MSGestureEnd", onMSGestureEnd, false);

				function onMSPointerDown(e){
					e.stopPropagation();
					if (slider.animating) {
						e.preventDefault();
					}else{
						slider.pause();
						el._gesture.addPointer(e.pointerId);
						accDx = 0;
						cwidth = (vertical) ? slider.h : slider. w;
						startT = Number(new Date());
						// CAROUSEL:

						offset = (carousel && reverse && slider.animatingTo === slider.last) ? 0 :
							(carousel && reverse) ? slider.limit - (((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.animatingTo) :
								(carousel && slider.currentSlide === slider.last) ? slider.limit :
									(carousel) ? ((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.currentSlide :
										(reverse) ? (slider.last - slider.currentSlide + slider.cloneOffset) * cwidth : (slider.currentSlide + slider.cloneOffset) * cwidth;
					}
				}

				function onMSGestureChange(e) {
					e.stopPropagation();
					var slider = e.target._slider;
					if(!slider){
						return;
					}
					var transX = -e.translationX,
						transY = -e.translationY;

					//Accumulate translations.
					accDx = accDx + ((vertical) ? transY : transX);
					dx = accDx;
					scrolling = (vertical) ? (Math.abs(accDx) < Math.abs(-transX)) : (Math.abs(accDx) < Math.abs(-transY));

					if(e.detail === e.MSGESTURE_FLAG_INERTIA){
						setImmediate(function (){
							el._gesture.stop();
						});

						return;
					}

					if (!scrolling || Number(new Date()) - startT > 500) {
						e.preventDefault();
						if (!fade && slider.transitions) {
							if (!slider.vars.animationLoop) {
								dx = accDx / ((slider.currentSlide === 0 && accDx < 0 || slider.currentSlide === slider.last && accDx > 0) ? (Math.abs(accDx) / cwidth + 2) : 1);
							}
							slider.setProps(offset + dx, "setTouch");
						}
					}
				}

				function onMSGestureEnd(e) {
					e.stopPropagation();
					var slider = e.target._slider;
					if(!slider){
						return;
					}
					if (slider.animatingTo === slider.currentSlide && !scrolling && !(dx === null)) {
						var updateDx = (reverse) ? -dx : dx,
							target = (updateDx > 0) ? slider.getTarget('next') : slider.getTarget('prev');

						if (slider.canAdvance(target) && (Number(new Date()) - startT < 550 && Math.abs(updateDx) > 50 || Math.abs(updateDx) > cwidth/2)) {
							slider.flexAnimate(target, slider.vars.pauseOnAction);
						} else {
							if (!fade) slider.flexAnimate(slider.currentSlide, slider.vars.pauseOnAction, true);
						}
					}

					startX = null;
					startY = null;
					dx = null;
					offset = null;
					accDx = 0;
				}
			}
		  },
		  resize: function() {
			if (!slider.animating && slider.is(':visible')) {
			  if (!carousel) slider.doMath();

			  if (fade) {
				// SMOOTH HEIGHT:
				methods.smoothHeight();
			  } else if (carousel) { //CAROUSEL:
				slider.slides.width(slider.computedW);
				slider.update(slider.pagingCount);
				slider.setProps();
			  }
			  else if (vertical) { //VERTICAL:
				slider.viewport.height(slider.h);
				slider.setProps(slider.h, "setTotal");
			  } else {
				// SMOOTH HEIGHT:
				if (slider.vars.smoothHeight) methods.smoothHeight();
				slider.newSlides.width(slider.computedW);
				slider.setProps(slider.computedW, "setTotal");
			  }
			}
		  },
		  smoothHeight: function(dur) {
			if (!vertical || fade) {
			  var $obj = (fade) ? slider : slider.viewport;
			  (dur) ? $obj.animate({"height": slider.slides.eq(slider.animatingTo).height()}, dur) : $obj.height(slider.slides.eq(slider.animatingTo).height());
			}
		  },
		  sync: function(action) {
			var $obj = $(slider.vars.sync).data("flexslider"),
				target = slider.animatingTo;

			switch (action) {
			  case "animate": $obj.flexAnimate(target, slider.vars.pauseOnAction, false, true); break;
			  case "play": if (!$obj.playing && !$obj.asNav) { $obj.play(); } break;
			  case "pause": $obj.pause(); break;
			}
		  },
		  pauseInvisible: {
			visProp: null,
			init: function() {
			  var prefixes = ['webkit','moz','ms','o'];

			  if ('hidden' in document) return 'hidden';
			  for (var i = 0; i < prefixes.length; i++) {
				if ((prefixes[i] + 'Hidden') in document) 
				methods.pauseInvisible.visProp = prefixes[i] + 'Hidden';
			  }
			  if (methods.pauseInvisible.visProp) {
				var evtname = methods.pauseInvisible.visProp.replace(/[H|h]idden/,'') + 'visibilitychange';
				document.addEventListener(evtname, function() {
				  if (methods.pauseInvisible.isHidden()) {
					if(slider.startTimeout) clearTimeout(slider.startTimeout); //If clock is ticking, stop timer and prevent from starting while invisible
					else slider.pause(); //Or just pause
				  }
				  else {
					if(slider.started) slider.play(); //Initiated before, just play
					else (slider.vars.initDelay > 0) ? setTimeout(slider.play, slider.vars.initDelay) : slider.play(); //Didn't init before: simply init or wait for it
				  }
				});
			  }       
			},
			isHidden: function() {
			  return document[methods.pauseInvisible.visProp] || false;
			}
		  },
		  setToClearWatchedEvent: function() {
			clearTimeout(watchedEventClearTimer);
			watchedEventClearTimer = setTimeout(function() {
			  watchedEvent = "";
			}, 3000);
		  }
		}

		// public methods
		slider.flexAnimate = function(target, pause, override, withSync, fromNav) {
		  if (!slider.vars.animationLoop && target !== slider.currentSlide) {
			slider.direction = (target > slider.currentSlide) ? "next" : "prev";
		  }

		  if (asNav && slider.pagingCount === 1) slider.direction = (slider.currentItem < target) ? "next" : "prev";

		  if (!slider.animating && (slider.canAdvance(target, fromNav) || override) && slider.is(":visible")) {
			if (asNav && withSync) {
			  var master = $(slider.vars.asNavFor).data('flexslider');
			  slider.atEnd = target === 0 || target === slider.count - 1;
			  master.flexAnimate(target, true, false, true, fromNav);
			  slider.direction = (slider.currentItem < target) ? "next" : "prev";
			  master.direction = slider.direction;

			  if (Math.ceil((target + 1)/slider.visible) - 1 !== slider.currentSlide && target !== 0) {
				slider.currentItem = target;
				slider.slides.removeClass(namespace + "active-slide").eq(target).addClass(namespace + "active-slide");
				target = Math.floor(target/slider.visible);
			  } else {
				slider.currentItem = target;
				slider.slides.removeClass(namespace + "active-slide").eq(target).addClass(namespace + "active-slide");
				return false;
			  }
			}

			slider.animating = true;
			slider.animatingTo = target;

			// SLIDESHOW:
			if (pause) slider.pause();

			// API: before() animation Callback
			slider.vars.before(slider);

			// SYNC:
			if (slider.syncExists && !fromNav) methods.sync("animate");

			// CONTROLNAV
			if (slider.vars.controlNav) methods.controlNav.active();

			// !CAROUSEL:
			// CANDIDATE: slide active class (for add/remove slide)
			if (!carousel) slider.slides.removeClass(namespace + 'active-slide').eq(target).addClass(namespace + 'active-slide');

			// INFINITE LOOP:
			// CANDIDATE: atEnd
			slider.atEnd = target === 0 || target === slider.last;

			// DIRECTIONNAV:
			if (slider.vars.directionNav) methods.directionNav.update();

			if (target === slider.last) {
			  // API: end() of cycle Callback
			  slider.vars.end(slider);
			  // SLIDESHOW && !INFINITE LOOP:
			  if (!slider.vars.animationLoop) slider.pause();
			}

			// SLIDE:
			if (!fade) {
			  var dimension = (vertical) ? slider.slides.filter(':first').height() : slider.computedW,
				  margin, slideString, calcNext;

			  // INFINITE LOOP / REVERSE:
			  if (carousel) {
				//margin = (slider.vars.itemWidth > slider.w) ? slider.vars.itemMargin * 2 : slider.vars.itemMargin;
				margin = slider.vars.itemMargin;
				calcNext = ((slider.itemW + margin) * slider.move) * slider.animatingTo;
				slideString = (calcNext > slider.limit && slider.visible !== 1) ? slider.limit : calcNext;
			  } else if (slider.currentSlide === 0 && target === slider.count - 1 && slider.vars.animationLoop && slider.direction !== "next") {
				slideString = (reverse) ? (slider.count + slider.cloneOffset) * dimension : 0;
			  } else if (slider.currentSlide === slider.last && target === 0 && slider.vars.animationLoop && slider.direction !== "prev") {
				slideString = (reverse) ? 0 : (slider.count + 1) * dimension;
			  } else {
				slideString = (reverse) ? ((slider.count - 1) - target + slider.cloneOffset) * dimension : (target + slider.cloneOffset) * dimension;
			  }
			  slider.setProps(slideString, "", slider.vars.animationSpeed);
			  if (slider.transitions) {
				if (!slider.vars.animationLoop || !slider.atEnd) {
				  slider.animating = false;
				  slider.currentSlide = slider.animatingTo;
				}
				slider.container.unbind("webkitTransitionEnd transitionend");
				slider.container.bind("webkitTransitionEnd transitionend", function() {
				  slider.wrapup(dimension);
				});
			  } else {
				slider.container.animate(slider.args, slider.vars.animationSpeed, slider.vars.easing, function(){
				  slider.wrapup(dimension);
				});
			  }
			} else { // FADE:
			  if (!touch) {
				//slider.slides.eq(slider.currentSlide).fadeOut(slider.vars.animationSpeed, slider.vars.easing);
				//slider.slides.eq(target).fadeIn(slider.vars.animationSpeed, slider.vars.easing, slider.wrapup);

				slider.slides.eq(slider.currentSlide).css({"zIndex": 1}).animate({"opacity": 0}, slider.vars.animationSpeed, slider.vars.easing);
				slider.slides.eq(target).css({"zIndex": 2}).animate({"opacity": 1}, slider.vars.animationSpeed, slider.vars.easing, slider.wrapup);

			  } else {
				slider.slides.eq(slider.currentSlide).css({ "opacity": 0, "zIndex": 1 });
				slider.slides.eq(target).css({ "opacity": 1, "zIndex": 2 });
				slider.wrapup(dimension);
			  }
			}
			// SMOOTH HEIGHT:
			if (slider.vars.smoothHeight) methods.smoothHeight(slider.vars.animationSpeed);
		  }
		}
		slider.wrapup = function(dimension) {
		  // SLIDE:
		  if (!fade && !carousel) {
			if (slider.currentSlide === 0 && slider.animatingTo === slider.last && slider.vars.animationLoop) {
			  slider.setProps(dimension, "jumpEnd");
			} else if (slider.currentSlide === slider.last && slider.animatingTo === 0 && slider.vars.animationLoop) {
			  slider.setProps(dimension, "jumpStart");
			}
		  }
		  slider.animating = false;
		  slider.currentSlide = slider.animatingTo;
		  // API: after() animation Callback
		  slider.vars.after(slider);
		}

		// SLIDESHOW:
		slider.animateSlides = function() {
		  if (!slider.animating && focused ) slider.flexAnimate(slider.getTarget("next"));
		}
		// SLIDESHOW:
		slider.pause = function() {
		  clearInterval(slider.animatedSlides);
		  slider.animatedSlides = null;
		  slider.playing = false;
		  // PAUSEPLAY:
		  if (slider.vars.pausePlay) methods.pausePlay.update("play");
		  // SYNC:
		  if (slider.syncExists) methods.sync("pause");
		}
		// SLIDESHOW:
		slider.play = function() {
		  if (slider.playing) clearInterval(slider.animatedSlides);
		  slider.animatedSlides = slider.animatedSlides || setInterval(slider.animateSlides, slider.vars.slideshowSpeed);
		  slider.started = slider.playing = true;
		  // PAUSEPLAY:
		  if (slider.vars.pausePlay) methods.pausePlay.update("pause");
		  // SYNC:
		  if (slider.syncExists) methods.sync("play");
		}
		// STOP:
		slider.stop = function () {
		  slider.pause();
		  slider.stopped = true;
		}
		slider.canAdvance = function(target, fromNav) {
		  // ASNAV:
		  var last = (asNav) ? slider.pagingCount - 1 : slider.last;
		  return (fromNav) ? true :
				 (asNav && slider.currentItem === slider.count - 1 && target === 0 && slider.direction === "prev") ? true :
				 (asNav && slider.currentItem === 0 && target === slider.pagingCount - 1 && slider.direction !== "next") ? false :
				 (target === slider.currentSlide && !asNav) ? false :
				 (slider.vars.animationLoop) ? true :
				 (slider.atEnd && slider.currentSlide === 0 && target === last && slider.direction !== "next") ? false :
				 (slider.atEnd && slider.currentSlide === last && target === 0 && slider.direction === "next") ? false :
				 true;
		}
		slider.getTarget = function(dir) {
		  slider.direction = dir;
		  if (dir === "next") {
			return (slider.currentSlide === slider.last) ? 0 : slider.currentSlide + 1;
		  } else {
			return (slider.currentSlide === 0) ? slider.last : slider.currentSlide - 1;
		  }
		}

		// SLIDE:
		slider.setProps = function(pos, special, dur) {
		  var target = (function() {
			var posCheck = (pos) ? pos : ((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.animatingTo,
				posCalc = (function() {
				  if (carousel) {
					return (special === "setTouch") ? pos :
						   (reverse && slider.animatingTo === slider.last) ? 0 :
						   (reverse) ? slider.limit - (((slider.itemW + slider.vars.itemMargin) * slider.move) * slider.animatingTo) :
						   (slider.animatingTo === slider.last) ? slider.limit : posCheck;
				  } else {
					switch (special) {
					  case "setTotal": return (reverse) ? ((slider.count - 1) - slider.currentSlide + slider.cloneOffset) * pos : (slider.currentSlide + slider.cloneOffset) * pos;
					  case "setTouch": return (reverse) ? pos : pos;
					  case "jumpEnd": return (reverse) ? pos : slider.count * pos;
					  case "jumpStart": return (reverse) ? slider.count * pos : pos;
					  default: return pos;
					}
				  }
				}());

				return (posCalc * -1) + "px";
			  }());

		  if (slider.transitions) {
			target = (vertical) ? "translate3d(0," + target + ",0)" : "translate3d(" + target + ",0,0)";
			dur = (dur !== undefined) ? (dur/1000) + "s" : "0s";
			slider.container.css("-" + slider.pfx + "-transition-duration", dur);
		  }

		  slider.args[slider.prop] = target;
		  if (slider.transitions || dur === undefined) slider.container.css(slider.args);
		}

		slider.setup = function(type) {
		  // SLIDE:
		  if (!fade) {
			var sliderOffset, arr;

			if (type === "init") {
			  slider.viewport = $('<div class="' + namespace + 'viewport"></div>').css({"overflow": "hidden", "position": "relative"}).appendTo(slider).append(slider.container);
			  // INFINITE LOOP:
			  slider.cloneCount = 0;
			  slider.cloneOffset = 0;
			  // REVERSE:
			  if (reverse) {
				arr = $.makeArray(slider.slides).reverse();
				slider.slides = $(arr);
				slider.container.empty().append(slider.slides);
			  }
			}
			// INFINITE LOOP && !CAROUSEL:
			if (slider.vars.animationLoop && !carousel) {
			  slider.cloneCount = 2;
			  slider.cloneOffset = 1;
			  // clear out old clones
			  if (type !== "init") slider.container.find('.clone').remove();
			  slider.container.append(slider.slides.first().clone().addClass('clone').attr('aria-hidden', 'true')).prepend(slider.slides.last().clone().addClass('clone').attr('aria-hidden', 'true'));
			}
			slider.newSlides = $(slider.vars.selector, slider);

			sliderOffset = (reverse) ? slider.count - 1 - slider.currentSlide + slider.cloneOffset : slider.currentSlide + slider.cloneOffset;
			// VERTICAL:
			if (vertical && !carousel) {
			  slider.container.height((slider.count + slider.cloneCount) * 200 + "%").css("position", "absolute").width("100%");
			  setTimeout(function(){
				slider.newSlides.css({"display": "block"});
				slider.doMath();
				slider.viewport.height(slider.h);
				slider.setProps(sliderOffset * slider.h, "init");
			  }, (type === "init") ? 100 : 0);
			} else {
			  slider.container.width((slider.count + slider.cloneCount) * 200 + "%");
			  slider.setProps(sliderOffset * slider.computedW, "init");
			  setTimeout(function(){
				slider.doMath();
				slider.newSlides.css({"width": slider.computedW, "float": "left", "display": "block"});
				// SMOOTH HEIGHT:
				if (slider.vars.smoothHeight) methods.smoothHeight();
			  }, (type === "init") ? 100 : 0);
			}
		  } else { // FADE:
			slider.slides.css({"width": "100%", "float": "left", "marginRight": "-100%", "position": "relative"});
			if (type === "init") {
			  if (!touch) {
				//slider.slides.eq(slider.currentSlide).fadeIn(slider.vars.animationSpeed, slider.vars.easing);
				slider.slides.css({ "opacity": 0, "display": "block", "zIndex": 1 }).eq(slider.currentSlide).css({"zIndex": 2}).animate({"opacity": 1},slider.vars.animationSpeed,slider.vars.easing);
			  } else {
				slider.slides.css({ "opacity": 0, "display": "block", "webkitTransition": "opacity " + slider.vars.animationSpeed / 1000 + "s ease", "zIndex": 1 }).eq(slider.currentSlide).css({ "opacity": 1, "zIndex": 2});
			  }
			}
			// SMOOTH HEIGHT:
			if (slider.vars.smoothHeight) methods.smoothHeight();
		  }
		  // !CAROUSEL:
		  // CANDIDATE: active slide
		  if (!carousel) slider.slides.removeClass(namespace + "active-slide").eq(slider.currentSlide).addClass(namespace + "active-slide");
		}


		slider.doMath = function() {
		  var slide = slider.slides.first(),
			  slideMargin = slider.vars.itemMargin,
			  minItems = slider.vars.minItems,
			  maxItems = slider.vars.maxItems;

		  slider.w = (slider.viewport===undefined) ? slider.width() : slider.viewport.width();
		  slider.h = slide.height();
		  slider.boxPadding = slide.outerWidth() - slide.width();

		  // CAROUSEL:
		  if (carousel) {
			slider.itemT = slider.vars.itemWidth + slideMargin;
			slider.minW = (minItems) ? minItems * slider.itemT : slider.w;
			slider.maxW = (maxItems) ? (maxItems * slider.itemT) - slideMargin : slider.w;
			slider.itemW = (slider.minW > slider.w) ? (slider.w - (slideMargin * (minItems - 1)))/minItems :
						   (slider.maxW < slider.w) ? (slider.w - (slideMargin * (maxItems - 1)))/maxItems :
						   (slider.vars.itemWidth > slider.w) ? slider.w : slider.vars.itemWidth;

			slider.visible = Math.floor(slider.w/(slider.itemW));
			slider.move = (slider.vars.move > 0 && slider.vars.move < slider.visible ) ? slider.vars.move : slider.visible;
			slider.pagingCount = Math.ceil(((slider.count - slider.visible)/slider.move) + 1);
			slider.last =  slider.pagingCount - 1;
			slider.limit = (slider.pagingCount === 1) ? 0 :
						   (slider.vars.itemWidth > slider.w) ? (slider.itemW * (slider.count - 1)) + (slideMargin * (slider.count - 1)) : ((slider.itemW + slideMargin) * slider.count) - slider.w - slideMargin;
		  } else {
			slider.itemW = slider.w;
			slider.pagingCount = slider.count;
			slider.last = slider.count - 1;
		  }
		  slider.computedW = slider.itemW - slider.boxPadding;
		}


		slider.update = function(pos, action) {
		  slider.doMath();

		  // update currentSlide and slider.animatingTo if necessary
		  if (!carousel) {
			if (pos < slider.currentSlide) {
			  slider.currentSlide += 1;
			} else if (pos <= slider.currentSlide && pos !== 0) {
			  slider.currentSlide -= 1;
			}
			slider.animatingTo = slider.currentSlide;
		  }

		  // update controlNav
		  if (slider.vars.controlNav && !slider.manualControls) {
			if ((action === "add" && !carousel) || slider.pagingCount > slider.controlNav.length) {
			  methods.controlNav.update("add");
			} else if ((action === "remove" && !carousel) || slider.pagingCount < slider.controlNav.length) {
			  if (carousel && slider.currentSlide > slider.last) {
				slider.currentSlide -= 1;
				slider.animatingTo -= 1;
			  }
			  methods.controlNav.update("remove", slider.last);
			}
		  }
		  // update directionNav
		  if (slider.vars.directionNav) methods.directionNav.update();

		}

		slider.addSlide = function(obj, pos) {
		  var $obj = $(obj);

		  slider.count += 1;
		  slider.last = slider.count - 1;

		  // append new slide
		  if (vertical && reverse) {
			(pos !== undefined) ? slider.slides.eq(slider.count - pos).after($obj) : slider.container.prepend($obj);
		  } else {
			(pos !== undefined) ? slider.slides.eq(pos).before($obj) : slider.container.append($obj);
		  }

		  // update currentSlide, animatingTo, controlNav, and directionNav
		  slider.update(pos, "add");

		  // update slider.slides
		  slider.slides = $(slider.vars.selector + ':not(.clone)', slider);
		  // re-setup the slider to accomdate new slide
		  slider.setup();

		  //FlexSlider: added() Callback
		  slider.vars.added(slider);
		}
		slider.removeSlide = function(obj) {
		  var pos = (isNaN(obj)) ? slider.slides.index($(obj)) : obj;

		  // update count
		  slider.count -= 1;
		  slider.last = slider.count - 1;

		  // remove slide
		  if (isNaN(obj)) {
			$(obj, slider.slides).remove();
		  } else {
			(vertical && reverse) ? slider.slides.eq(slider.last).remove() : slider.slides.eq(obj).remove();
		  }

		  // update currentSlide, animatingTo, controlNav, and directionNav
		  slider.doMath();
		  slider.update(pos, "remove");

		  // update slider.slides
		  slider.slides = $(slider.vars.selector + ':not(.clone)', slider);
		  // re-setup the slider to accomdate new slide
		  slider.setup();

		  // FlexSlider: removed() Callback
		  slider.vars.removed(slider);
		}

		//FlexSlider: Initialize
		methods.init();
	  }

	  // Ensure the slider isn't focussed if the window loses focus.
	  $( window ).blur( function ( e ) {
		focused = false;
	  }).focus( function ( e ) {
		focused = true;
	  });

	  //FlexSlider: Default Settings
	  $.flexslider.defaults = {
		namespace: "flex-",             //{NEW} String: Prefix string attached to the class of every element generated by the plugin
		selector: ".slides > li",       //{NEW} Selector: Must match a simple pattern. '{container} > {slide}' -- Ignore pattern at your own peril
		animation: "fade",              //String: Select your animation type, "fade" or "slide"
		easing: "swing",                //{NEW} String: Determines the easing method used in jQuery transitions. jQuery easing plugin is supported!
		direction: "horizontal",        //String: Select the sliding direction, "horizontal" or "vertical"
		reverse: false,                 //{NEW} Boolean: Reverse the animation direction
		animationLoop: true,            //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
		smoothHeight: false,            //{NEW} Boolean: Allow height of the slider to animate smoothly in horizontal mode
		startAt: 0,                     //Integer: The slide that the slider should start on. Array notation (0 = first slide)
		slideshow: true,                //Boolean: Animate slider automatically
		slideshowSpeed: 7000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
		animationSpeed: 600,            //Integer: Set the speed of animations, in milliseconds
		initDelay: 0,                   //{NEW} Integer: Set an initialization delay, in milliseconds
		randomize: false,               //Boolean: Randomize slide order
		thumbCaptions: false,           //Boolean: Whether or not to put captions on thumbnails when using the "thumbnails" controlNav.

		// Usability features
		pauseOnAction: true,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
		pauseOnHover: false,            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
		pauseInvisible: true,   		//{NEW} Boolean: Pause the slideshow when tab is invisible, resume when visible. Provides better UX, lower CPU usage.
		useCSS: true,                   //{NEW} Boolean: Slider will use CSS3 transitions if available
		touch: true,                    //{NEW} Boolean: Allow touch swipe navigation of the slider on touch-enabled devices
		video: false,                   //{NEW} Boolean: If using video in the slider, will prevent CSS3 3D Transforms to avoid graphical glitches

		// Primary Controls
		controlNav: true,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
		directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
		prevText: "&lsaquo;",           //String: Set the text for the "previous" directionNav item
		nextText: "&rsaquo;",           //String: Set the text for the "next" directionNav item

		// Secondary Navigation
		keyboard: true,                 //Boolean: Allow slider navigating via keyboard left/right keys
		multipleKeyboard: false,        //{NEW} Boolean: Allow keyboard navigation to affect multiple sliders. Default behavior cuts out keyboard navigation with more than one slider present.
		mousewheel: false,              //{UPDATED} Boolean: Requires jquery.mousewheel.js (https://github.com/brandonaaron/jquery-mousewheel) - Allows slider navigating via mousewheel
		pausePlay: false,               //Boolean: Create pause/play dynamic element
		pauseText: "Pause",             //String: Set the text for the "pause" pausePlay item
		playText: "Play",               //String: Set the text for the "play" pausePlay item

		// Special properties
		controlsContainer: "",          //{UPDATED} jQuery Object/Selector: Declare which container the navigation elements should be appended too. Default container is the FlexSlider element. Example use would be $(".flexslider-container"). Property is ignored if given element is not found.
		manualControls: "",             //{UPDATED} jQuery Object/Selector: Declare custom control navigation. Examples would be $(".flex-control-nav li") or "#tabs-nav li img", etc. The number of elements in your controlNav should match the number of slides/tabs.
		sync: "",                       //{NEW} Selector: Mirror the actions performed on this slider with another slider. Use with care.
		asNavFor: "",                   //{NEW} Selector: Internal property exposed for turning the slider into a thumbnail navigation for another slider

		// Carousel Options
		itemWidth: 0,                   //{NEW} Integer: Box-model width of individual carousel items, including horizontal borders and padding.
		itemMargin: 0,                  //{NEW} Integer: Margin between carousel items.
		minItems: 1,                    //{NEW} Integer: Minimum number of carousel items that should be visible. Items will resize fluidly when below this.
		maxItems: 0,                    //{NEW} Integer: Maxmimum number of carousel items that should be visible. Items will resize fluidly when above this limit.
		move: 0,                        //{NEW} Integer: Number of carousel items that should move on animation. If 0, slider will move all visible items.
		allowOneSlide: true,           //{NEW} Boolean: Whether or not to allow a slider comprised of a single slide

		// Callback API
		start: function(){},            //Callback: function(slider) - Fires when the slider loads the first slide
		before: function(){},           //Callback: function(slider) - Fires asynchronously with each slider animation
		after: function(){},            //Callback: function(slider) - Fires after each slider animation completes
		end: function(){},              //Callback: function(slider) - Fires when the slider reaches the last slide (asynchronous)
		added: function(){},            //{NEW} Callback: function(slider) - Fires after a slide is added
		removed: function(){}           //{NEW} Callback: function(slider) - Fires after a slide is removed
	  }


	  //FlexSlider: Plugin Function
	  $.fn.flexslider = function(options) {
		if (options === undefined) options = {};

		if (typeof options === "object") {
		  return this.each(function() {
			var $this = $(this),
				selector = (options.selector) ? options.selector : ".slides > li",
				$slides = $this.find(selector);

		  if ( ( $slides.length === 1 && options.allowOneSlide === true ) || $slides.length === 0 ) {
			  $slides.fadeIn(400);
			  if (options.start) options.start($this);
			} else if ($this.data('flexslider') === undefined) {
			  new $.flexslider(this, options);
			}
		  });
		} else {
		  // Helper strings to quickly perform functions on the slider
		  var $slider = $(this).data('flexslider');
		  switch (options) {
			case "play": $slider.play(); break;
			case "pause": $slider.pause(); break;
			case "stop": $slider.stop(); break;
			case "next": $slider.flexAnimate($slider.getTarget("next"), true); break;
			case "prev":
			case "previous": $slider.flexAnimate($slider.getTarget("prev"), true); break;
			default: if (typeof options === "number") $slider.flexAnimate(options, true);
		  }
		}
	  }
	})(jQuery);


}

//Bottom general ads
function bottom_ads() {
	document.write('<div class="ad-container-1"><center><ul>');

	document.write('<a href="' + twitter_link +'" target="_blank">');
	document.write('<li><div class="fashion_blog"></div><h3>' + translate_sentence('Do you write about fashion?') + '</h3>');
	document.write('<p>' + translate_sentence('If you like to write about fashion, mention us by Twitter with your post and we will share.') + '</p></li></a>');
	
	document.write('<a href="' + contactuspage +'">');
	document.write('<li><div class="dropship"></div><h3>' + translate_sentence('Sell handbags and earn') + '</h3>');
	document.write('<p>' + translate_sentence('We have many magnific products. Sell and earn. We offer dropshipping. Contact us and we will tell you how.') + '</p></li></a>');

	document.write('</ul></center></div>');
}

//General ads 2
function general_ads_2() {
	document.write('<div id="blog-section-ad"><center><ul>');

	document.write('<a href="' + twitter_link +'" target="_blank">');
	document.write('<li><div class="fashion_blog"></div><h3>' + translate_sentence('Do you write about fashion?') + '</h3>');
	document.write('<p>' + translate_sentence('If you like to write about fashion, mention us by Twitter with your post and we will share.') + '<br>' + 
	translate_sentence("Also, do you want to share your fashion posts on the IvoryBrand's blog? Ask us how. It's very easy!") + '</p></li></a>');
	
	document.write('</ul></center></div>');
}


//----------------------------------- Static page functions --------------------------------------------------------------------------------------------




//Static page files
if (get_pagetype() === 'static page') {
	
/******************************************************************************************************************************************************

																Slider

*******************************************************************************************************************************************************/

	//Show checkout automatic content
	function show_checkout_content() {
		if (checksameurl(location.href, checkoutpage) == true) {
			// Checkout table
			document.write('<div class="simpleCart_items"></div><div id="cartTotal">');
			document.write('<div id="empty_cart"><a href="javascript:;" class="simpleCart_empty">' + translate_sentence('Empty cart') + '</a></div>');
			document.write('<div class="total_quantity">' + translate_sentence('You have') + ' <strong><span class="simpleCart_quantity"></span></strong> ' + translate_sentence('item(s) in cart') + '</div>');
			if (shipping_method == 2) { document.write('<div class="total_amount">' + translate_sentence('Total weight') + ': <strong><span class="simpleCart_weight"></span>g</strong></div>'); }
			document.write('<div class="total_amount">' + translate_sentence('Subtotal in Cart') + ': <strong><span class="simpleCart_total"></span></strong></div>');
			document.write('<div class="total_amount">' + translate_sentence('Shipping cost'));
			document.write(': <strong><span class="simpleCart_shipping"></span></strong></div><div class="total_amount">' + translate_sentence('Paypal commission'));
			document.write(': <strong><span class="simpleCart_tax"></span></strong></div><div class="total_amount grandtotal">');
			document.write(translate_sentence('Grand total') + ': <strong><span class="simpleCart_grandTotal"></span></strong></div></div>');
			// Checkout table
			
			//Shipping methods
			i_shipping = localStorage.getItem('i_shipping');
			document.write('<center><div id="shipping_types">');
			if (free_shipping_from > 0){
				document.write('<div class="separation"><span>' + translate_sentence('If your purchase is over') + ' ' + format_currency(free_shipping_from) + ', ');
				document.write(translate_sentence('your shipping will be free!') + '</span> (' + translate_sentence(shipping_types[0][0]) + ')</div>');
			}
			document.write(translate_sentence('Shipping methods') + ':  <select onChange="update_shipping(this.selectedIndex)" id="sel_shipping" name="sel_shipping">');
			for(var i=0; i < shipping_types.length; i++){
				//alert('i_shipping ' + i_shipping);
				if (i == i_shipping) {
					document.write('<option value="1" selected>');
				} else {
					document.write('<option value="1">');
				}
				document.write(translate_sentence(shipping_types[i][0]) + ' (' + shipping_types[i][1] + ' ' + translate_sentence('days approx.') +')</option>');
			}
			document.write('</select></div></center>');
			//Shipping methods
			
			// Tracking number
			if (track_price !== false) {
				document.write('<div id="track_wrap"><center><div class="add_track"><div class="item_image">');
				document.write('<img class="item_thumb" src="https://lh5.googleusercontent.com/-0fOox7Snmhs/U11aqpau6LI/AAAAAAAABAk/Db1QGyEEwqU/s100-no/track-number.png" alt="' + translate_sentence('Tracking number') + '" title="' + translate_sentence('Tracking number') + '"></div>');
				document.write('<select class="item_color" style="display: none;"><option value="-">-</option></select>');
				document.write('<select class="item_size" style="display: none;"><option value="-">-</option></select>');
				document.write('<div class="product-summary"><div class="item_name">Tracking number</div><div class="item_description">');
				document.write(translate_sentence('Get the tracking number of your order and stay calm!') + '</div><div class="track_price">');
				document.write(format_currency(parseFloat(track_price)) + '</div></div><a class="item_add button" href="javascript:;">');
				document.write(translate_sentence('Add to cart') + '</a></div></center></div>');
				document.write('<div class="item_price" style="display: none;">' + parseInt(track_price) + '</div>');
			}
			// Tracking number
			
			//Set selected country
			i_country = localStorage.getItem('i_country');
			if (i_country === null || typeof i_country === 'undefined') {
				i_country = localStorage.setItem('i_country', 0);
				i_country = localStorage.getItem('i_country');
			}
			//Set selected country
				
			//Available countries in cart
			if (world_shipping == false) {
				document.write('<center><div id="countries">' + translate_sentence('Select your country') + ':  <select id="selcountries" name="selcountries">');
				country_list.unshift('...');
				for(var i=0; i < country_list.length; i++){
					if (i == i_country) {
						document.write('<option value="' + i + '" selected>');
					} else {
						document.write('<option value="' + i + '">');
					}
					document.write(translate_sentence(country_list[i]) + '</option>');
				}
				document.write('</select></div></center>');
			}
			//Available countries in cart
			
			//Show cart text and place the order button
			document.write('<center>* ' + translate_sentence('You can pay with credit card or PayPal') + '.<br />');
			if (certified_shipping == true) {
				document.write('* ' + translate_sentence('Your packet will be sent with tracking number if you order it') + '.<br />');
			}
			document.write('* ' + translate_sentence('Do you have any question?') + ' ');
			showpagelink(contactuspage, translate_sentence('Contact us!'));
			document.write('<br /></center>');

			if (world_shipping == true) {
				document.write('<a class="simpleCart_checkout button turquoise" href="javascript:;"><span class="checkout_btn">' + translate_sentence('Place the order') + '</span></a>');
			} else {
				var selcountries = 0;
				window.onload = function() {
					document.getElementById("selcountries").onchange=function(){
						selcountries = document.getElementById("selcountries").value;
						i_country = localStorage.setItem('i_country', selcountries);
						i_country = localStorage.getItem('i_country');
						if (selcountries > 0){
							document.getElementById("place_button").style.display = "block";
							document.getElementById("disable-button").style.display = "none";
						} else {
							document.getElementById("place_button").style.display = "none";
							document.getElementById("disable-button").style.display = "block";
						}
					}  
				  document.getElementById("selcountries").onchange();
				}
				document.write('<a style="display: none;" id="place_button" class="simpleCart_checkout button turquoise" href="javascript:;"><span class="checkout_btn">' + translate_sentence('Place the order') + '</span></a>');
				document.write('<div id="disable-button">' + translate_sentence('Select your country') + '</div>');
			}
			//Show cart text and place the order button
		}
	}
	//Show checkout automatic content

	//Update the shipping cost selected
	function update_shipping(value) {
		i_shipping = localStorage.setItem('i_shipping', value);
		simpleCart.shipping(function(){ return value; });
		simpleCart.update();
	}
	//Update the shipping cost selected

	//Show contact us automatic content
	function show_contact_content() {
		if (checksameurl(location.href, contactuspage) == true && contact_us_auto_content == true) {
			document.write('<div style="line-height: 2em;">' + translate_sentence('The main questions that our customers have are'));
			document.write(':<br/><p>* <b>' + translate_sentence('How long does the delivery take?') + '</b> ' + translate_sentence('You can see this information in') + ' ');
			showpagelink(shipping_handling_page, translate_sentence('Shipping and handling'));
			document.write('.<br/>* <b>' + translate_sentence('What method of payment are there?') + '</b> ');
			document.write(translate_sentence('You can pay with credit card or PayPal. We accept Mastercard, Visa, Discover... The payment is secure and easy') + '.<br/>*');
			if (show_if_enabled(company_address) !== false || show_company_location === true) {
				document.write(' <b>' + translate_sentence('Where are we from?') + '</b> ' + translate_sentence('We are based in') + ' ');
				if (show_if_enabled(company_address) !== false) { document.write(translate_sentence(company_address) + ', '); }
				if (show_company_location === true) { document.write(translate_sentence(company_city) + ' (' + translate_sentence(company_country) + ')'); }
				document.write('.<br/>');
			}
			document.write('</p>' + translate_sentence('For everything else, you can contact us by') + ':<br/><p>* <b>' + translate_sentence('E-mail'));
			document.write(':</b> <a href="mailto:' + company_email + '">' + company_email + '</a>' + '<br/>');
			if (show_if_enabled(phone_number) !== false) { document.write('* <b>' + translate_sentence('Telephone') + ':</b> ' + phone_number + '.<br/>'); }
			document.write('* <b>' + translate_sentence('Through the following contact form') + ':</b> </p>' + '</div>');
			document.write('<style>#ContactForm1 { display: block; }</style>');	//Show the contact form
		}
	}
	//Show contact us automatic content

	//Modify contact form
	function modify_contact_form_message() {
		$(function() {
			$('.contact-form-button-submit').click(function() {
				if ($('.contact-form-error-message-with-border').text() == 'A valid email address is required.') {
					$('#contact_form_message').text(translate_sentence('Please, insert a correct email'));
					$('#contact_form_message').css('color', '#960000');
				} else if ($('.contact-form-error-message-with-border').text() == 'Message field cannot be empty.') {
					$('#contact_form_message').text(translate_sentence('Please, write a message'));
					$('#contact_form_message').css('color', '#960000');
				} else if ($('.contact-form-success-message-with-border').text() == 'Sending...') {
					$('#contact_form_message').text(translate_sentence('Your message has been sent. Thanks!'));
					$('#contact_form_message').css('color', '#555');
				} else {
					$('#contact_form_message').text('');
				}
			});
		});
	}
	//Modifying contact form

	//Show footer contact form
	function show_footer_contact_form() {
		change_properties('.contact-form-button-submit', 'value', translate_sentence('Send'));
		document.write('<br/><br/>' + translate_sentence('We will reply as soon as possible') + '.');
	}
	//Modifying contact form

	//Show correct order page automatic content
	function show_correct_order_page_content() {
		if (checksameurl(location.href, correctorderpage) == true) {
			document.write(translate_sentence('Success submission! Paypal will send you an automated e-mail notification for your reference. Please check your e-mail inbox for purchase order details and banking transaction options.'));
			document.write('<br/><br/>' + translate_sentence('Thank you again for your purchase!'));
			simpleCart.empty();	//Remove items from cart
		}
	}
	//Show correct order page automatic content
	
	//Show dropshipping page content
	function show_dropshipping_page_content() {
		if (checksameurl(location.href, dropshippingpage) == true) {

		}
	}
	
	//Shor blog section page content
	function show_blog_page_content(posts_on_blog) {
		if (checksameurl(location.href, blogpage) == true) {
			
			// General ads 2
			general_ads_2();
		
			// Imprimir entrada
			document.write('<div class="blog-section"></div>');
			
			// Cambio de idioma del blog
			if (selected_language === 'es') { blogs_list = shuffleArray(es_blog_section); }
			else { blogs_list = shuffleArray(en_blog_section); }
			
			// Obtención de variables de JSON
			for (var i = 0; i < Math.min(blogs_list.length, posts_on_blog); i++) {
				$.ajax({
					type: 'get',
					url:  blogs_list[i] + 'feeds/posts/summary?max-results=1&alt=json',
					async: false,
					contentType: "json",
					dataType: 'jsonp',
					error: function(data) { },	// Ocultar entrada
					success: function (json) {
						
						var posttime = new Date(json.feed.entry[0].published.$t);
						posttime = posttime.getDate() + ' ' + translate_sentence(month_tab[posttime.getMonth()+1]) + ' ' + posttime.getFullYear();
						$('.blog-section').append(
							'<h2><a target="_blank" href="' + json.feed.entry[0].link[4].href + '">' + json.feed.entry[0].title.$t + '</a></h2>' + 
							'<center><table class="author"><td class="icon"></td><td class"text">' + json.feed.author[0].name.$t + ' ' + 
							translate_sentence('at') + ' ' + posttime + '</td></table></center>' + '<p>' + json.feed.entry[0].summary.$t + 
							'...</p><center><a target="_blank" href="' + json.feed.entry[0].link[4].href + '"><div class="read-more">' + 
							translate_sentence('Read more') + '</div></a></center><br><br><br>'
						);
						
					}
				});
			}
			
		}
	}
	
	//Show about us automatic content
	function show_about_us_page_content() {
		if (checksameurl(location.href, aboutuspage) == true && about_us_auto_content == true) {
			if (show_if_enabled(company_address) !== false || show_company_location === true) {
				document.write(company_name + ' ');
				if (show_if_enabled(VAT_Tax_ID) !== false) { document.write('(' + VAT_Tax_ID + ')'); }
				document.write(' ' + translate_sentence('is a good online commercial company based in') + ' ');
				if (show_if_enabled(company_address) !== false) { document.write(translate_sentence(company_address) + ', '); }
				if (show_company_location === true) { document.write(translate_sentence(company_city) + ' (' + translate_sentence(company_country) + ')'); }
				document.write('. ');
			}
			document.write(translate_sentence('Our company has earned itself a solid reputation for quality, good service, reliability and professionalism in this field') + '. ');
			document.write(translate_sentence('Our operation capabilities cover favorable policy, instant and safe delivery, privacy protection and well-rounded customer support') + '. ');
			document.write(translate_sentence('The mission of') + ' ' + company_name + ' ' + translate_sentence('is to provide you with the best products to the best prices') + '.<br/><br/>');
			document.write(translate_sentence('Our reputation, experience and keen industry insight permit us to negotiate low prices on the net') + '. ');
			document.write(translate_sentence('If you have a suggestion you would like to share with our team, please let us know') + '. ');
			document.write(translate_sentence('Customer feedback shapes our business and allows us to better serve our audience so your ideas are always welcome') + '.<br/><br/>');
			document.write(company_name + ' ' + translate_sentence('respects your right to privacy') + '. ');
			document.write(translate_sentence('Our goal is your complete satisfaction and we are not in the business of sharing your information with others') + '. ');
			document.write(translate_sentence('All personal data is stored on our secure server with several layers of firewall protection') + '.<br/><br/>');
			document.write(translate_sentence('We promise to') + ':<br/> * ' + translate_sentence('Provide 24/7 customer support on weekdays') + '.<br/>');
			document.write(' * ' + translate_sentence('Streamline the buying and paying process') + '.<br/>');
			document.write(' * ' + translate_sentence('Deliver goods to our customers with speed and precision') + '.<br/>');
			document.write(' * ' + translate_sentence('Ensure the excellent quality of our products') + '.<br/> * ' + translate_sentence('Secure payment') + '.<br/><br/>');
			document.write(translate_sentence('We hope our customers get a great experience buying our products') + '.<br/>');
		}
	}
	//Show about us automatic content

	//Show Shipping and handling page automatic content
	function show_shipping_handling_page_content() {
		if (checksameurl(location.href, shipping_handling_page) == true && shipping_handling_auto_content == true) {
			document.write('<h6>' + translate_sentence('What shipping methods do you offer?') + '</h6>');
			document.write(translate_sentence('The order will be sent directly to your address') + '. ');
			document.write(translate_sentence('The total shipping time is the order picking + handling time + shipping time') + '. ');
			document.write(translate_sentence('Normally, the processing time is very low') + '. ');
			document.write(translate_sentence('The shipping methods available are') + ':<p>');
			for (var i = 0; i < shipping_types.length; i++) {
				document.write(translate_sentence(shipping_types[i][0]) + ' (' + shipping_types[i][1] + ' ' + translate_sentence('days approx.') + ')<br>');
			}
			document.write('</p><br>* ' + translate_sentence('The shipping time can vary depending on the country') + '. ');
			document.write(translate_sentence('You will choose the shipping method on checkout') + '.');
			document.write('<br/><br/><h6>' + translate_sentence('How do I calculate shipping costs?') + '</h6>');
			if (shipping_method == 1) {
				if (shipping_types.length == 1) {
					document.write(translate_sentence('The shipping cost is') + shipping_types[0][4] + ' ' + translate_sentence('regardless of the products you buy'));
				} else {
					document.write(translate_sentence('The shipping cost will vary depending the shipping method you select') + '. ');
					document.write(translate_sentence('You can see it on checkout') + '.');
				}
			} else {
				document.write(translate_sentence('The shipping cost will vary depending the shipping method you select') + '. ');
				document.write(translate_sentence('The shipping cost will also vary depending on the weight of the products you add to cart') + '.');
			}
			if (track_price !== false) {
				document.write('<br/><br/><h6>' + translate_sentence('How can I track my package?') + '</h6>');
				document.write(translate_sentence('If you choose the tracking number on checkout, you will get your tracking number and you will track') + '.');
			}
			document.write('<br/><br/><h6>' + translate_sentence('Do you ship to my country?') + '</h6>');
			if (world_shipping == true) {
				document.write(translate_sentence('Do not worry! We send to worldwide') + '.');
			} else {
				document.write(translate_sentence('Actually we send to') + ': ');
				if (country_list.length == 1) { document.write(translate_sentence(country_list[0]) + '. '); }
				else {
					for (var i = 0; i < country_list.length; i++) {
						if (i == country_list.length - 1) { document.write(' ' + translate_sentence('and') + ' '); }
						document.write(translate_sentence(country_list[i]));
						if (i != country_list.length - 1) { document.write(', '); }
					}
					document.write('. '+ translate_sentence('If you do not find your county in the list, contact us') + '.');
				}
			}
			document.write('<br/><br/><h6>' + translate_sentence('If custom duties are incurred, who is responsible?') + '</h6>');
			document.write(translate_sentence('It is the responsibility of the customer for any custom duty fees that may be charged upon delivery') + '. ');
			document.write(translate_sentence('The import duty will depend of the custom policies of each country') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('If the Package held by Customs, who will be responsible for Package clearance?') + '</h6>');
			document.write(translate_sentence('If the items are detained by Customs after the shipment is done, the buyer is responsible for clearance of the detained items') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('How do I change my shipping address?') + '</h6>');
			document.write(translate_sentence('If your order has been sent, you cannot change your shipping address. If the packet is not sent, contact us quickly') + '. ');
		}
	}
	//Show Shipping and handling page automatic content

	//Show Payment methods automatic content
	function show_payment_method_page_content() {
		if (checksameurl(location.href, payment_methods_page) == true && payment_methods_auto_content == true) {
			document.write('<h6>' + translate_sentence('How can I pay?') + '</h6>');
			document.write(translate_sentence('You can pay on checkout when you add your product to shopping cart. We have two methods: Credit card and Paypal') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('What credit cards do we accept?') + '</h6>');
			document.write(translate_sentence('We accept the credit cards most used') + ': ' + translate_sentence('Mastercard, Visa, American Express, Discover and Aurora'));
			document.write('<br/><br/><h6>' + translate_sentence('What advantages do I have if I pay with paypal?') + '</h6>');
			document.write(translate_sentence('You can get many advantages') + ': ');
			document.write(translate_sentence('Secure system and secure payments, buy and pay with your mobile or tablet, no membership fees or service charges, discount coupons') + '...');
		}
	}
	//Show Payment methods automatic content

	//Show Satisfaction policy automatic content
	function show_satisfaction_policy_page_content() {
		if (checksameurl(location.href, satisfactionpolicypage) == true && satisfaction_policy_auto_content == true) {
			document.write(translate_sentence('We will try our best to make sure the products shipped to our customers are in good quality') + '. ');
			document.write(translate_sentence('If there are some problems on the goods, you have right to guarantee your benefits') + '. ');
			document.write(translate_sentence('You do not have to worry about anything!') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('Return and refund') + '</h6>');
			document.write(translate_sentence('The products with quality problem can be returned and refund') + '. ');
			document.write(translate_sentence('The customer will need to send the products back to us') + '. ');
			document.write(translate_sentence('When we receive the products, we will give the refund') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('Loss') + '</h6>');
			document.write(translate_sentence('If your packet has been sent but you do not receive the packet, the problem is the carrier') + '. ');
			document.write(translate_sentence('But we want to have satisfied customer') + '. ');
			document.write(translate_sentence('For that, if your packet is lost, we will refund your money or we will send again') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('Replace') + '</h6>');
			document.write(translate_sentence('Products with quality problem can be returned and replaced') + '. ');
			document.write(translate_sentence('Customer need to send the products back to us') + '. ');
			document.write(translate_sentence('When we receive the products, we will replace new ones and ship back to customer') + '. ');
		}
	}
	//Show Satisfaction policy automatic content

	//Show Legal notice automatic content
	function show_legal_notice_page_content() {
		if (checksameurl(location.href, legalnoticepage) == true && legal_notice_auto_content == true) {
			document.write('<div style="text-align: justify;"><h6>' + translate_sentence('1.- INTRODUCTION') + '</h6>');
			document.write(translate_sentence('This document is intended to establish and regulate the terms of use and safeguarding the data of the site') + ' (' + document.domain + '), ');
			document.write(translate_sentence('(from now on called “the Site”) understanding that the site has all the pages and contents owned by') + ' ' + company_name + ' ' + translate_sentence('which is accessed through the domain') + '. ');
			document.write(translate_sentence('The use of this site as well as the services it offers to the user, implies full and unreserved acceptance of each and every one of the conditions contained in this Legal Notice (from here on "General Conditions ")') + ', ');
			document.write(translate_sentence('so the user should be aware of the importance of reading them each time the user visits the Site') + '. ');
			document.write(translate_sentence('Accessing the Site implies knowing and  accepting the following "General Conditions" which') + ' ' + company_name + ' ');
			document.write(translate_sentence('recommends the users to print or download and read  carefully each time the user accesses the Site') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('2.-GENERAL INFORMATION') + '</h6>');
			document.write(translate_sentence('In compliance with the duty to inform the customer contained in Article 10 of Law 34/2002, of July 11, of the Society Services of the Information  and Electronic Commerce, below we reflect the following') + ': ');
			if (show_if_enabled(company_address) !== false || show_company_location === true) {
				document.write(company_name + ' ');
				if (show_if_enabled(VAT_Tax_ID) !== false) { document.write('(' + VAT_Tax_ID + ')'); }
				document.write(' ' + translate_sentence('is an entity from') + ' ');
				if (show_if_enabled(company_address) !== false) { document.write(translate_sentence(company_address) + ', '); }
				if (show_company_location === true) { document.write(translate_sentence(company_city) + ' (' + translate_sentence(company_country) + ')'); }
				document.write('. ');
			}
			document.write(translate_sentence('The email contact is') + ' ' + company_email + ', ' + translate_sentence('and the telephone') + ': ' + phone_number );
			document.write('<br/><br/><h6>' + translate_sentence('3. - USE OF THE SITE') + '</h6>');
			document.write(translate_sentence('By accepting these Terms the user agrees to use the Website and the services it provides in the way, the manner and form in which it is established') + '. ');
			document.write(translate_sentence('Users may not use this Site and its services for illegal and / or contrary purposes against those  stated in the General Conditions, which may be detrimental to the rights and / or interests of others or in any way damage the Site preventing it or its present and future services to work') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('4.- SCOPE OF THE SITE. USER RESPONSIBILITY') + '</h6>');
			document.write(translate_sentence('The access to this site is the sole responsibility of the users. That includes any risks arising from the use of the Site') + '. ');
			document.write(company_name + ' ' + translate_sentence('does NOT guarantee') + ':<br>' + translate_sentence('(I) The infallibility, availability, continuity, absence of defects or safety of the Site') + '.<br>');
			document.write(translate_sentence('(II) The content of the Site or the information passing through it are free of viruses or other harmful elements such as errors, omissions or inaccuracies') + '.<br>');
			document.write(translate_sentence('(III) The safety of the user of the Website; The size not be liable for any loss or damage that may arise from interferences, omissions, interruptions, computer viruses, telephone faults or disconnections in the operational functioning of this electronic system , due to causes unrelated to the Site, the delays or blockages in the use of this electronic system caused by deficiencies or overloading in the data processing Centre, telephone lines, in the Internet system or other electronic systems, nor damage that may be caused by third parties through illegalities beyond the control of the Site') + '.<br>');
			document.write(translate_sentence('It also exempts the Site from liability for any loss or damage incurred by you as a result of errors, defects or omissions in the information provided by the Site provided from outside sources') + '. ');
			document.write(translate_sentence('Mere access to the Site does not imply any kind of commercial relationship between the user and the Site') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('5.- UPDATING AND MODIFICATION OF INFORMATION') + '</h6>');
			document.write(translate_sentence('The information on this site is accurate at the date of the last update. The Site reserves the right to update, modify or delete information on this Site, and may limit or deny access. The Site reserves the right to make, at any time, changes and modifications deemed desirable, and may exercise this right at any time and without notice') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('6.- CONTENTS') + '</h6>');
			document.write(translate_sentence('The Site does not guarantee, or accepts responsibility for the consequences that may result from errors in the contents appearing on the Site provided by others. The Site is not responsible in any way for the contents, commercial activities, products and services that can be viewed through electronic links (links) if there were any, and if there were, directly or indirectly, through this Site') + '. ');
			document.write(translate_sentence('The presence of links in the the Site Website, unless expressly stated otherwise, is for informational purposes only and in no way a suggestion, invitation or recommendation thereof. These links do not represent any kind of relationship between the Site and companies or owners of the websites that can be accessed through these links. The Site reserves the right to withdraw unilaterally and at any time and without notice the link from its Site') + '. ');
			document.write(translate_sentence('The Site reserves the right to prevent or prohibit access to the Site to any Internet user to enter this site any content contrary to legal or moral standards, reserving the right to pursue legal action it deems necessary to prevent such behaviours') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('7.- NAVIGATION, ACCESS AND SECURITY') + '</h6>');
			document.write(translate_sentence('The Site Central makes every effort to ensure that browsing takes place under optimum conditions and to avoid any type of damage that may occur during the same. The Site is not liable for damages of any kind that may be caused to users by using other browsers or different versions of the browsers for which the Site is designed') + '. ');
			document.write(translate_sentence('The Site makes no representation or guarantee that access to this Site will be uninterrupted or error free. No responsibility or guarantee that the content or software that can be accessed through this site is free from error or cause damage. The Site, in no event, can be liable for any losses or damages of any kind arising from the access and use of the Site, including but not limited to damage to systems or those caused by a virus') + '. ');
			document.write(translate_sentence('The Site is not responsible for any damage that may be caused to users by improper use of this Site. In particular, is not responsible in any way for breakdowns, interruptions, faults or defects in telecommunications that may occur. The services offered on the Site may only be used correctly if they meet the technical specifications for which it was designed') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('8.- DATA PROTECTION') + '</h6>');
			document.write(translate_sentence('The processing of personal data and sending electronic communications are regulated by  the rules established in the Organic Law') + '. ');
			document.write(translate_sentence('In accordance with the provisions of the current legislation on data protection, we inform you that your personal data will be incorporated into the Site Personnel Selection file in order to have your professional history for selection and contractual purposes') + '. ');
			document.write(translate_sentence('Also, unless stated otherwise, the Site and any of the Companies that make up the Site, shall have access to your personal information, solely for the purposes described above. The Site guarantees the right to access, rectify, cancel and object to the processing of data which must be notified in writing') + '. ');
			document.write(translate_sentence('If after one year from the inclusion of your personal data you have not heard from us, we will proceed to erase the data from our file') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('9.- USE OF COOKIES') + '</h6>');
			document.write(translate_sentence('Access to the Website may imply the use of cookies on its pages and those pages linked or referenced through links. Users who do not wish to receive cookies or want to be informed of their use may configure your browser accordingly') + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('10.- INTELLECTUAL PROPERTY AND COPYRIGHT') + '</h6>');
			document.write(translate_sentence('The Site declares that unless otherwise indicated in the Site, text, images, illustrations, designs, icons, photographs, video clips, sound clips and other materials found on the Site and any other intellectual creations and / or inventions or scientific and technical discoveries, whatever their commercial or industrial application (from here on  collectively named "Content") have been created or invented by the Site or transferred, licensed, transmitted or authorized by the owners and / or assignees') + '. ');
			document.write(translate_sentence('The User agrees not to remove or alter any distinctive sign used on the Site, including, but not be limited, brand names, trademarks (graphics, logos, etc), the "copyright" and other data identifying the rights of the Site or third parties on the Website') + '. ');
			document.write(translate_sentence('The Site own all rights over any works, inventions, discoveries, patents, ideas, concepts, updates and improvements related to the Site,  systems, applications and programs or services provided by the Site, which are created , made, developed or implemented first by the Site either alone or with the help of users of the Site, during or as a result of a design, development or other activity performed in accordance with the Contract') + '. ');
			document.write(translate_sentence('You may not use the name, trademarks, symbols, logos or distinctive signs of ownership by the Site without the express written consent of the latter') + '. ');
			document.write(translate_sentence('In the event that any user or third party considers that any of the content on the site is in violation of copyright or other rights of intellectual property protection, please notify us at') + ': ' + company_email + '. ');
			document.write('<br/><br/><h6>' + translate_sentence('11.- JURISDICTION AND LAW') + '</h6>');
			document.write(translate_sentence('The Terms of Use that are in this Agreement are governed by law. Both the Site and the users of the Site agree that any dispute that may arise regarding the interpretation, compliance and / or enforcement of these rules shall be subject to the jurisdiction of the Courts and Tribunals , with expressly waive any other jurisdiction that may correspond') + '. ');
			document.write(translate_sentence('</div>'));	//Justify
		}
	}
	//Show Legal notice automatic content

	//Show the signature static pages
	function show_signature_static_page() {
		if (checksameurl(location.href, checkoutpage) == false) {	// We discard the checkout
			if (selected_language == 'en') {
				document.write('<br/>' + company_name + ' ' + translate_sentence('team') + '.<br/><br/>');
			} else {
				document.write('<br/>' + translate_sentence('team') + ' ' + company_name + '.<br/><br/>');
			}
		}
	}
	//Show the signature static pages
	
}







//------------------------------------ ITEM FUNCTIONS --------------------------------------------------------------------------------------------------

//Item files
if (get_pagetype() === 'item') {
	
/******************************************************************************************************************************************************

																Galleria

*******************************************************************************************************************************************************/
	
	
/**
 * Galleria v 1.3.5 2014-01-25
 * http://galleria.io
 * Licensed under the MIT license
 * https://raw.github.com/aino/galleria/master/LICENSE (JO4)
 *
 */

(function( $, window, Galleria, undef ) {

/*global jQuery, navigator, Image, module, define */

// some references
var doc    = window.document,
    $doc   = $( doc ),
    $win   = $( window ),

// native prototypes
    protoArray = Array.prototype,

// internal constants
    VERSION = 1.35,
    DEBUG = true,
    TIMEOUT = 30000,
    DUMMY = false,
    NAV = navigator.userAgent.toLowerCase(),
    HASH = window.location.hash.replace(/#\//, ''),
    PROT = window.location.protocol,
    M = Math,
    F = function(){},
    FALSE = function() { return false; },
    IE = (function() {

        var v = 3,
            div = doc.createElement( 'div' ),
            all = div.getElementsByTagName( 'i' );

        do {
            div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->';
        } while ( all[0] );

        return v > 4 ? v : doc.documentMode || undef;

    }() ),
    DOM = function() {
        return {
            html:  doc.documentElement,
            body:  doc.body,
            head:  doc.getElementsByTagName('head')[0],
            title: doc.title
        };
    },
    IFRAME = window.parent !== window.self,

    // list of Galleria events
    _eventlist = 'data ready thumbnail loadstart loadfinish image play pause progress ' +
                 'fullscreen_enter fullscreen_exit idle_enter idle_exit rescale ' +
                 'lightbox_open lightbox_close lightbox_image',

    _events = (function() {

        var evs = [];

        $.each( _eventlist.split(' '), function( i, ev ) {
            evs.push( ev );

            // legacy events
            if ( /_/.test( ev ) ) {
                evs.push( ev.replace( /_/g, '' ) );
            }
        });

        return evs;

    }()),

    // legacy options
    // allows the old my_setting syntax and converts it to camel case

    _legacyOptions = function( options ) {

        var n;

        if ( typeof options !== 'object' ) {

            // return whatever it was...
            return options;
        }

        $.each( options, function( key, value ) {
            if ( /^[a-z]+_/.test( key ) ) {
                n = '';
                $.each( key.split('_'), function( i, k ) {
                    n += i > 0 ? k.substr( 0, 1 ).toUpperCase() + k.substr( 1 ) : k;
                });
                options[ n ] = value;
                delete options[ key ];
            }
        });

        return options;
    },

    _patchEvent = function( type ) {

        // allow 'image' instead of Galleria.IMAGE
        if ( $.inArray( type, _events ) > -1 ) {
            return Galleria[ type.toUpperCase() ];
        }

        return type;
    },

    // video providers
    _video = {
        youtube: {
            reg: /https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,
            embed: function() {
                return 'http://www.youtube.com/embed/' + this.id;
            },
            getUrl: function() {
                return PROT + '//gdata.youtube.com/feeds/api/videos/' + this.id + '?v=2&alt=json-in-script&callback=?';
            },
            get_thumb: function(data) {
                return data.entry.media$group.media$thumbnail[2].url;
            },
            get_image: function(data) {
                if ( data.entry.yt$hd ) {
                    return PROT + '//img.youtube.com/vi/'+this.id+'/maxresdefault.jpg';
                }
                return data.entry.media$group.media$thumbnail[3].url;
            }
        },
        vimeo: {
            reg: /https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,
            embed: function() {
                return 'http://player.vimeo.com/video/' + this.id;
            },
            getUrl: function() {
                return PROT + '//vimeo.com/api/v2/video/' + this.id + '.json?callback=?';
            },
            get_thumb: function( data ) {
                return data[0].thumbnail_medium;
            },
            get_image: function( data ) {
                return data[0].thumbnail_large;
            }
        },
        dailymotion: {
            reg: /https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,
            embed: function() {
                return PROT + '//www.dailymotion.com/embed/video/' + this.id;
            },
            getUrl: function() {
                return 'https://api.dailymotion.com/video/' + this.id + '?fields=thumbnail_240_url,thumbnail_720_url&callback=?';
            },
            get_thumb: function( data ) {
                return data.thumbnail_240_url;
            },
            get_image: function( data ) {
                return data.thumbnail_720_url;
            }
        },
        _inst: []
    },
    Video = function( type, id ) {

        for( var i=0; i<_video._inst.length; i++ ) {
            if ( _video._inst[i].id === id && _video._inst[i].type == type ) {
                return _video._inst[i];
            }
        }

        this.type = type;
        this.id = id;
        this.readys = [];

        _video._inst.push(this);

        var self = this;

        $.extend( this, _video[type] );

        $.getJSON( this.getUrl(), function(data) {
            self.data = data;
            $.each( self.readys, function( i, fn ) {
                fn( self.data );
            });
            self.readys = [];
        });

        this.getMedia = function( type, callback, fail ) {
            fail = fail || F;
            var self = this;
            var success = function( data ) {
                callback( self['get_'+type]( data ) );
            };
            try {
                if ( self.data ) {
                    success( self.data );
                } else {
                    self.readys.push( success );
                }
            } catch(e) {
                fail();
            }
        };
    },

    // utility for testing the video URL and getting the video ID
    _videoTest = function( url ) {
        var match;
        for ( var v in _video ) {
            match = url && _video[v].reg && url.match( _video[v].reg );
            if( match && match.length ) {
                return {
                    id: match[2],
                    provider: v
                };
            }
        }
        return false;
    },

    // native fullscreen handler
    _nativeFullscreen = {

        support: (function() {
            var html = DOM().html;
            return !IFRAME && ( html.requestFullscreen || html.mozRequestFullScreen || html.webkitRequestFullScreen );
        }()),

        callback: F,

        enter: function( instance, callback, elem ) {

            this.instance = instance;

            this.callback = callback || F;

            elem = elem || DOM().html;
            if ( elem.requestFullscreen ) {
                elem.requestFullscreen();
            }
            else if ( elem.mozRequestFullScreen ) {
                elem.mozRequestFullScreen();
            }
            else if ( elem.webkitRequestFullScreen ) {
                elem.webkitRequestFullScreen();
            }
        },

        exit: function( callback ) {

            this.callback = callback || F;

            if ( doc.exitFullscreen ) {
                doc.exitFullscreen();
            }
            else if ( doc.mozCancelFullScreen ) {
                doc.mozCancelFullScreen();
            }
            else if ( doc.webkitCancelFullScreen ) {
                doc.webkitCancelFullScreen();
            }
        },

        instance: null,

        listen: function() {

            if ( !this.support ) {
                return;
            }

            var handler = function() {

                if ( !_nativeFullscreen.instance ) {
                    return;
                }
                var fs = _nativeFullscreen.instance._fullscreen;

                if ( doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen ) {
                    fs._enter( _nativeFullscreen.callback );
                } else {
                    fs._exit( _nativeFullscreen.callback );
                }
            };
            doc.addEventListener( 'fullscreenchange', handler, false );
            doc.addEventListener( 'mozfullscreenchange', handler, false );
            doc.addEventListener( 'webkitfullscreenchange', handler, false );
        }
    },

    // the internal gallery holder
    _galleries = [],

    // the internal instance holder
    _instances = [],

    // flag for errors
    _hasError = false,

    // canvas holder
    _canvas = false,

    // instance pool, holds the galleries until themeLoad is triggered
    _pool = [],

    // themeLoad trigger
    _themeLoad = function( theme ) {

        Galleria.theme = theme;

        // run the instances we have in the pool
        $.each( _pool, function( i, instance ) {
            if ( !instance._initialized ) {
                instance._init.call( instance );
            }
        });

        _pool = [];
    },

    // the Utils singleton
    Utils = (function() {

        return {

            // legacy support for clearTimer
            clearTimer: function( id ) {
                $.each( Galleria.get(), function() {
                    this.clearTimer( id );
                });
            },

            // legacy support for addTimer
            addTimer: function( id ) {
                $.each( Galleria.get(), function() {
                    this.addTimer( id );
                });
            },

            array : function( obj ) {
                return protoArray.slice.call(obj, 0);
            },

            create : function( className, nodeName ) {
                nodeName = nodeName || 'div';
                var elem = doc.createElement( nodeName );
                elem.className = className;
                return elem;
            },

            removeFromArray : function( arr, elem ) {
                $.each(arr, function(i, el) {
                    if ( el == elem ) {
                        arr.splice(i, 1);
                        return false;
                    }
                });
                return arr;
            },

            getScriptPath : function( src ) {

                // the currently executing script is always the last
                src = src || $('script:last').attr('src');
                var slices = src.split('/');

                if (slices.length == 1) {
                    return '';
                }

                slices.pop();

                return slices.join('/') + '/';
            },

            // CSS3 transitions, added in 1.2.4
            animate : (function() {

                // detect transition
                var transition = (function( style ) {
                    var props = 'transition WebkitTransition MozTransition OTransition'.split(' '),
                        i;

                    // disable css3 animations in opera until stable
                    if ( window.opera ) {
                        return false;
                    }

                    for ( i = 0; props[i]; i++ ) {
                        if ( typeof style[ props[ i ] ] !== 'undefined' ) {
                            return props[ i ];
                        }
                    }
                    return false;
                }(( doc.body || doc.documentElement).style ));

                // map transitionend event
                var endEvent = {
                    MozTransition: 'transitionend',
                    OTransition: 'oTransitionEnd',
                    WebkitTransition: 'webkitTransitionEnd',
                    transition: 'transitionend'
                }[ transition ];

                // map bezier easing conversions
                var easings = {
                    _default: [0.25, 0.1, 0.25, 1],
                    galleria: [0.645, 0.045, 0.355, 1],
                    galleriaIn: [0.55, 0.085, 0.68, 0.53],
                    galleriaOut: [0.25, 0.46, 0.45, 0.94],
                    ease: [0.25, 0, 0.25, 1],
                    linear: [0.25, 0.25, 0.75, 0.75],
                    'ease-in': [0.42, 0, 1, 1],
                    'ease-out': [0, 0, 0.58, 1],
                    'ease-in-out': [0.42, 0, 0.58, 1]
                };

                // function for setting transition css for all browsers
                var setStyle = function( elem, value, suffix ) {
                    var css = {};
                    suffix = suffix || 'transition';
                    $.each( 'webkit moz ms o'.split(' '), function() {
                        css[ '-' + this + '-' + suffix ] = value;
                    });
                    elem.css( css );
                };

                // clear styles
                var clearStyle = function( elem ) {
                    setStyle( elem, 'none', 'transition' );
                    if ( Galleria.WEBKIT && Galleria.TOUCH ) {
                        setStyle( elem, 'translate3d(0,0,0)', 'transform' );
                        if ( elem.data('revert') ) {
                            elem.css( elem.data('revert') );
                            elem.data('revert', null);
                        }
                    }
                };

                // various variables
                var change, strings, easing, syntax, revert, form, css;

                // the actual animation method
                return function( elem, to, options ) {

                    // extend defaults
                    options = $.extend({
                        duration: 400,
                        complete: F,
                        stop: false
                    }, options);

                    // cache jQuery instance
                    elem = $( elem );

                    if ( !options.duration ) {
                        elem.css( to );
                        options.complete.call( elem[0] );
                        return;
                    }

                    // fallback to jQuery's animate if transition is not supported
                    if ( !transition ) {
                        elem.animate(to, options);
                        return;
                    }

                    // stop
                    if ( options.stop ) {
                        // clear the animation
                        elem.off( endEvent );
                        clearStyle( elem );
                    }

                    // see if there is a change
                    change = false;
                    $.each( to, function( key, val ) {
                        css = elem.css( key );
                        if ( Utils.parseValue( css ) != Utils.parseValue( val ) ) {
                            change = true;
                        }
                        // also add computed styles for FF
                        elem.css( key, css );
                    });
                    if ( !change ) {
                        window.setTimeout( function() {
                            options.complete.call( elem[0] );
                        }, options.duration );
                        return;
                    }

                    // the css strings to be applied
                    strings = [];

                    // the easing bezier
                    easing = options.easing in easings ? easings[ options.easing ] : easings._default;

                    // the syntax
                    syntax = ' ' + options.duration + 'ms' + ' cubic-bezier('  + easing.join(',') + ')';

                    // add a tiny timeout so that the browsers catches any css changes before animating
                    window.setTimeout( (function(elem, endEvent, to, syntax) {
                        return function() {

                            // attach the end event
                            elem.one(endEvent, (function( elem ) {
                                return function() {

                                    // clear the animation
                                    clearStyle(elem);

                                    // run the complete method
                                    options.complete.call(elem[0]);
                                };
                            }( elem )));

                            // do the webkit translate3d for better performance on iOS
                            if( Galleria.WEBKIT && Galleria.TOUCH ) {

                                revert = {};
                                form = [0,0,0];

                                $.each( ['left', 'top'], function(i, m) {
                                    if ( m in to ) {
                                        form[ i ] = ( Utils.parseValue( to[ m ] ) - Utils.parseValue(elem.css( m )) ) + 'px';
                                        revert[ m ] = to[ m ];
                                        delete to[ m ];
                                    }
                                });

                                if ( form[0] || form[1]) {

                                    elem.data('revert', revert);

                                    strings.push('-webkit-transform' + syntax);

                                    // 3d animate
                                    setStyle( elem, 'translate3d(' + form.join(',') + ')', 'transform');
                                }
                            }

                            // push the animation props
                            $.each(to, function( p, val ) {
                                strings.push(p + syntax);
                            });

                            // set the animation styles
                            setStyle( elem, strings.join(',') );

                            // animate
                            elem.css( to );

                        };
                    }(elem, endEvent, to, syntax)), 2);
                };
            }()),

            removeAlpha : function( elem ) {
                if ( elem instanceof jQuery ) {
                    elem = elem[0];
                }
                if ( IE < 9 && elem ) {

                    var style = elem.style,
                        currentStyle = elem.currentStyle,
                        filter = currentStyle && currentStyle.filter || style.filter || "";

                    if ( /alpha/.test( filter ) ) {
                        style.filter = filter.replace( /alpha\([^)]*\)/i, '' );
                    }
                }
            },

            forceStyles : function( elem, styles ) {
                elem = $(elem);
                if ( elem.attr( 'style' ) ) {
                    elem.data( 'styles', elem.attr( 'style' ) ).removeAttr( 'style' );
                }
                elem.css( styles );
            },

            revertStyles : function() {
                $.each( Utils.array( arguments ), function( i, elem ) {

                    elem = $( elem );
                    elem.removeAttr( 'style' );

                    elem.attr('style',''); // "fixes" webkit bug

                    if ( elem.data( 'styles' ) ) {
                        elem.attr( 'style', elem.data('styles') ).data( 'styles', null );
                    }
                });
            },

            moveOut : function( elem ) {
                Utils.forceStyles( elem, {
                    position: 'absolute',
                    left: -10000
                });
            },

            moveIn : function() {
                Utils.revertStyles.apply( Utils, Utils.array( arguments ) );
            },

            hide : function( elem, speed, callback ) {

                callback = callback || F;

                var $elem = $(elem);
                elem = $elem[0];

                // save the value if not exist
                if (! $elem.data('opacity') ) {
                    $elem.data('opacity', $elem.css('opacity') );
                }

                // always hide
                var style = { opacity: 0 };

                if (speed) {

                    var complete = IE < 9 && elem ? function() {
                        Utils.removeAlpha( elem );
                        elem.style.visibility = 'hidden';
                        callback.call( elem );
                    } : callback;

                    Utils.animate( elem, style, {
                        duration: speed,
                        complete: complete,
                        stop: true
                    });
                } else {
                    if ( IE < 9 && elem ) {
                        Utils.removeAlpha( elem );
                        elem.style.visibility = 'hidden';
                    } else {
                        $elem.css( style );
                    }
                }
            },

            show : function( elem, speed, callback ) {

                callback = callback || F;

                var $elem = $(elem);
                elem = $elem[0];

                // bring back saved opacity
                var saved = parseFloat( $elem.data('opacity') ) || 1,
                    style = { opacity: saved };

                // animate or toggle
                if (speed) {

                    if ( IE < 9 ) {
                        $elem.css('opacity', 0);
                        elem.style.visibility = 'visible';
                    }

                    var complete = IE < 9 && elem ? function() {
                        if ( style.opacity == 1 ) {
                            Utils.removeAlpha( elem );
                        }
                        callback.call( elem );
                    } : callback;

                    Utils.animate( elem, style, {
                        duration: speed,
                        complete: complete,
                        stop: true
                    });
                } else {
                    if ( IE < 9 && style.opacity == 1 && elem ) {
                        Utils.removeAlpha( elem );
                        elem.style.visibility = 'visible';
                    } else {
                        $elem.css( style );
                    }
                }
            },

            wait : function(options) {

                Galleria._waiters = Galleria._waiters || [];

                options = $.extend({
                    until : FALSE,
                    success : F,
                    error : function() { Galleria.raise('Could not complete wait function.'); },
                    timeout: 3000
                }, options);

                var start = Utils.timestamp(),
                    elapsed,
                    now,
                    tid,
                    fn = function() {
                        now = Utils.timestamp();
                        elapsed = now - start;
                        Utils.removeFromArray( Galleria._waiters, tid );
                        if ( options.until( elapsed ) ) {
                            options.success();
                            return false;
                        }
                        if (typeof options.timeout == 'number' && now >= start + options.timeout) {
                            options.error();
                            return false;
                        }
                        Galleria._waiters.push( tid = window.setTimeout(fn, 10) );
                    };
                Galleria._waiters.push( tid = window.setTimeout(fn, 10) );
            },

            toggleQuality : function( img, force ) {

                if ( ( IE !== 7 && IE !== 8 ) || !img || img.nodeName.toUpperCase() != 'IMG' ) {
                    return;
                }

                if ( typeof force === 'undefined' ) {
                    force = img.style.msInterpolationMode === 'nearest-neighbor';
                }

                img.style.msInterpolationMode = force ? 'bicubic' : 'nearest-neighbor';
            },

            insertStyleTag : function( styles, id ) {

                if ( id && $( '#'+id ).length ) {
                    return;
                }

                var style = doc.createElement( 'style' );
                if ( id ) {
                    style.id = id;
                }

                DOM().head.appendChild( style );

                if ( style.styleSheet ) { // IE
                    style.styleSheet.cssText = styles;
                } else {
                    var cssText = doc.createTextNode( styles );
                    style.appendChild( cssText );
                }
            },

            // a loadscript method that works for local scripts
            loadScript: function( url, callback ) {

                var done = false,
                    script = $('<scr'+'ipt>').attr({
                        src: url,
                        async: true
                    }).get(0);

               // Attach handlers for all browsers
               script.onload = script.onreadystatechange = function() {
                   if ( !done && (!this.readyState ||
                       this.readyState === 'loaded' || this.readyState === 'complete') ) {

                       done = true;

                       // Handle memory leak in IE
                       script.onload = script.onreadystatechange = null;

                       if (typeof callback === 'function') {
                           callback.call( this, this );
                       }
                   }
               };

               DOM().head.appendChild( script );
            },

            // parse anything into a number
            parseValue: function( val ) {
                if (typeof val === 'number') {
                    return val;
                } else if (typeof val === 'string') {
                    var arr = val.match(/\-?\d|\./g);
                    return arr && arr.constructor === Array ? arr.join('')*1 : 0;
                } else {
                    return 0;
                }
            },

            // timestamp abstraction
            timestamp: function() {
                return new Date().getTime();
            },

            loadCSS : function( href, id, callback ) {

                var link,
                    length;

                // look for manual css
                $('link[rel=stylesheet]').each(function() {
                    if ( new RegExp( href ).test( this.href ) ) {
                        link = this;
                        return false;
                    }
                });

                if ( typeof id === 'function' ) {
                    callback = id;
                    id = undef;
                }

                callback = callback || F; // dirty

                // if already present, return
                if ( link ) {
                    callback.call( link, link );
                    return link;
                }

                // save the length of stylesheets to check against
                length = doc.styleSheets.length;

                // check for existing id
                if( $( '#' + id ).length ) {

                    $( '#' + id ).attr( 'href', href );
                    length--;

                } else {
                    link = $( '<link>' ).attr({
                        rel: 'stylesheet',
                        href: href,
                        id: id
                    }).get(0);

                    var styles = $('link[rel="stylesheet"], style');
                    if ( styles.length ) {
                        styles.get(0).parentNode.insertBefore( link, styles[0] );
                    } else {
                        DOM().head.appendChild( link );
                    }

                    if ( IE && length >= 31 ) {
                        Galleria.raise( 'You have reached the browser stylesheet limit (31)', true );
                        return;
                    }
                }

                if ( typeof callback === 'function' ) {

                    // First check for dummy element (new in 1.2.8)
                    var $loader = $('<s>').attr( 'id', 'galleria-loader' ).hide().appendTo( DOM().body );

                    Utils.wait({
                        until: function() {
                            return $loader.height() == 1;
                        },
                        success: function() {
                            $loader.remove();
                            callback.call( link, link );
                        },
                        error: function() {
                            $loader.remove();

                            // If failed, tell the dev to download the latest theme
                            Galleria.raise( 'Theme CSS could not load after 20 sec. ' + ( Galleria.QUIRK ?
                                'Your browser is in Quirks Mode, please add a correct doctype.' :
                                'Please download the latest theme at http://galleria.io/customer/.' ), true );
                        },
                        timeout: 5000
                    });
                }
                return link;
            }
        };
    }()),

    // play icon
    _playIcon = function( container ) {

        var css = '.galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;' +
                  'margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}' +
                  '.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;' +
                  'border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}';

        Utils.insertStyleTag( css, 'galleria-videoicon' );

        return $( Utils.create( 'galleria-videoicon' ) ).html( '<i></i>' ).appendTo( container )
            .click( function() { $( this ).siblings( 'img' ).mouseup(); });
    },

    // the transitions holder
    _transitions = (function() {

        var _slide = function(params, complete, fade, door) {

            var easing = this.getOptions('easing'),
                distance = this.getStageWidth(),
                from = { left: distance * ( params.rewind ? -1 : 1 ) },
                to = { left: 0 };

            if ( fade ) {
                from.opacity = 0;
                to.opacity = 1;
            } else {
                from.opacity = 1;
            }

            $(params.next).css(from);

            Utils.animate(params.next, to, {
                duration: params.speed,
                complete: (function( elems ) {
                    return function() {
                        complete();
                        elems.css({
                            left: 0
                        });
                    };
                }( $( params.next ).add( params.prev ) )),
                queue: false,
                easing: easing
            });

            if (door) {
                params.rewind = !params.rewind;
            }

            if (params.prev) {

                from = { left: 0 };
                to = { left: distance * ( params.rewind ? 1 : -1 ) };

                if ( fade ) {
                    from.opacity = 1;
                    to.opacity = 0;
                }

                $(params.prev).css(from);
                Utils.animate(params.prev, to, {
                    duration: params.speed,
                    queue: false,
                    easing: easing,
                    complete: function() {
                        $(this).css('opacity', 0);
                    }
                });
            }
        };

        return {

            active: false,

            init: function( effect, params, complete ) {
                if ( _transitions.effects.hasOwnProperty( effect ) ) {
                    _transitions.effects[ effect ].call( this, params, complete );
                }
            },

            effects: {

                fade: function(params, complete) {
                    $(params.next).css({
                        opacity: 0,
                        left: 0
                    });
                    Utils.animate(params.next, {
                        opacity: 1
                    },{
                        duration: params.speed,
                        complete: complete
                    });
                    if (params.prev) {
                        $(params.prev).css('opacity',1).show();
                        Utils.animate(params.prev, {
                            opacity: 0
                        },{
                            duration: params.speed
                        });
                    }
                },

                flash: function(params, complete) {
                    $(params.next).css({
                        opacity: 0,
                        left: 0
                    });
                    if (params.prev) {
                        Utils.animate( params.prev, {
                            opacity: 0
                        },{
                            duration: params.speed/2,
                            complete: function() {
                                Utils.animate( params.next, {
                                    opacity:1
                                },{
                                    duration: params.speed,
                                    complete: complete
                                });
                            }
                        });
                    } else {
                        Utils.animate( params.next, {
                            opacity: 1
                        },{
                            duration: params.speed,
                            complete: complete
                        });
                    }
                },

                pulse: function(params, complete) {
                    if (params.prev) {
                        $(params.prev).hide();
                    }
                    $(params.next).css({
                        opacity: 0,
                        left: 0
                    }).show();
                    Utils.animate(params.next, {
                        opacity:1
                    },{
                        duration: params.speed,
                        complete: complete
                    });
                },

                slide: function(params, complete) {
                    _slide.apply( this, Utils.array( arguments ) );
                },

                fadeslide: function(params, complete) {
                    _slide.apply( this, Utils.array( arguments ).concat( [true] ) );
                },

                doorslide: function(params, complete) {
                    _slide.apply( this, Utils.array( arguments ).concat( [false, true] ) );
                }
            }
        };
    }());

// listen to fullscreen
_nativeFullscreen.listen();

// create special click:fast event for fast touch interaction
$.event.special['click:fast'] = {
    propagate: true,
    add: function(handleObj) {
        var prop = this.propagate;
        if ( Galleria.TOUCH ) {
            $(this).on('touchstart.fast', function start(e) {
                var ev = e.originalEvent,
                    x, y, dist = 0;
                if ( ev.touches.length == 1 ) {
                    x = ev.touches[0].pageX;
                    y = ev.touches[0].pageY;
                    $(this).on('touchmove.fast', function(f) {
                        var ft = f.originalEvent.touches;
                        if ( ft.length == 1 ) {
                            dist = M.max(
                                M.abs( x - ft[0].pageX ),
                                M.abs( y - ft[0].pageY )
                            );
                        }
                    });
                    $(this).on('touchend.fast', function() {
                        if( dist > 4 ) {
                            return $(this).off('touchend.fast touchmove.fast');
                        }
                        handleObj.handler.call(this, e);
                        $(this).off('touchend.fast touchmove.fast');
                    });
                }
            });
        } else {
            $(this).on('click.fast', handleObj.handler);
        }
    },
    remove: function(handleObj) {
        if ( Galleria.TOUCH ) {
            $(this).off('touchstart.fast touchmove.fast touchend.fast');
        } else {
            $(this).off('click.fast', handleObj.handler);
        }
    }
};

// trigger resize on orientationchange (IOS7)
$win.on( 'orientationchange', function() {
    $(this).resize();
});

/**
    The main Galleria class

    @class
    @constructor

    @example var gallery = new Galleria();

    @author http://aino.se

    @requires jQuery

*/

Galleria = function() {

    var self = this;

    // internal options
    this._options = {};

    // flag for controlling play/pause
    this._playing = false;

    // internal interval for slideshow
    this._playtime = 5000;

    // internal variable for the currently active image
    this._active = null;

    // the internal queue, arrayified
    this._queue = { length: 0 };

    // the internal data array
    this._data = [];

    // the internal dom collection
    this._dom = {};

    // the internal thumbnails array
    this._thumbnails = [];

    // the internal layers array
    this._layers = [];

    // internal init flag
    this._initialized = false;

    // internal firstrun flag
    this._firstrun = false;

    // global stagewidth/height
    this._stageWidth = 0;
    this._stageHeight = 0;

    // target holder
    this._target = undef;

    // bind hashes
    this._binds = [];

    // instance id
    this._id = parseInt(M.random()*10000, 10);

    // add some elements
    var divs =  'container stage images image-nav image-nav-left image-nav-right ' +
                'info info-text info-title info-description ' +
                'thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right ' +
                'loader counter tooltip',
        spans = 'current total';

    $.each( divs.split(' '), function( i, elemId ) {
        self._dom[ elemId ] = Utils.create( 'galleria-' + elemId );
    });

    $.each( spans.split(' '), function( i, elemId ) {
        self._dom[ elemId ] = Utils.create( 'galleria-' + elemId, 'span' );
    });

    // the internal keyboard object
    // keeps reference of the keybinds and provides helper methods for binding keys
    var keyboard = this._keyboard = {

        keys : {
            'UP': 38,
            'DOWN': 40,
            'LEFT': 37,
            'RIGHT': 39,
            'RETURN': 13,
            'ESCAPE': 27,
            'BACKSPACE': 8,
            'SPACE': 32
        },

        map : {},

        bound: false,

        press: function(e) {
            var key = e.keyCode || e.which;
            if ( key in keyboard.map && typeof keyboard.map[key] === 'function' ) {
                keyboard.map[key].call(self, e);
            }
        },

        attach: function(map) {

            var key, up;

            for( key in map ) {
                if ( map.hasOwnProperty( key ) ) {
                    up = key.toUpperCase();
                    if ( up in keyboard.keys ) {
                        keyboard.map[ keyboard.keys[up] ] = map[key];
                    } else {
                        keyboard.map[ up ] = map[key];
                    }
                }
            }
            if ( !keyboard.bound ) {
                keyboard.bound = true;
                $doc.on('keydown', keyboard.press);
            }
        },

        detach: function() {
            keyboard.bound = false;
            keyboard.map = {};
            $doc.off('keydown', keyboard.press);
        }
    };

    // internal controls for keeping track of active / inactive images
    var controls = this._controls = {

        0: undef,

        1: undef,

        active : 0,

        swap : function() {
            controls.active = controls.active ? 0 : 1;
        },

        getActive : function() {
            return self._options.swipe ? controls.slides[ self._active ] : controls[ controls.active ];
        },

        getNext : function() {
            return self._options.swipe ? controls.slides[ self.getNext( self._active ) ] : controls[ 1 - controls.active ];
        },

        slides : [],

        frames: [],

        layers: []
    };

    // internal carousel object
    var carousel = this._carousel = {

        // shortcuts
        next: self.$('thumb-nav-right'),
        prev: self.$('thumb-nav-left'),

        // cache the width
        width: 0,

        // track the current position
        current: 0,

        // cache max value
        max: 0,

        // save all hooks for each width in an array
        hooks: [],

        // update the carousel
        // you can run this method anytime, f.ex on window.resize
        update: function() {
            var w = 0,
                h = 0,
                hooks = [0];

            $.each( self._thumbnails, function( i, thumb ) {
                if ( thumb.ready ) {
                    w += thumb.outerWidth || $( thumb.container ).outerWidth( true );
                    // Due to a bug in jquery, outerwidth() returns the floor of the actual outerwidth,
                    // if the browser is zoom to a value other than 100%. height() returns the floating point value.
                    var containerWidth = $( thumb.container).width();
                    w += containerWidth - M.floor(containerWidth);

                    hooks[ i+1 ] = w;
                    h = M.max( h, thumb.outerHeight || $( thumb.container).outerHeight( true ) );
                }
            });

            self.$( 'thumbnails' ).css({
                width: w,
                height: h
            });

            carousel.max = w;
            carousel.hooks = hooks;
            carousel.width = self.$( 'thumbnails-list' ).width();
            carousel.setClasses();

            self.$( 'thumbnails-container' ).toggleClass( 'galleria-carousel', w > carousel.width );

            // one extra calculation
            carousel.width = self.$( 'thumbnails-list' ).width();

            // todo: fix so the carousel moves to the left
        },

        bindControls: function() {

            var i;

            carousel.next.on( 'click:fast', function(e) {
                e.preventDefault();

                if ( self._options.carouselSteps === 'auto' ) {

                    for ( i = carousel.current; i < carousel.hooks.length; i++ ) {
                        if ( carousel.hooks[i] - carousel.hooks[ carousel.current ] > carousel.width ) {
                            carousel.set(i - 2);
                            break;
                        }
                    }

                } else {
                    carousel.set( carousel.current + self._options.carouselSteps);
                }
            });

            carousel.prev.on( 'click:fast', function(e) {
                e.preventDefault();

                if ( self._options.carouselSteps === 'auto' ) {

                    for ( i = carousel.current; i >= 0; i-- ) {
                        if ( carousel.hooks[ carousel.current ] - carousel.hooks[i] > carousel.width ) {
                            carousel.set( i + 2 );
                            break;
                        } else if ( i === 0 ) {
                            carousel.set( 0 );
                            break;
                        }
                    }
                } else {
                    carousel.set( carousel.current - self._options.carouselSteps );
                }
            });
        },

        // calculate and set positions
        set: function( i ) {
            i = M.max( i, 0 );
            while ( carousel.hooks[i - 1] + carousel.width >= carousel.max && i >= 0 ) {
                i--;
            }
            carousel.current = i;
            carousel.animate();
        },

        // get the last position
        getLast: function(i) {
            return ( i || carousel.current ) - 1;
        },

        // follow the active image
        follow: function(i) {

            //don't follow if position fits
            if ( i === 0 || i === carousel.hooks.length - 2 ) {
                carousel.set( i );
                return;
            }

            // calculate last position
            var last = carousel.current;
            while( carousel.hooks[last] - carousel.hooks[ carousel.current ] <
                   carousel.width && last <= carousel.hooks.length ) {
                last ++;
            }

            // set position
            if ( i - 1 < carousel.current ) {
                carousel.set( i - 1 );
            } else if ( i + 2 > last) {
                carousel.set( i - last + carousel.current + 2 );
            }
        },

        // helper for setting disabled classes
        setClasses: function() {
            carousel.prev.toggleClass( 'disabled', !carousel.current );
            carousel.next.toggleClass( 'disabled', carousel.hooks[ carousel.current ] + carousel.width >= carousel.max );
        },

        // the animation method
        animate: function(to) {
            carousel.setClasses();
            var num = carousel.hooks[ carousel.current ] * -1;

            if ( isNaN( num ) ) {
                return;
            }

            // FF 24 bug
            self.$( 'thumbnails' ).css('left', function() {
                return $(this).css('left');
            });

            Utils.animate(self.get( 'thumbnails' ), {
                left: num
            },{
                duration: self._options.carouselSpeed,
                easing: self._options.easing,
                queue: false
            });
        }
    };

    // tooltip control
    // added in 1.2
    var tooltip = this._tooltip = {

        initialized : false,

        open: false,

        timer: 'tooltip' + self._id,

        swapTimer: 'swap' + self._id,

        init: function() {

            tooltip.initialized = true;

            var css = '.galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;' +
                      'opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}';

            Utils.insertStyleTag( css, 'galleria-tooltip' );

            self.$( 'tooltip' ).css({
                opacity: 0.8,
                visibility: 'visible',
                display: 'none'
            });

        },

        // move handler
        move: function( e ) {
            var mouseX = self.getMousePosition(e).x,
                mouseY = self.getMousePosition(e).y,
                $elem = self.$( 'tooltip' ),
                x = mouseX,
                y = mouseY,
                height = $elem.outerHeight( true ) + 1,
                width = $elem.outerWidth( true ),
                limitY = height + 15;

            var maxX = self.$( 'container' ).width() - width - 2,
                maxY = self.$( 'container' ).height() - height - 2;

            if ( !isNaN(x) && !isNaN(y) ) {

                x += 10;
                y -= ( height+8 );

                x = M.max( 0, M.min( maxX, x ) );
                y = M.max( 0, M.min( maxY, y ) );

                if( mouseY < limitY ) {
                    y = limitY;
                }

                $elem.css({ left: x, top: y });
            }
        },

        // bind elements to the tooltip
        // you can bind multiple elementIDs using { elemID : function } or { elemID : string }
        // you can also bind single DOM elements using bind(elem, string)
        bind: function( elem, value ) {

            // todo: revise if alternative tooltip is needed for mobile devices
            if (Galleria.TOUCH) {
                return;
            }

            if (! tooltip.initialized ) {
                tooltip.init();
            }

            var mouseout = function() {
                self.$( 'container' ).off( 'mousemove', tooltip.move );
                self.clearTimer( tooltip.timer );

                self.$( 'tooltip' ).stop().animate({
                    opacity: 0
                }, 200, function() {

                    self.$( 'tooltip' ).hide();

                    self.addTimer( tooltip.swapTimer, function() {
                        tooltip.open = false;
                    }, 1000);
                });
            };

            var hover = function( elem, value) {

                tooltip.define( elem, value );

                $( elem ).hover(function() {

                    self.clearTimer( tooltip.swapTimer );
                    self.$('container').off( 'mousemove', tooltip.move ).on( 'mousemove', tooltip.move ).trigger( 'mousemove' );
                    tooltip.show( elem );

                    self.addTimer( tooltip.timer, function() {
                        self.$( 'tooltip' ).stop().show().animate({
                            opacity: 1
                        });
                        tooltip.open = true;

                    }, tooltip.open ? 0 : 500);

                }, mouseout).click(mouseout);
            };

            if ( typeof value === 'string' ) {
                hover( ( elem in self._dom ? self.get( elem ) : elem ), value );
            } else {
                // asume elemID here
                $.each( elem, function( elemID, val ) {
                    hover( self.get(elemID), val );
                });
            }
        },

        show: function( elem ) {

            elem = $( elem in self._dom ? self.get(elem) : elem );

            var text = elem.data( 'tt' ),
                mouseup = function( e ) {

                    // attach a tiny settimeout to make sure the new tooltip is filled
                    window.setTimeout( (function( ev ) {
                        return function() {
                            tooltip.move( ev );
                        };
                    }( e )), 10);

                    elem.off( 'mouseup', mouseup );

                };

            text = typeof text === 'function' ? text() : text;

            if ( ! text ) {
                return;
            }

            self.$( 'tooltip' ).html( text.replace(/\s/, '&#160;') );

            // trigger mousemove on mouseup in case of click
            elem.on( 'mouseup', mouseup );
        },

        define: function( elem, value ) {

            // we store functions, not strings
            if (typeof value !== 'function') {
                var s = value;
                value = function() {
                    return s;
                };
            }

            elem = $( elem in self._dom ? self.get(elem) : elem ).data('tt', value);

            tooltip.show( elem );

        }
    };

    // internal fullscreen control
    var fullscreen = this._fullscreen = {

        scrolled: 0,

        crop: undef,

        active: false,

        prev: $(),

        beforeEnter: function(fn){ fn(); },
        beforeExit:  function(fn){ fn(); },

        keymap: self._keyboard.map,

        parseCallback: function( callback, enter ) {

            return _transitions.active ? function() {
                if ( typeof callback == 'function' ) {
                    callback.call(self);
                }
                var active = self._controls.getActive(),
                    next = self._controls.getNext();

                self._scaleImage( next );
                self._scaleImage( active );

                if ( enter && self._options.trueFullscreen ) {
                    // Firefox bug, revise later
                    $( active.container ).add( next.container ).trigger( 'transitionend' );
                }

            } : callback;

        },

        enter: function( callback ) {

            fullscreen.beforeEnter(function() {

                callback = fullscreen.parseCallback( callback, true );

                if ( self._options.trueFullscreen && _nativeFullscreen.support ) {

                    // do some stuff prior animation for wmoother transitions

                    fullscreen.active = true;

                    Utils.forceStyles( self.get('container'), {
                        width: '100%',
                        height: '100%'
                    });

                    self.rescale();

                    if ( Galleria.MAC ) {
                        if ( !( Galleria.SAFARI && /version\/[1-5]/.test(NAV)) ) {
                            self.$('container').css('opacity', 0).addClass('fullscreen');
                            window.setTimeout(function() {
                                fullscreen.scale();
                                self.$('container').css('opacity', 1);
                            }, 50);
                        } else {
                            self.$('stage').css('opacity', 0);
                            window.setTimeout(function() {
                                fullscreen.scale();
                                self.$('stage').css('opacity', 1);
                            },4);
                        }
                    } else {
                        self.$('container').addClass('fullscreen');
                    }

                    $win.resize( fullscreen.scale );

                    _nativeFullscreen.enter( self, callback, self.get('container') );

                } else {

                    fullscreen.scrolled = $win.scrollTop();
                    if( !Galleria.TOUCH ) {
                        window.scrollTo(0, 0);
                    }

                    fullscreen._enter( callback );
                }
            });

        },

        _enter: function( callback ) {

            fullscreen.active = true;

            if ( IFRAME ) {

                fullscreen.iframe = (function() {

                    var elem,
                        refer = doc.referrer,
                        test = doc.createElement('a'),
                        loc = window.location;

                    test.href = refer;

                    if( test.protocol != loc.protocol ||
                        test.hostname != loc.hostname ||
                        test.port != loc.port ) {
                            Galleria.raise('Parent fullscreen not available. Iframe protocol, domains and ports must match.');
                            return false;
                        }

                    fullscreen.pd = window.parent.document;

                    $( fullscreen.pd ).find('iframe').each(function() {
                        var idoc = this.contentDocument || this.contentWindow.document;
                        if ( idoc === doc ) {
                            elem = this;
                            return false;
                        }
                    });

                    return elem;
                }());

            }

            // hide the image until rescale is complete
            Utils.hide( self.getActiveImage() );

            if ( IFRAME && fullscreen.iframe ) {
                fullscreen.iframe.scrolled = $( window.parent ).scrollTop();
                window.parent.scrollTo(0, 0);
            }

            var data = self.getData(),
                options = self._options,
                inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,
                htmlbody = {
                    height: '100%',
                    overflow: 'hidden',
                    margin:0,
                    padding:0
                };

            if (inBrowser) {

                self.$('container').addClass('fullscreen');
                fullscreen.prev = self.$('container').prev();

                if ( !fullscreen.prev.length ) {
                    fullscreen.parent = self.$( 'container' ).parent();
                }

                // move
                self.$( 'container' ).appendTo( 'body' );

                // begin styleforce

                Utils.forceStyles(self.get('container'), {
                    position: Galleria.TOUCH ? 'absolute' : 'fixed',
                    top: 0,
                    left: 0,
                    width: '100%',
                    height: '100%',
                    zIndex: 10000
                });
                Utils.forceStyles( DOM().html, htmlbody );
                Utils.forceStyles( DOM().body, htmlbody );
            }

            if ( IFRAME && fullscreen.iframe ) {
                Utils.forceStyles( fullscreen.pd.documentElement, htmlbody );
                Utils.forceStyles( fullscreen.pd.body, htmlbody );
                Utils.forceStyles( fullscreen.iframe, $.extend( htmlbody, {
                    width: '100%',
                    height: '100%',
                    top: 0,
                    left: 0,
                    position: 'fixed',
                    zIndex: 10000,
                    border: 'none'
                }));
            }

            // temporarily attach some keys
            // save the old ones first in a cloned object
            fullscreen.keymap = $.extend({}, self._keyboard.map);

            self.attachKeyboard({
                escape: self.exitFullscreen,
                right: self.next,
                left: self.prev
            });

            // temporarily save the crop
            fullscreen.crop = options.imageCrop;

            // set fullscreen options
            if ( options.fullscreenCrop != undef ) {
                options.imageCrop = options.fullscreenCrop;
            }

            // swap to big image if it's different from the display image
            if ( data && data.big && data.image !== data.big ) {
                var big    = new Galleria.Picture(),
                    cached = big.isCached( data.big ),
                    index  = self.getIndex(),
                    thumb  = self._thumbnails[ index ];

                self.trigger( {
                    type: Galleria.LOADSTART,
                    cached: cached,
                    rewind: false,
                    index: index,
                    imageTarget: self.getActiveImage(),
                    thumbTarget: thumb,
                    galleriaData: data
                });

                big.load( data.big, function( big ) {
                    self._scaleImage( big, {
                        complete: function( big ) {
                            self.trigger({
                                type: Galleria.LOADFINISH,
                                cached: cached,
                                index: index,
                                rewind: false,
                                imageTarget: big.image,
                                thumbTarget: thumb
                            });
                            var image = self._controls.getActive().image;
                            if ( image ) {
                                $( image ).width( big.image.width ).height( big.image.height )
                                    .attr( 'style', $( big.image ).attr('style') )
                                    .attr( 'src', big.image.src );
                            }
                        }
                    });
                });

                var n = self.getNext(index),
                    p = new Galleria.Picture(),
                    ndata = self.getData( n );
                p.preload( self.isFullscreen() && ndata.big ? ndata.big : ndata.image );
            }

            // init the first rescale and attach callbacks

            self.rescale(function() {

                self.addTimer(false, function() {
                    // show the image after 50 ms
                    if ( inBrowser ) {
                        Utils.show( self.getActiveImage() );
                    }

                    if (typeof callback === 'function') {
                        callback.call( self );
                    }
                    self.rescale();

                }, 100);

                self.trigger( Galleria.FULLSCREEN_ENTER );
            });

            if ( !inBrowser ) {
                Utils.show( self.getActiveImage() );
            } else {
                $win.resize( fullscreen.scale );
            }

        },

        scale : function() {
            self.rescale();
        },

        exit: function( callback ) {

            fullscreen.beforeExit(function() {

                callback = fullscreen.parseCallback( callback );

                if ( self._options.trueFullscreen && _nativeFullscreen.support ) {
                    _nativeFullscreen.exit( callback );
                } else {
                    fullscreen._exit( callback );
                }
            });
        },

        _exit: function( callback ) {

            fullscreen.active = false;

            var inBrowser = !self._options.trueFullscreen || !_nativeFullscreen.support,
                $container = self.$( 'container' ).removeClass( 'fullscreen' );

            // move back
            if ( fullscreen.parent ) {
                fullscreen.parent.prepend( $container );
            } else {
                $container.insertAfter( fullscreen.prev );
            }

            if ( inBrowser ) {
                Utils.hide( self.getActiveImage() );

                // revert all styles
                Utils.revertStyles( self.get('container'), DOM().html, DOM().body );

                // scroll back
                if( !Galleria.TOUCH ) {
                    window.scrollTo(0, fullscreen.scrolled);
                }

                // reload iframe src manually
                var frame = self._controls.frames[ self._controls.active ];
                if ( frame && frame.image ) {
                    frame.image.src = frame.image.src;
                }
            }

            if ( IFRAME && fullscreen.iframe ) {
                Utils.revertStyles( fullscreen.pd.documentElement, fullscreen.pd.body, fullscreen.iframe );
                if ( fullscreen.iframe.scrolled ) {
                    window.parent.scrollTo(0, fullscreen.iframe.scrolled );
                }
            }

            // detach all keyboard events and apply the old keymap
            self.detachKeyboard();
            self.attachKeyboard( fullscreen.keymap );

            // bring back cached options
            self._options.imageCrop = fullscreen.crop;

            // return to original image
            var big = self.getData().big,
                image = self._controls.getActive().image;

            if ( !self.getData().iframe && image && big && big == image.src ) {

                window.setTimeout(function(src) {
                    return function() {
                        image.src = src;
                    };
                }( self.getData().image ), 1 );

            }

            self.rescale(function() {
                self.addTimer(false, function() {

                    // show the image after 50 ms
                    if ( inBrowser ) {
                        Utils.show( self.getActiveImage() );
                    }

                    if ( typeof callback === 'function' ) {
                        callback.call( self );
                    }

                    $win.trigger( 'resize' );

                }, 50);
                self.trigger( Galleria.FULLSCREEN_EXIT );
            });

            $win.off('resize', fullscreen.scale);
        }
    };

    // the internal idle object for controlling idle states
    var idle = this._idle = {

        trunk: [],

        bound: false,

        active: false,

        add: function(elem, to, from, hide) {
            if ( !elem || Galleria.TOUCH ) {
                return;
            }
            if (!idle.bound) {
                idle.addEvent();
            }
            elem = $(elem);

            if ( typeof from == 'boolean' ) {
                hide = from;
                from = {};
            }

            from = from || {};

            var extract = {},
                style;

            for ( style in to ) {
                if ( to.hasOwnProperty( style ) ) {
                    extract[ style ] = elem.css( style );
                }
            }

            elem.data('idle', {
                from: $.extend( extract, from ),
                to: to,
                complete: true,
                busy: false
            });

            if ( !hide ) {
                idle.addTimer();
            } else {
                elem.css( to );
            }
            idle.trunk.push(elem);
        },

        remove: function(elem) {

            elem = $(elem);

            $.each(idle.trunk, function(i, el) {
                if ( el && el.length && !el.not(elem).length ) {
                    elem.css( elem.data( 'idle' ).from );
                    idle.trunk.splice(i, 1);
                }
            });

            if (!idle.trunk.length) {
                idle.removeEvent();
                self.clearTimer( idle.timer );
            }
        },

        addEvent : function() {
            idle.bound = true;
            self.$('container').on( 'mousemove click', idle.showAll );
            if ( self._options.idleMode == 'hover' ) {
                self.$('container').on( 'mouseleave', idle.hide );
            }
        },

        removeEvent : function() {
            idle.bound = false;
            self.$('container').on( 'mousemove click', idle.showAll );
            if ( self._options.idleMode == 'hover' ) {
                self.$('container').off( 'mouseleave', idle.hide );
            }
        },

        addTimer : function() {
            if( self._options.idleMode == 'hover' ) {
                return;
            }
            self.addTimer( 'idle', function() {
                idle.hide();
            }, self._options.idleTime );
        },

        hide : function() {

            if ( !self._options.idleMode || self.getIndex() === false ) {
                return;
            }

            self.trigger( Galleria.IDLE_ENTER );

            var len = idle.trunk.length;

            $.each( idle.trunk, function(i, elem) {

                var data = elem.data('idle');

                if (! data) {
                    return;
                }

                elem.data('idle').complete = false;

                Utils.animate( elem, data.to, {
                    duration: self._options.idleSpeed,
                    complete: function() {
                        if ( i == len-1 ) {
                            idle.active = false;
                        }
                    }
                });
            });
        },

        showAll : function() {

            self.clearTimer( 'idle' );

            $.each( idle.trunk, function( i, elem ) {
                idle.show( elem );
            });
        },

        show: function(elem) {

            var data = elem.data('idle');

            if ( !idle.active || ( !data.busy && !data.complete ) ) {

                data.busy = true;

                self.trigger( Galleria.IDLE_EXIT );

                self.clearTimer( 'idle' );

                Utils.animate( elem, data.from, {
                    duration: self._options.idleSpeed/2,
                    complete: function() {
                        idle.active = true;
                        $(elem).data('idle').busy = false;
                        $(elem).data('idle').complete = true;
                    }
                });

            }
            idle.addTimer();
        }
    };

    // internal lightbox object
    // creates a predesigned lightbox for simple popups of images in galleria
    var lightbox = this._lightbox = {
        width : 0,
        height : 0,
        initialized : false,
        active : null,
        image : null,
        elems : {},
        keymap: false,
        init : function() {
            if ( lightbox.initialized ) { return;  }
            lightbox.initialized = true;
            // create some elements to work with
            var elems = 'overlay box content shadow title info close prevholder prev nextholder next counter image',
                el = {},
                op = self._options,
                css = '',
                abs = 'position:absolute;',
                prefix = 'lightbox-',
                cssMap = {
                    overlay:    'position:fixed;display:none;opacity:'+op.overlayOpacity+';filter:alpha(opacity='+(op.overlayOpacity*100)+
                                ');top:0;left:0;width:100%;height:100%;background:'+op.overlayBackground+';z-index:99990',
                    box:        'position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991',
                    shadow:     abs+'width:100%;height:100%;',
                    content:    abs+'background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden;-webkit-border-radius: 4px;-moz-border-radius: 4px;-ms-border-radius: 4px;-o-border-radius: 4px;border-radius: 4px',
                    info:       abs+'bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px',
                    close:      abs+'top:10px;right:20px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font: 35px arial,sans-serif;z-index:99999',
                    image:      abs+'top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;',
                    prevholder: abs+'width:50%;top:0;bottom:40px;cursor:pointer;',
                    nextholder: abs+'width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;',
                    prev:       abs+'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 35px arial,sans-serif',
                    next:       abs+'top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 35px arial,sans-serif;text-align:center;color:#000',
                    title:      'float:left',
                    counter:    'float:right;margin-left:8px;'
                },
                hover = function(elem) {
                    return elem.hover(
                        function() { $(this).css( 'color', '#bbb' ); },
                        function() { $(this).css( 'color', '#444' ); }
                    );
                },
                appends = {};

            // fix for navigation hovers transparent background event "feature"
            var exs = '';
            if ( IE > 7 ) {
                exs = IE < 9 ? 'background:#000;filter:alpha(opacity=0);' : 'background:rgba(0,0,0,0);';
            } else {
                exs = 'z-index:99999';
            }

            cssMap.nextholder += exs;
            cssMap.prevholder += exs;

            // create and insert CSS
            $.each(cssMap, function( key, value ) {
                css += '.galleria-'+prefix+key+'{'+value+'}';
            });

            css += '.galleria-'+prefix+'box.iframe .galleria-'+prefix+'prevholder,'+
                   '.galleria-'+prefix+'box.iframe .galleria-'+prefix+'nextholder{'+
                   'width:100px;height:100px;top:50%;margin-top:-70px}';

            Utils.insertStyleTag( css, 'galleria-lightbox' );

            // create the elements
            $.each(elems.split(' '), function( i, elemId ) {
                self.addElement( 'lightbox-' + elemId );
                el[ elemId ] = lightbox.elems[ elemId ] = self.get( 'lightbox-' + elemId );
            });

            // initiate the image
            lightbox.image = new Galleria.Picture();

            // append the elements
            $.each({
                    box: 'shadow content close prevholder nextholder',
                    info: 'title counter',
                    content: 'info image',
                    prevholder: 'prev',
                    nextholder: 'next'
                }, function( key, val ) {
                    var arr = [];
                    $.each( val.split(' '), function( i, prop ) {
                        arr.push( prefix + prop );
                    });
                    appends[ prefix+key ] = arr;
            });

            self.append( appends );

            $( el.image ).append( lightbox.image.container );

            $( DOM().body ).append( el.overlay, el.box );

            // add the prev/next nav and bind some controls

            hover( $( el.close ).on( 'click:fast', lightbox.hide ).html('&#215;') );

            $.each( ['Prev','Next'], function(i, dir) {

                var $d = $( el[ dir.toLowerCase() ] ).html( /v/.test( dir ) ? '&#8249;&#160;' : '&#160;&#8250;' ),
                    $e = $( el[ dir.toLowerCase()+'holder'] );

                $e.on( 'click:fast', function() {
                    lightbox[ 'show' + dir ]();
                });

                // IE7 and touch devices will simply show the nav
                if ( IE < 8 || Galleria.TOUCH ) {
                    $d.show();
                    return;
                }

                $e.hover( function() {
                    $d.show();
                }, function(e) {
                    $d.stop().fadeOut( 200 );
                });

            });
            $( el.overlay ).on( 'click:fast', lightbox.hide );

            // the lightbox animation is slow on ipad
            if ( Galleria.IPAD ) {
                self._options.lightboxTransitionSpeed = 0;
            }

        },

        rescale: function(event) {

            // calculate
             var width = M.min( $win.width()-40, lightbox.width ),
                height = M.min( $win.height()-60, lightbox.height ),
                ratio = M.min( width / lightbox.width, height / lightbox.height ),
                destWidth = M.round( lightbox.width * ratio ) + 40,
                destHeight = M.round( lightbox.height * ratio ) + 60,
                to = {
                    width: destWidth,
                    height: destHeight,
                    'margin-top': M.ceil( destHeight / 2 ) *- 1,
                    'margin-left': M.ceil( destWidth / 2 ) *- 1
                };

            // if rescale event, don't animate
            if ( event ) {
                $( lightbox.elems.box ).css( to );
            } else {
                $( lightbox.elems.box ).animate( to, {
                    duration: self._options.lightboxTransitionSpeed,
                    easing: self._options.easing,
                    complete: function() {
                        var image = lightbox.image,
                            speed = self._options.lightboxFadeSpeed;

                        self.trigger({
                            type: Galleria.LIGHTBOX_IMAGE,
                            imageTarget: image.image
                        });

                        $( image.container ).show();

                        $( image.image ).animate({ opacity: 1 }, speed);
                        Utils.show( lightbox.elems.info, speed );
                    }
                });
            }
        },

        hide: function() {

            // remove the image
            lightbox.image.image = null;

            $win.off('resize', lightbox.rescale);

            $( lightbox.elems.box ).hide().find( 'iframe' ).remove();

            Utils.hide( lightbox.elems.info );

            self.detachKeyboard();
            self.attachKeyboard( lightbox.keymap );

            lightbox.keymap = false;

            Utils.hide( lightbox.elems.overlay, 200, function() {
                $( this ).hide().css( 'opacity', self._options.overlayOpacity );
                self.trigger( Galleria.LIGHTBOX_CLOSE );
            });
        },

        showNext: function() {
            lightbox.show( self.getNext( lightbox.active ) );
        },

        showPrev: function() {
            lightbox.show( self.getPrev( lightbox.active ) );
        },

        show: function(index) {

            lightbox.active = index = typeof index === 'number' ? index : self.getIndex() || 0;

            if ( !lightbox.initialized ) {
                lightbox.init();
            }

            // trigger the event
            self.trigger( Galleria.LIGHTBOX_OPEN );

            // temporarily attach some keys
            // save the old ones first in a cloned object
            if ( !lightbox.keymap ) {

                lightbox.keymap = $.extend({}, self._keyboard.map);

                self.attachKeyboard({
                    escape: lightbox.hide,
                    right: lightbox.showNext,
                    left: lightbox.showPrev
                });
            }

            $win.off('resize', lightbox.rescale );

            var data = self.getData(index),
                total = self.getDataLength(),
                n = self.getNext( index ),
                ndata, p, i;

            Utils.hide( lightbox.elems.info );

            try {
                for ( i = self._options.preload; i > 0; i-- ) {
                    p = new Galleria.Picture();
                    ndata = self.getData( n );
                    p.preload( ndata.big ? ndata.big : ndata.image );
                    n = self.getNext( n );
                }
            } catch(e) {}

            lightbox.image.isIframe = ( data.iframe && !data.image );

            $( lightbox.elems.box ).toggleClass( 'iframe', lightbox.image.isIframe );

            $( lightbox.image.container ).find( '.galleria-videoicon' ).remove();

            lightbox.image.load( data.big || data.image || data.iframe, function( image ) {

                if ( image.isIframe ) {

                    var cw = $(window).width(),
                        ch = $(window).height();

                    if ( image.video && self._options.maxVideoSize ) {
                        var r = M.min( self._options.maxVideoSize/cw, self._options.maxVideoSize/ch );
                        if ( r < 1 ) {
                            cw *= r;
                            ch *= r;
                        }
                    }
                    lightbox.width = cw;
                    lightbox.height = ch;

                } else {
                    lightbox.width = image.original.width;
                    lightbox.height = image.original.height;
                }

                $( image.image ).css({
                    width: image.isIframe ? '100%' : '100.1%',
                    height: image.isIframe ? '100%' : '100.1%',
                    top: 0,
                    bottom: 0,
                    zIndex: 99998,
                    opacity: 0,
                    visibility: 'visible'
                }).parent().height('100%');

                lightbox.elems.title.innerHTML = data.title || '';
                lightbox.elems.counter.innerHTML = (index + 1) + ' / ' + total;
                $win.resize( lightbox.rescale );
                lightbox.rescale();

                if( data.image && data.iframe ) {

                    $( lightbox.elems.box ).addClass('iframe');

                    if ( data.video ) {
                        var $icon = _playIcon( image.container ).hide();
                        window.setTimeout(function() {
                            $icon.fadeIn(200);
                        }, 200);
                    }

                    $( image.image ).css( 'cursor', 'pointer' ).mouseup((function(data, image) {
                        return function(e) {
                            $( lightbox.image.container ).find( '.galleria-videoicon' ).remove();
                            e.preventDefault();
                            image.isIframe = true;
                            image.load( data.iframe + ( data.video ? '&autoplay=1' : '' ), {
                                width: '100%',
                                height: IE < 8 ? $( lightbox.image.container ).height() : '100%'
                            });
                        };
                    }(data, image)));
                }
            });

            $( lightbox.elems.overlay ).show().css( 'visibility', 'visible' );
            $( lightbox.elems.box ).show();
        }
    };

    // the internal timeouts object
    // provides helper methods for controlling timeouts

    var _timer = this._timer = {

        trunk: {},

        add: function( id, fn, delay, loop ) {
            id = id || new Date().getTime();
            loop = loop || false;
            this.clear( id );
            if ( loop ) {
                var old = fn;
                fn = function() {
                    old();
                    _timer.add( id, fn, delay );
                };
            }
            this.trunk[ id ] = window.setTimeout( fn, delay );
        },

        clear: function( id ) {

            var del = function( i ) {
                window.clearTimeout( this.trunk[ i ] );
                delete this.trunk[ i ];
            }, i;

            if ( !!id && id in this.trunk ) {
                del.call( this, id );

            } else if ( typeof id === 'undefined' ) {
                for ( i in this.trunk ) {
                    if ( this.trunk.hasOwnProperty( i ) ) {
                        del.call( this, i );
                    }
                }
            }
        }
    };

    return this;
};

// end Galleria constructor

Galleria.prototype = {

    // bring back the constructor reference

    constructor: Galleria,

    /**
        Use this function to initialize the gallery and start loading.
        Should only be called once per instance.

        @param {HTMLElement} target The target element
        @param {Object} options The gallery options

        @returns Instance
    */

    init: function( target, options ) {

        options = _legacyOptions( options );

        // save the original ingredients
        this._original = {
            target: target,
            options: options,
            data: null
        };

        // save the target here
        this._target = this._dom.target = target.nodeName ? target : $( target ).get(0);

        // save the original content for destruction
        this._original.html = this._target.innerHTML;

        // push the instance
        _instances.push( this );

        // raise error if no target is detected
        if ( !this._target ) {
             Galleria.raise('Target not found', true);
             return;
        }

        // apply options
        this._options = {
            autoplay: false,
            carousel: true,
            carouselFollow: true, // legacy, deprecate at 1.3
            carouselSpeed: 400,
            carouselSteps: 'auto',
            clicknext: false,
            dailymotion: {
                foreground: '%23EEEEEE',
                highlight: '%235BCEC5',
                background: '%23222222',
                logo: 0,
                hideInfos: 1
            },
            dataConfig : function( elem ) { return {}; },
            dataSelector: 'img',
            dataSort: false,
            dataSource: this._target,
            debug: undef,
            dummy: undef, // 1.2.5
            easing: 'galleria',
            extend: function(options) {},
            fullscreenCrop: undef, // 1.2.5
            fullscreenDoubleTap: true, // 1.2.4 toggles fullscreen on double-tap for touch devices
            fullscreenTransition: undef, // 1.2.6
            height: 0,
            idleMode: true, // 1.2.4 toggles idleMode
            idleTime: 3000,
            idleSpeed: 200,
            imageCrop: false,
            imageMargin: 0,
            imagePan: false,
            imagePanSmoothness: 12,
            imagePosition: '50%',
            imageTimeout: undef, // 1.2.5
            initialTransition: undef, // 1.2.4, replaces transitionInitial
            keepSource: false,
            layerFollow: true, // 1.2.5
            lightbox: false, // 1.2.3
            lightboxFadeSpeed: 200,
            lightboxTransitionSpeed: 200,
            linkSourceImages: true,
            maxScaleRatio: undef,
            maxVideoSize: undef, // 1.2.9
            minScaleRatio: undef, // deprecated in 1.2.9
            overlayOpacity: 0.85,
            overlayBackground: '#0b0b0b',
            pauseOnInteraction: true,
            popupLinks: false,
            preload: 2,
            queue: true,
            responsive: true,
            show: 0,
            showInfo: true,
            showCounter: true,
            showImagenav: true,
            swipe: 'auto', // 1.2.4 -> revised in 1.3 -> changed type in 1.3.5
            thumbCrop: true,
            thumbEventType: 'click:fast',
            thumbMargin: 0,
            thumbQuality: 'auto',
            thumbDisplayOrder: true, // 1.2.8
            thumbPosition: '50%', // 1.3
            thumbnails: true,
            touchTransition: undef, // 1.2.6
            transition: 'fade',
            transitionInitial: undef, // legacy, deprecate in 1.3. Use initialTransition instead.
            transitionSpeed: 400,
            trueFullscreen: true, // 1.2.7
            useCanvas: false, // 1.2.4
            variation: '', // 1.3.2
            videoPoster: true, // 1.3
            vimeo: {
                title: 0,
                byline: 0,
                portrait: 0,
                color: 'aaaaaa'
            },
            wait: 5000, // 1.2.7
            width: 'auto',
            youtube: {
                modestbranding: 1,
                autohide: 1,
                color: 'white',
                hd: 1,
                rel: 0,
                showinfo: 0
            }
        };

        // legacy support for transitionInitial
        this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial;

        // turn off debug
        if ( options && options.debug === false ) {
            DEBUG = false;
        }

        // set timeout
        if ( options && typeof options.imageTimeout === 'number' ) {
            TIMEOUT = options.imageTimeout;
        }

        // set dummy
        if ( options && typeof options.dummy === 'string' ) {
            DUMMY = options.dummy;
        }

        // hide all content
        $( this._target ).children().hide();

        // Warn for quirks mode
        if ( Galleria.QUIRK ) {
            Galleria.raise('Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.');
        }

        // now we just have to wait for the theme...
        if ( typeof Galleria.theme === 'object' ) {
            this._init();
        } else {
            // push the instance into the pool and run it when the theme is ready
            _pool.push( this );
        }

        return this;
    },

    // this method should only be called once per instance
    // for manipulation of data, use the .load method

    _init: function() {

        var self = this,
            options = this._options;

        if ( this._initialized ) {
            Galleria.raise( 'Init failed: Gallery instance already initialized.' );
            return this;
        }

        this._initialized = true;

        if ( !Galleria.theme ) {
            Galleria.raise( 'Init failed: No theme found.', true );
            return this;
        }

        // merge the theme & caller options
        $.extend( true, options, Galleria.theme.defaults, this._original.options, Galleria.configure.options );

        // internally we use boolean for swipe
        options.swipe = (function(s) {

            if ( s == 'enforced' ) { return true; }

            // legacy patch
            if( s === false || s == 'disabled' ) { return false; }
            
            return !!Galleria.TOUCH;

        }( options.swipe ));

        // disable options that arent compatible with swipe
        if ( options.swipe ) {
            options.clicknext = false;
            options.imagePan = false;
        }

        // check for canvas support
        (function( can ) {
            if ( !( 'getContext' in can ) ) {
                can = null;
                return;
            }
            _canvas = _canvas || {
                elem: can,
                context: can.getContext( '2d' ),
                cache: {},
                length: 0
            };
        }( doc.createElement( 'canvas' ) ) );

        // bind the gallery to run when data is ready
        this.bind( Galleria.DATA, function() {

            // remove big if total pixels are less than 1024 (most phones)
            if ( window.screen && window.screen.width && Array.prototype.forEach ) {

                this._data.forEach(function(data) {

                    var density = 'devicePixelRatio' in window ? window.devicePixelRatio : 1,
                        m = M.max( window.screen.width, window.screen.height );

                    if ( m*density < 1024 ) {
                        data.big = data.image;
                    }
                });
            }

            // save the new data
            this._original.data = this._data;

            // lets show the counter here
            this.get('total').innerHTML = this.getDataLength();

            // cache the container
            var $container = this.$( 'container' );

            // set ratio if height is < 2
            if ( self._options.height < 2 ) {
                self._userRatio = self._ratio = self._options.height;
            }

            // the gallery is ready, let's just wait for the css
            var num = { width: 0, height: 0 };
            var testHeight = function() {
                return self.$( 'stage' ).height();
            };

            // check container and thumbnail height
            Utils.wait({
                until: function() {

                    // keep trying to get the value
                    num = self._getWH();
                    $container.width( num.width ).height( num.height );
                    return testHeight() && num.width && num.height > 50;

                },
                success: function() {

                    self._width = num.width;
                    self._height = num.height;
                    self._ratio = self._ratio || num.height/num.width;

                    // for some strange reason, webkit needs a single setTimeout to play ball
                    if ( Galleria.WEBKIT ) {
                        window.setTimeout( function() {
                            self._run();
                        }, 1);
                    } else {
                        self._run();
                    }
                },
                error: function() {

                    // Height was probably not set, raise hard errors

                    if ( testHeight() ) {
                        Galleria.raise('Could not extract sufficient width/height of the gallery container. Traced measures: width:' + num.width + 'px, height: ' + num.height + 'px.', true);
                    } else {
                        Galleria.raise('Could not extract a stage height from the CSS. Traced height: ' + testHeight() + 'px.', true);
                    }
                },
                timeout: typeof this._options.wait == 'number' ? this._options.wait : false
            });
        });

        // build the gallery frame
        this.append({
            'info-text' :
                ['info-title', 'info-description'],
            'info' :
                ['info-text'],
            'image-nav' :
                ['image-nav-right', 'image-nav-left'],
            'stage' :
                ['images', 'loader', 'counter', 'image-nav'],
            'thumbnails-list' :
                ['thumbnails'],
            'thumbnails-container' :
                ['thumb-nav-left', 'thumbnails-list', 'thumb-nav-right'],
            'container' :
                ['stage', 'thumbnails-container', 'info', 'tooltip']
        });

        Utils.hide( this.$( 'counter' ).append(
            this.get( 'current' ),
            doc.createTextNode(' / '),
            this.get( 'total' )
        ) );

        this.setCounter('&#8211;');

        Utils.hide( self.get('tooltip') );

        // add a notouch class on the container to prevent unwanted :hovers on touch devices
        this.$( 'container' ).addClass( ( Galleria.TOUCH ? 'touch' : 'notouch' ) + ' ' + this._options.variation );

        // add images to the controls
        if ( !this._options.swipe ) {
            $.each( new Array(2), function( i ) {

                // create a new Picture instance
                var image = new Galleria.Picture();

                // apply some styles, create & prepend overlay
                $( image.container ).css({
                    position: 'absolute',
                    top: 0,
                    left: 0
                }).prepend( self._layers[i] = $( Utils.create('galleria-layer') ).css({
                    position: 'absolute',
                    top:0, left:0, right:0, bottom:0,
                    zIndex:2
                })[0] );

                // append the image
                self.$( 'images' ).append( image.container );

                // reload the controls
                self._controls[i] = image;

                // build a frame
                var frame = new Galleria.Picture();
                frame.isIframe = true;

                $( frame.container ).attr('class', 'galleria-frame').css({
                    position: 'absolute',
                    top: 0,
                    left: 0,
                    zIndex: 4,
                    background: '#000',
                    display: 'none'
                }).appendTo( image.container );

                self._controls.frames[i] = frame;

            });
        }

        // some forced generic styling
        this.$( 'images' ).css({
            position: 'relative',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%'
        });

        if ( options.swipe ) {
            this.$( 'images' ).css({
                position: 'absolute',
                top: 0,
                left: 0,
                width: 0,
                height: '100%'
            });
            this.finger = new Galleria.Finger(this.get('stage'), {
                onchange: function(page) {
                    self.pause().show(page);
                },
                oncomplete: function(page) {

                    var index = M.max( 0, M.min( parseInt( page, 10 ), self.getDataLength() - 1 ) ),
                        data = self.getData(index);

                    $( self._thumbnails[ index ].container )
                        .addClass( 'active' )
                        .siblings( '.active' )
                        .removeClass( 'active' );

                    if ( !data ) {
                       return;
                    }

                    self.$( 'images' ).find( 'iframe' ).remove();
                    self.$( 'images' ).find( '.galleria-frame' ).css('opacity', 0).hide();

                    if ( self._options.carousel && self._options.carouselFollow ) {
                        self._carousel.follow( index );
                    }
                }
            });
            this.bind( Galleria.RESCALE, function() {
                this.finger.setup();
            });
            this.$('stage').on('click', function(e) {
                var data = self.getData();
                if ( !data ) {
                    return;
                }
                if ( data.iframe ) {

                    if ( self.isPlaying() ) {
                        self.pause();
                    }
                    var frame = self._controls.frames[ self._active ],
                        w = self._stageWidth,
                        h = self._stageHeight;

                    if ( $( frame.container ).find( 'iframe' ).length ) {
                        return;
                    }

                    $( frame.container ).css({
                        width: w,
                        height: h,
                        opacity: 0
                    }).show().animate({
                        opacity: 1
                    }, 200);

                    window.setTimeout(function() {
                        frame.load( data.iframe + ( data.video ? '&autoplay=1' : '' ), {
                            width: w,
                            height: h
                        }, function( frame ) {
                            self.$( 'container' ).addClass( 'videoplay' );
                            frame.scale({
                                width: self._stageWidth,
                                height: self._stageHeight,
                                iframelimit: data.video ? self._options.maxVideoSize : undef
                            });
                        });
                    }, 100);

                    return;
                }

                if ( data.link ) {
                    if ( self._options.popupLinks ) {
                        var win = window.open( data.link, '_blank' );
                    } else {
                        window.location.href = data.link;
                    }
                    return;
                }
            });
            this.bind( Galleria.IMAGE, function(e) {

                self.setCounter( e.index );
                self.setInfo( e.index );

                var next = this.getNext(),
                    prev = this.getPrev();

                var preloads = [prev,next];
                preloads.push(this.getNext(next), this.getPrev(prev), self._controls.slides.length-1);

                var filtered = [];

                $.each(preloads, function(i, val) {
                    if ( $.inArray(val, filtered) == -1 ) {
                        filtered.push(val);
                    }
                });

                $.each(filtered, function(i, loadme) {
                    var d = self.getData(loadme),
                        img = self._controls.slides[loadme],
                        src = self.isFullscreen() && d.big ? d.big : ( d.image || d.iframe );

                    if ( d.iframe && !d.image ) {
                        img.isIframe = true;
                    }

                    if ( !img.ready ) {
                        self._controls.slides[loadme].load(src, function(img) {
                            if ( !img.isIframe ) {
                                $(img.image).css('visibility', 'hidden');
                            }
                            self._scaleImage(img, {
                                complete: function(img) {
                                    if ( !img.isIframe ) {
                                        $(img.image).css({
                                            opacity: 0,
                                            visibility: 'visible'
                                        }).animate({
                                            opacity: 1
                                        }, 200);
                                    }
                                }
                            });
                        });
                    }
                });
            });
        }

        this.$( 'thumbnails, thumbnails-list' ).css({
            overflow: 'hidden',
            position: 'relative'
        });

        // bind image navigation arrows
        this.$( 'image-nav-right, image-nav-left' ).on( 'click:fast', function(e) {

            // pause if options is set
            if ( options.pauseOnInteraction ) {
                self.pause();
            }

            // navigate
            var fn = /right/.test( this.className ) ? 'next' : 'prev';
            self[ fn ]();

        }).on('click', function(e) {

            e.preventDefault();

            // tune the clicknext option
            if ( options.clicknext || options.swipe ) {
                e.stopPropagation();
            }
        });

        // hide controls if chosen to
        $.each( ['info','counter','image-nav'], function( i, el ) {
            if ( options[ 'show' + el.substr(0,1).toUpperCase() + el.substr(1).replace(/-/,'') ] === false ) {
                Utils.moveOut( self.get( el.toLowerCase() ) );
            }
        });

        // load up target content
        this.load();

        // now it's usually safe to remove the content
        // IE will never stop loading if we remove it, so let's keep it hidden for IE (it's usually fast enough anyway)
        if ( !options.keepSource && !IE ) {
            this._target.innerHTML = '';
        }

        // re-append the errors, if they happened before clearing
        if ( this.get( 'errors' ) ) {
            this.appendChild( 'target', 'errors' );
        }

        // append the gallery frame
        this.appendChild( 'target', 'container' );

        // parse the carousel on each thumb load
        if ( options.carousel ) {
            var count = 0,
                show = options.show;
            this.bind( Galleria.THUMBNAIL, function() {
                this.updateCarousel();
                if ( ++count == this.getDataLength() && typeof show == 'number' && show > 0 ) {
                    this._carousel.follow( show );
                }
            });
        }

        // bind window resize for responsiveness
        if ( options.responsive ) {
            $win.on( 'resize', function() {
                if ( !self.isFullscreen() ) {
                    self.resize();
                }
            });
        }

        // double-tap/click fullscreen toggle

        if ( options.fullscreenDoubleTap ) {

            this.$( 'stage' ).on( 'touchstart', (function() {
                var last, cx, cy, lx, ly, now,
                    getData = function(e) {
                        return e.originalEvent.touches ? e.originalEvent.touches[0] : e;
                    };
                self.$( 'stage' ).on('touchmove', function() {
                    last = 0;
                });
                return function(e) {
                    if( /(-left|-right)/.test(e.target.className) ) {
                        return;
                    }
                    now = Utils.timestamp();
                    cx = getData(e).pageX;
                    cy = getData(e).pageY;
                    if ( e.originalEvent.touches.length < 2 && ( now - last < 300 ) && ( cx - lx < 20) && ( cy - ly < 20) ) {
                        self.toggleFullscreen();
                        e.preventDefault();
                        return;
                    }
                    last = now;
                    lx = cx;
                    ly = cy;
                };
            }()));
        }

        // bind the ons
        $.each( Galleria.on.binds, function(i, bind) {
            // check if already bound
            if ( $.inArray( bind.hash, self._binds ) == -1 ) {
                self.bind( bind.type, bind.callback );
            }
        });

        return this;
    },

    addTimer : function() {
        this._timer.add.apply( this._timer, Utils.array( arguments ) );
        return this;
    },

    clearTimer : function() {
        this._timer.clear.apply( this._timer, Utils.array( arguments ) );
        return this;
    },

    // parse width & height from CSS or options

    _getWH : function() {

        var $container = this.$( 'container' ),
            $target = this.$( 'target' ),
            self = this,
            num = {},
            arr;

        $.each(['width', 'height'], function( i, m ) {

            // first check if options is set
            if ( self._options[ m ] && typeof self._options[ m ] === 'number') {
                num[ m ] = self._options[ m ];
            } else {

                arr = [
                    Utils.parseValue( $container.css( m ) ),         // the container css height
                    Utils.parseValue( $target.css( m ) ),            // the target css height
                    $container[ m ](),                               // the container jQuery method
                    $target[ m ]()                                   // the target jQuery method
                ];

                // if first time, include the min-width & min-height
                if ( !self[ '_'+m ] ) {
                    arr.splice(arr.length,
                        Utils.parseValue( $container.css( 'min-'+m ) ),
                        Utils.parseValue( $target.css( 'min-'+m ) )
                    );
                }

                // else extract the measures from different sources and grab the highest value
                num[ m ] = M.max.apply( M, arr );
            }
        });

        // allow setting a height ratio instead of exact value
        // useful when doing responsive galleries

        if ( self._userRatio ) {
            num.height = num.width * self._userRatio;
        }

        return num;
    },

    // Creates the thumbnails and carousel
    // can be used at any time, f.ex when the data object is manipulated
    // push is an optional argument with pushed images

    _createThumbnails : function( push ) {

        this.get( 'total' ).innerHTML = this.getDataLength();

        var src,
            thumb,
            data,

            $container,

            self = this,
            o = this._options,

            i = push ? this._data.length - push.length : 0,
            chunk = i,

            thumbchunk = [],
            loadindex = 0,

            gif = IE < 8 ? 'http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif' :
                           'data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D',

            // get previously active thumbnail, if exists
            active = (function() {
                var a = self.$('thumbnails').find('.active');
                if ( !a.length ) {
                    return false;
                }
                return a.find('img').attr('src');
            }()),

            // cache the thumbnail option
            optval = typeof o.thumbnails === 'string' ? o.thumbnails.toLowerCase() : null,

            // move some data into the instance
            // for some reason, jQuery cant handle css(property) when zooming in FF, breaking the gallery
            // so we resort to getComputedStyle for browsers who support it
            getStyle = function( prop ) {
                return doc.defaultView && doc.defaultView.getComputedStyle ?
                    doc.defaultView.getComputedStyle( thumb.container, null )[ prop ] :
                    $container.css( prop );
            },

            fake = function(image, index, container) {
                return function() {
                    $( container ).append( image );
                    self.trigger({
                        type: Galleria.THUMBNAIL,
                        thumbTarget: image,
                        index: index,
                        galleriaData: self.getData( index )
                    });
                };
            },

            onThumbEvent = function( e ) {

                // pause if option is set
                if ( o.pauseOnInteraction ) {
                    self.pause();
                }

                // extract the index from the data
                var index = $( e.currentTarget ).data( 'index' );
                if ( self.getIndex() !== index ) {
                    self.show( index );
                }

                e.preventDefault();
            },

            thumbComplete = function( thumb, callback ) {

                $( thumb.container ).css( 'visibility', 'visible' );
                self.trigger({
                    type: Galleria.THUMBNAIL,
                    thumbTarget: thumb.image,
                    index: thumb.data.order,
                    galleriaData: self.getData( thumb.data.order )
                });

                if ( typeof callback == 'function' ) {
                    callback.call( self, thumb );
                }
            },

            onThumbLoad = function( thumb, callback ) {

                // scale when ready
                thumb.scale({
                    width:    thumb.data.width,
                    height:   thumb.data.height,
                    crop:     o.thumbCrop,
                    margin:   o.thumbMargin,
                    canvas:   o.useCanvas,
                    position: o.thumbPosition,
                    complete: function( thumb ) {

                        // shrink thumbnails to fit
                        var top = ['left', 'top'],
                            arr = ['Width', 'Height'],
                            m,
                            css,
                            data = self.getData( thumb.index );

                        // calculate shrinked positions
                        $.each(arr, function( i, measure ) {
                            m = measure.toLowerCase();
                            if ( (o.thumbCrop !== true || o.thumbCrop === m ) ) {
                                css = {};
                                css[ m ] = thumb[ m ];
                                $( thumb.container ).css( css );
                                css = {};
                                css[ top[ i ] ] = 0;
                                $( thumb.image ).css( css );
                            }

                            // cache outer measures
                            thumb[ 'outer' + measure ] = $( thumb.container )[ 'outer' + measure ]( true );
                        });

                        // set high quality if downscale is moderate
                        Utils.toggleQuality( thumb.image,
                            o.thumbQuality === true ||
                            ( o.thumbQuality === 'auto' && thumb.original.width < thumb.width * 3 )
                        );

                        if ( o.thumbDisplayOrder && !thumb.lazy ) {

                            $.each( thumbchunk, function( i, th ) {
                                if ( i === loadindex && th.ready && !th.displayed ) {

                                    loadindex++;
                                    th.displayed = true;

                                    thumbComplete( th, callback );

                                    return;
                                }
                            });
                        } else {
                            thumbComplete( thumb, callback );
                        }
                    }
                });
            };

        if ( !push ) {
            this._thumbnails = [];
            this.$( 'thumbnails' ).empty();
        }

        // loop through data and create thumbnails
        for( ; this._data[ i ]; i++ ) {

            data = this._data[ i ];

            // get source from thumb or image
            src = data.thumb || data.image;

            if ( ( o.thumbnails === true || optval == 'lazy' ) && ( data.thumb || data.image ) ) {

                // add a new Picture instance
                thumb = new Galleria.Picture(i);

                // save the index
                thumb.index = i;

                // flag displayed
                thumb.displayed = false;

                // flag lazy
                thumb.lazy = false;

                // flag video
                thumb.video = false;

                // append the thumbnail
                this.$( 'thumbnails' ).append( thumb.container );

                // cache the container
                $container = $( thumb.container );

                // hide it
                $container.css( 'visibility', 'hidden' );

                thumb.data = {
                    width  : Utils.parseValue( getStyle( 'width' ) ),
                    height : Utils.parseValue( getStyle( 'height' ) ),
                    order  : i,
                    src    : src
                };

                // grab & reset size for smoother thumbnail loads
                if ( o.thumbCrop !== true ) {
                    $container.css( { width: 'auto', height: 'auto' } );
                } else {
                    $container.css( { width: thumb.data.width, height: thumb.data.height } );
                }

                // load the thumbnail
                if ( optval == 'lazy' ) {

                    $container.addClass( 'lazy' );

                    thumb.lazy = true;

                    thumb.load( gif, {
                        height: thumb.data.height,
                        width: thumb.data.width
                    });

                } else {
                    thumb.load( src, onThumbLoad );
                }

                // preload all images here
                if ( o.preload === 'all' ) {
                    thumb.preload( data.image );
                }

            // create empty spans if thumbnails is set to 'empty'
            } else if ( data.iframe || optval === 'empty' || optval === 'numbers' ) {

                thumb = {
                    container: Utils.create( 'galleria-image' ),
                    image: Utils.create( 'img', 'span' ),
                    ready: true,
                    data: {
                        order: i
                    }
                };

                // create numbered thumbnails
                if ( optval === 'numbers' ) {
                    $( thumb.image ).text( i + 1 );
                }

                if ( data.iframe ) {
                    $( thumb.image ).addClass( 'iframe' );
                }

                this.$( 'thumbnails' ).append( thumb.container );

                // we need to "fake" a loading delay before we append and trigger
                // 50+ should be enough

                window.setTimeout( ( fake )( thumb.image, i, thumb.container ), 50 + ( i*20 ) );

            // create null object to silent errors
            } else {
                thumb = {
                    container: null,
                    image: null
                };
            }

            // add events for thumbnails
            // you can control the event type using thumb_event_type
            // we'll add the same event to the source if it's kept

            $( thumb.container ).add( o.keepSource && o.linkSourceImages ? data.original : null )
                .data('index', i).on( o.thumbEventType, onThumbEvent )
                .data('thumbload', onThumbLoad);

            if (active === src) {
                $( thumb.container ).addClass( 'active' );
            }

            this._thumbnails.push( thumb );
        }

        thumbchunk = this._thumbnails.slice( chunk );

        return this;
    },

    /**
        Lazy-loads thumbnails.
        You can call this method to load lazy thumbnails at run time

        @param {Array|Number} index Index or array of indexes of thumbnails to be loaded
        @param {Function} complete Callback that is called when all lazy thumbnails have been loaded

        @returns Instance
    */

    lazyLoad: function( index, complete ) {

        var arr = index.constructor == Array ? index : [ index ],
            self = this,
            loaded = 0;

        $.each( arr, function(i, ind) {

            if ( ind > self._thumbnails.length - 1 ) {
                return;
            }

            var thumb = self._thumbnails[ ind ],
                data = thumb.data,
                callback = function() {
                    if ( ++loaded == arr.length && typeof complete == 'function' ) {
                        complete.call( self );
                    }
                },
                thumbload = $( thumb.container ).data( 'thumbload' );
            if ( thumb.video ) {
                thumbload.call( self, thumb, callback );
            } else {
                thumb.load( data.src , function( thumb ) {
                    thumbload.call( self, thumb, callback );
                });
            }
        });

        return this;

    },

    /**
        Lazy-loads thumbnails in chunks.
        This method automatcally chops up the loading process of many thumbnails into chunks

        @param {Number} size Size of each chunk to be loaded
        @param {Number} [delay] Delay between each loads

        @returns Instance
    */

    lazyLoadChunks: function( size, delay ) {

        var len = this.getDataLength(),
            i = 0,
            n = 0,
            arr = [],
            temp = [],
            self = this;

        delay = delay || 0;

        for( ; i<len; i++ ) {
            temp.push(i);
            if ( ++n == size || i == len-1 ) {
                arr.push( temp );
                n = 0;
                temp = [];
            }
        }

        var init = function( wait ) {
            var a = arr.shift();
            if ( a ) {
                window.setTimeout(function() {
                    self.lazyLoad(a, function() {
                        init( true );
                    });
                }, ( delay && wait ) ? delay : 0 );
            }
        };

        init( false );

        return this;

    },

    // the internal _run method should be called after loading data into galleria
    // makes sure the gallery has proper measurements before postrun & ready
    _run : function() {

        var self = this;

        self._createThumbnails();

        // make sure we have a stageHeight && stageWidth

        Utils.wait({

            timeout: 10000,

            until: function() {

                // Opera crap
                if ( Galleria.OPERA ) {
                    self.$( 'stage' ).css( 'display', 'inline-block' );
                }

                self._stageWidth  = self.$( 'stage' ).width();
                self._stageHeight = self.$( 'stage' ).height();

                return( self._stageWidth &&
                        self._stageHeight > 50 ); // what is an acceptable height?
            },

            success: function() {

                // save the instance
                _galleries.push( self );

                // postrun some stuff after the gallery is ready

                // create the touch slider
                if ( self._options.swipe ) {

                    var $images = self.$( 'images' ).width( self.getDataLength() * self._stageWidth );
                    $.each( new Array( self.getDataLength() ), function(i) {

                        var image = new Galleria.Picture(),
                            data = self.getData(i);

                        $( image.container ).css({
                            position: 'absolute',
                            top: 0,
                            left: self._stageWidth*i
                        }).prepend( self._layers[i] = $( Utils.create('galleria-layer') ).css({
                            position: 'absolute',
                            top:0, left:0, right:0, bottom:0,
                            zIndex:2
                        })[0] ).appendTo( $images );

                        if( data.video ) {
                            _playIcon( image.container );
                        }

                        self._controls.slides.push(image);

                        var frame = new Galleria.Picture();
                        frame.isIframe = true;

                        $( frame.container ).attr('class', 'galleria-frame').css({
                            position: 'absolute',
                            top: 0,
                            left: 0,
                            zIndex: 4,
                            background: '#000',
                            display: 'none'
                        }).appendTo( image.container );

                        self._controls.frames.push(frame);
                    });

                    self.finger.setup();
                }

                // show counter
                Utils.show( self.get('counter') );

                // bind carousel nav
                if ( self._options.carousel ) {
                    self._carousel.bindControls();
                }

                // start autoplay
                if ( self._options.autoplay ) {

                    self.pause();

                    if ( typeof self._options.autoplay === 'number' ) {
                        self._playtime = self._options.autoplay;
                    }

                    self._playing = true;
                }
                // if second load, just do the show and return
                if ( self._firstrun ) {

                    if ( self._options.autoplay ) {
                        self.trigger( Galleria.PLAY );
                    }

                    if ( typeof self._options.show === 'number' ) {
                        self.show( self._options.show );
                    }
                    return;
                }

                self._firstrun = true;

                // initialize the History plugin
                if ( Galleria.History ) {

                    // bind the show method
                    Galleria.History.change(function( value ) {

                        // if ID is NaN, the user pressed back from the first image
                        // return to previous address
                        if ( isNaN( value ) ) {
                            window.history.go(-1);

                        // else show the image
                        } else {
                            self.show( value, undef, true );
                        }
                    });
                }

                self.trigger( Galleria.READY );

                // call the theme init method
                Galleria.theme.init.call( self, self._options );

                // Trigger Galleria.ready
                $.each( Galleria.ready.callbacks, function(i ,fn) {
                    if ( typeof fn == 'function' ) {
                        fn.call( self, self._options );
                    }
                });

                // call the extend option
                self._options.extend.call( self, self._options );

                // show the initial image
                // first test for permalinks in history
                if ( /^[0-9]{1,4}$/.test( HASH ) && Galleria.History ) {
                    self.show( HASH, undef, true );

                } else if( self._data[ self._options.show ] ) {
                    self.show( self._options.show );
                }

                // play trigger
                if ( self._options.autoplay ) {
                    self.trigger( Galleria.PLAY );
                }
            },

            error: function() {
                Galleria.raise('Stage width or height is too small to show the gallery. Traced measures: width:' + self._stageWidth + 'px, height: ' + self._stageHeight + 'px.', true);
            }

        });
    },

    /**
        Loads data into the gallery.
        You can call this method on an existing gallery to reload the gallery with new data.

        @param {Array|string} [source] Optional JSON array of data or selector of where to find data in the document.
        Defaults to the Galleria target or dataSource option.

        @param {string} [selector] Optional element selector of what elements to parse.
        Defaults to 'img'.

        @param {Function} [config] Optional function to modify the data extraction proceedure from the selector.
        See the dataConfig option for more information.

        @returns Instance
    */

    load : function( source, selector, config ) {

        var self = this,
            o = this._options;

        // empty the data array
        this._data = [];

        // empty the thumbnails
        this._thumbnails = [];
        this.$('thumbnails').empty();

        // shorten the arguments
        if ( typeof selector === 'function' ) {
            config = selector;
            selector = null;
        }

        // use the source set by target
        source = source || o.dataSource;

        // use selector set by option
        selector = selector || o.dataSelector;

        // use the dataConfig set by option
        config = config || o.dataConfig;

        // if source is a true object, make it into an array
        if( $.isPlainObject( source ) ) {
            source = [source];
        }

        // check if the data is an array already
        if ( $.isArray( source ) ) {
            if ( this.validate( source ) ) {
                this._data = source;
            } else {
                Galleria.raise( 'Load failed: JSON Array not valid.' );
            }
        } else {

            // add .video and .iframe to the selector (1.2.7)
            selector += ',.video,.iframe';

            // loop through images and set data
            $( source ).find( selector ).each( function( i, elem ) {

                elem = $( elem );
                var data = {},
                    parent = elem.parent(),
                    href = parent.attr( 'href' ),
                    rel  = parent.attr( 'rel' );

                if( href && ( elem[0].nodeName == 'IMG' || elem.hasClass('video') ) && _videoTest( href ) ) {
                    data.video = href;
                } else if( href && elem.hasClass('iframe') ) {
                    data.iframe = href;
                } else {
                    data.image = data.big = href;
                }

                if ( rel ) {
                    data.big = rel;
                }

                // alternative extraction from HTML5 data attribute, added in 1.2.7
                $.each( 'big title description link layer image'.split(' '), function( i, val ) {
                    if ( elem.data(val) ) {
                        data[ val ] = elem.data(val).toString();
                    }
                });

                if ( !data.big ) {
                    data.big = data.image;
                }

                // mix default extractions with the hrefs and config
                // and push it into the data array
                self._data.push( $.extend({

                    title:       elem.attr('title') || '',
                    thumb:       elem.attr('src'),
                    image:       elem.attr('src'),
                    big:         elem.attr('src'),
                    description: elem.attr('alt') || '',
                    link:        elem.attr('longdesc'),
                    original:    elem.get(0) // saved as a reference

                }, data, config( elem ) ) );

            });
        }

        if ( typeof o.dataSort == 'function' ) {
            protoArray.sort.call( this._data, o.dataSort );
        } else if ( o.dataSort == 'random' ) {
            this._data.sort( function() {
                return M.round(M.random())-0.5;
            });
        }

        // trigger the DATA event and return
        if ( this.getDataLength() ) {
            this._parseData( function() {
                this.trigger( Galleria.DATA );
            } );
        }
        return this;

    },

    // make sure the data works properly
    _parseData : function( callback ) {

        var self = this,
            current,
            ready = false,
            onload = function() {
                var complete = true;
                $.each( self._data, function( i, data ) {
                    if ( data.loading ) {
                        complete = false;
                        return false;
                    }
                });
                if ( complete && !ready ) {
                    ready = true;
                    callback.call( self );
                }
            };

        $.each( this._data, function( i, data ) {

            current = self._data[ i ];

            // copy image as thumb if no thumb exists
            if ( 'thumb' in data === false ) {
                current.thumb = data.image;
            }
            // copy image as big image if no biggie exists
            if ( !data.big ) {
                current.big = data.image;
            }
            // parse video
            if ( 'video' in data ) {
                var result = _videoTest( data.video );

                if ( result ) {
                    current.iframe = new Video(result.provider, result.id ).embed() + (function() {

                        // add options
                        if ( typeof self._options[ result.provider ] == 'object' ) {
                            var str = '?', arr = [];
                            $.each( self._options[ result.provider ], function( key, val ) {
                                arr.push( key + '=' + val );
                            });

                            // small youtube specifics, perhaps move to _video later
                            if ( result.provider == 'youtube' ) {
                                arr = ['wmode=opaque'].concat(arr);
                            }
                            return str + arr.join('&');
                        }
                        return '';
                    }());

                    // pre-fetch video providers media

                    if( !current.thumb || !current.image ) {
                        $.each( ['thumb', 'image'], function( i, type ) {
                            if ( type == 'image' && !self._options.videoPoster ) {
                                current.image = undef;
                                return;
                            }
                            var video = new Video( result.provider, result.id );
                            if ( !current[ type ] ) {
                                current.loading = true;
                                video.getMedia( type, (function(current, type) {
                                    return function(src) {
                                        current[ type ] = src;
                                        if ( type == 'image' && !current.big ) {
                                            current.big = current.image;
                                        }
                                        delete current.loading;
                                        onload();
                                    };
                                }( current, type )));
                            }
                        });
                    }
                }
            }
        });

        onload();

        return this;
    },

    /**
        Destroy the Galleria instance and recover the original content

        @example this.destroy();

        @returns Instance
    */

    destroy : function() {
        this.$( 'target' ).data( 'galleria', null );
        this.$( 'container' ).off( 'galleria' );
        this.get( 'target' ).innerHTML = this._original.html;
        this.clearTimer();
        Utils.removeFromArray( _instances, this );
        Utils.removeFromArray( _galleries, this );
        if ( Galleria._waiters.length ) {
            $.each( Galleria._waiters, function( i, w ) {
                if ( w ) window.clearTimeout( w );
            });
        }
        return this;
    },

    /**
        Adds and/or removes images from the gallery
        Works just like Array.splice
        https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice

        @example this.splice( 2, 4 ); // removes 4 images after the second image

        @returns Instance
    */

    splice : function() {
        var self = this,
            args = Utils.array( arguments );
        window.setTimeout(function() {
            protoArray.splice.apply( self._data, args );
            self._parseData( function() {
                self._createThumbnails();
            });
        },2);
        return self;
    },

    /**
        Append images to the gallery
        Works just like Array.push
        https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push

        @example this.push({ image: 'image1.jpg' }); // appends the image to the gallery

        @returns Instance
    */

    push : function() {
        var self = this,
            args = Utils.array( arguments );

        if ( args.length == 1 && args[0].constructor == Array ) {
            args = args[0];
        }

        window.setTimeout(function() {
            protoArray.push.apply( self._data, args );
            self._parseData( function() {
                self._createThumbnails( args );
            });
        }, 2);
        return self;
    },

    _getActive : function() {
        return this._controls.getActive();
    },

    validate : function( data ) {
        // todo: validate a custom data array
        return true;
    },

    /**
        Bind any event to Galleria

        @param {string} type The Event type to listen for
        @param {Function} fn The function to execute when the event is triggered

        @example this.bind( 'image', function() { Galleria.log('image shown') });

        @returns Instance
    */

    bind : function(type, fn) {

        // allow 'image' instead of Galleria.IMAGE
        type = _patchEvent( type );

        this.$( 'container' ).on( type, this.proxy(fn) );
        return this;
    },

    /**
        Unbind any event to Galleria

        @param {string} type The Event type to forget

        @returns Instance
    */

    unbind : function(type) {

        type = _patchEvent( type );

        this.$( 'container' ).off( type );
        return this;
    },

    /**
        Manually trigger a Galleria event

        @param {string} type The Event to trigger

        @returns Instance
    */

    trigger : function( type ) {

        type = typeof type === 'object' ?
            $.extend( type, { scope: this } ) :
            { type: _patchEvent( type ), scope: this };

        this.$( 'container' ).trigger( type );

        return this;
    },

    /**
        Assign an "idle state" to any element.
        The idle state will be applied after a certain amount of idle time
        Useful to hide f.ex navigation when the gallery is inactive

        @param {HTMLElement|string} elem The Dom node or selector to apply the idle state to
        @param {Object} styles the CSS styles to apply when in idle mode
        @param {Object} [from] the CSS styles to apply when in normal
        @param {Boolean} [hide] set to true if you want to hide it first

        @example addIdleState( this.get('image-nav'), { opacity: 0 });
        @example addIdleState( '.galleria-image-nav', { top: -200 }, true);

        @returns Instance
    */

    addIdleState: function( elem, styles, from, hide ) {
        this._idle.add.apply( this._idle, Utils.array( arguments ) );
        return this;
    },

    /**
        Removes any idle state previously set using addIdleState()

        @param {HTMLElement|string} elem The Dom node or selector to remove the idle state from.

        @returns Instance
    */

    removeIdleState: function( elem ) {
        this._idle.remove.apply( this._idle, Utils.array( arguments ) );
        return this;
    },

    /**
        Force Galleria to enter idle mode.

        @returns Instance
    */

    enterIdleMode: function() {
        this._idle.hide();
        return this;
    },

    /**
        Force Galleria to exit idle mode.

        @returns Instance
    */

    exitIdleMode: function() {
        this._idle.showAll();
        return this;
    },

    /**
        Enter FullScreen mode

        @param {Function} callback the function to be executed when the fullscreen mode is fully applied.

        @returns Instance
    */

    enterFullscreen: function( callback ) {
        this._fullscreen.enter.apply( this, Utils.array( arguments ) );
        return this;
    },

    /**
        Exits FullScreen mode

        @param {Function} callback the function to be executed when the fullscreen mode is fully applied.

        @returns Instance
    */

    exitFullscreen: function( callback ) {
        this._fullscreen.exit.apply( this, Utils.array( arguments ) );
        return this;
    },

    /**
        Toggle FullScreen mode

        @param {Function} callback the function to be executed when the fullscreen mode is fully applied or removed.

        @returns Instance
    */

    toggleFullscreen: function( callback ) {
        this._fullscreen[ this.isFullscreen() ? 'exit' : 'enter'].apply( this, Utils.array( arguments ) );
        return this;
    },

    /**
        Adds a tooltip to any element.
        You can also call this method with an object as argument with elemID:value pairs to apply tooltips to (see examples)

        @param {HTMLElement} elem The DOM Node to attach the event to
        @param {string|Function} value The tooltip message. Can also be a function that returns a string.

        @example this.bindTooltip( this.get('thumbnails'), 'My thumbnails');
        @example this.bindTooltip( this.get('thumbnails'), function() { return 'My thumbs' });
        @example this.bindTooltip( { image_nav: 'Navigation' });

        @returns Instance
    */

    bindTooltip: function( elem, value ) {
        this._tooltip.bind.apply( this._tooltip, Utils.array(arguments) );
        return this;
    },

    /**
        Note: this method is deprecated. Use refreshTooltip() instead.

        Redefine a tooltip.
        Use this if you want to re-apply a tooltip value to an already bound tooltip element.

        @param {HTMLElement} elem The DOM Node to attach the event to
        @param {string|Function} value The tooltip message. Can also be a function that returns a string.

        @returns Instance
    */

    defineTooltip: function( elem, value ) {
        this._tooltip.define.apply( this._tooltip, Utils.array(arguments) );
        return this;
    },

    /**
        Refresh a tooltip value.
        Use this if you want to change the tooltip value at runtime, f.ex if you have a play/pause toggle.

        @param {HTMLElement} elem The DOM Node that has a tooltip that should be refreshed

        @returns Instance
    */

    refreshTooltip: function( elem ) {
        this._tooltip.show.apply( this._tooltip, Utils.array(arguments) );
        return this;
    },

    /**
        Open a pre-designed lightbox with the currently active image.
        You can control some visuals using gallery options.

        @returns Instance
    */

    openLightbox: function() {
        this._lightbox.show.apply( this._lightbox, Utils.array( arguments ) );
        return this;
    },

    /**
        Close the lightbox.

        @returns Instance
    */

    closeLightbox: function() {
        this._lightbox.hide.apply( this._lightbox, Utils.array( arguments ) );
        return this;
    },

    /**
        Check if a variation exists

        @returns {Boolean} If the variation has been applied
    */

    hasVariation: function( variation ) {
        return $.inArray( variation, this._options.variation.split(/\s+/) ) > -1;
    },

    /**
        Get the currently active image element.

        @returns {HTMLElement} The image element
    */

    getActiveImage: function() {
        var active = this._getActive();
        return active ? active.image : undef;
    },

    /**
        Get the currently active thumbnail element.

        @returns {HTMLElement} The thumbnail element
    */

    getActiveThumb: function() {
        return this._thumbnails[ this._active ].image || undef;
    },

    /**
        Get the mouse position relative to the gallery container

        @param e The mouse event

        @example

var gallery = this;
$(document).mousemove(function(e) {
    console.log( gallery.getMousePosition(e).x );
});

        @returns {Object} Object with x & y of the relative mouse postion
    */

    getMousePosition : function(e) {
        return {
            x: e.pageX - this.$( 'container' ).offset().left,
            y: e.pageY - this.$( 'container' ).offset().top
        };
    },

    /**
        Adds a panning effect to the image

        @param [img] The optional image element. If not specified it takes the currently active image

        @returns Instance
    */

    addPan : function( img ) {

        if ( this._options.imageCrop === false ) {
            return;
        }

        img = $( img || this.getActiveImage() );

        // define some variables and methods
        var self   = this,
            x      = img.width() / 2,
            y      = img.height() / 2,
            destX  = parseInt( img.css( 'left' ), 10 ),
            destY  = parseInt( img.css( 'top' ), 10 ),
            curX   = destX || 0,
            curY   = destY || 0,
            distX  = 0,
            distY  = 0,
            active = false,
            ts     = Utils.timestamp(),
            cache  = 0,
            move   = 0,

            // positions the image
            position = function( dist, cur, pos ) {
                if ( dist > 0 ) {
                    move = M.round( M.max( dist * -1, M.min( 0, cur ) ) );
                    if ( cache !== move ) {

                        cache = move;

                        if ( IE === 8 ) { // scroll is faster for IE
                            img.parent()[ 'scroll' + pos ]( move * -1 );
                        } else {
                            var css = {};
                            css[ pos.toLowerCase() ] = move;
                            img.css(css);
                        }
                    }
                }
            },

            // calculates mouse position after 50ms
            calculate = function(e) {
                if (Utils.timestamp() - ts < 50) {
                    return;
                }
                active = true;
                x = self.getMousePosition(e).x;
                y = self.getMousePosition(e).y;
            },

            // the main loop to check
            loop = function(e) {

                if (!active) {
                    return;
                }

                distX = img.width() - self._stageWidth;
                distY = img.height() - self._stageHeight;
                destX = x / self._stageWidth * distX * -1;
                destY = y / self._stageHeight * distY * -1;
                curX += ( destX - curX ) / self._options.imagePanSmoothness;
                curY += ( destY - curY ) / self._options.imagePanSmoothness;

                position( distY, curY, 'Top' );
                position( distX, curX, 'Left' );

            };

        // we need to use scroll in IE8 to speed things up
        if ( IE === 8 ) {

            img.parent().scrollTop( curY * -1 ).scrollLeft( curX * -1 );
            img.css({
                top: 0,
                left: 0
            });

        }

        // unbind and bind event
        this.$( 'stage' ).off( 'mousemove', calculate ).on( 'mousemove', calculate );

        // loop the loop
        this.addTimer( 'pan' + self._id, loop, 50, true);

        return this;
    },

    /**
        Brings the scope into any callback

        @param fn The callback to bring the scope into
        @param [scope] Optional scope to bring

        @example $('#fullscreen').click( this.proxy(function() { this.enterFullscreen(); }) )

        @returns {Function} Return the callback with the gallery scope
    */

    proxy : function( fn, scope ) {
        if ( typeof fn !== 'function' ) {
            return F;
        }
        scope = scope || this;
        return function() {
            return fn.apply( scope, Utils.array( arguments ) );
        };
    },

    /**
        Removes the panning effect set by addPan()

        @returns Instance
    */

    removePan: function() {

        // todo: doublecheck IE8

        this.$( 'stage' ).off( 'mousemove' );

        this.clearTimer( 'pan' + this._id );

        return this;
    },

    /**
        Adds an element to the Galleria DOM array.
        When you add an element here, you can access it using element ID in many API calls

        @param {string} id The element ID you wish to use. You can add many elements by adding more arguments.

        @example addElement('mybutton');
        @example addElement('mybutton','mylink');

        @returns Instance
    */

    addElement : function( id ) {

        var dom = this._dom;

        $.each( Utils.array(arguments), function( i, blueprint ) {
           dom[ blueprint ] = Utils.create( 'galleria-' + blueprint );
        });

        return this;
    },

    /**
        Attach keyboard events to Galleria

        @param {Object} map The map object of events.
        Possible keys are 'UP', 'DOWN', 'LEFT', 'RIGHT', 'RETURN', 'ESCAPE', 'BACKSPACE', and 'SPACE'.

        @example

this.attachKeyboard({
    right: this.next,
    left: this.prev,
    up: function() {
        console.log( 'up key pressed' )
    }
});

        @returns Instance
    */

    attachKeyboard : function( map ) {
        this._keyboard.attach.apply( this._keyboard, Utils.array( arguments ) );
        return this;
    },

    /**
        Detach all keyboard events to Galleria

        @returns Instance
    */

    detachKeyboard : function() {
        this._keyboard.detach.apply( this._keyboard, Utils.array( arguments ) );
        return this;
    },

    /**
        Fast helper for appending galleria elements that you added using addElement()

        @param {string} parentID The parent element ID where the element will be appended
        @param {string} childID the element ID that should be appended

        @example this.addElement('myElement');
        this.appendChild( 'info', 'myElement' );

        @returns Instance
    */

    appendChild : function( parentID, childID ) {
        this.$( parentID ).append( this.get( childID ) || childID );
        return this;
    },

    /**
        Fast helper for prepending galleria elements that you added using addElement()

        @param {string} parentID The parent element ID where the element will be prepended
        @param {string} childID the element ID that should be prepended

        @example

this.addElement('myElement');
this.prependChild( 'info', 'myElement' );

        @returns Instance
    */

    prependChild : function( parentID, childID ) {
        this.$( parentID ).prepend( this.get( childID ) || childID );
        return this;
    },

    /**
        Remove an element by blueprint

        @param {string} elemID The element to be removed.
        You can remove multiple elements by adding arguments.

        @returns Instance
    */

    remove : function( elemID ) {
        this.$( Utils.array( arguments ).join(',') ).remove();
        return this;
    },

    // a fast helper for building dom structures
    // leave this out of the API for now

    append : function( data ) {
        var i, j;
        for( i in data ) {
            if ( data.hasOwnProperty( i ) ) {
                if ( data[i].constructor === Array ) {
                    for( j = 0; data[i][j]; j++ ) {
                        this.appendChild( i, data[i][j] );
                    }
                } else {
                    this.appendChild( i, data[i] );
                }
            }
        }
        return this;
    },

    // an internal helper for scaling according to options
    _scaleImage : function( image, options ) {

        image = image || this._controls.getActive();

        // janpub (JH) fix:
        // image might be unselected yet
        // e.g. when external logics rescales the gallery on window resize events
        if( !image ) {
            return;
        }

        var complete,

            scaleLayer = function( img ) {
                $( img.container ).children(':first').css({
                    top: M.max(0, Utils.parseValue( img.image.style.top )),
                    left: M.max(0, Utils.parseValue( img.image.style.left )),
                    width: Utils.parseValue( img.image.width ),
                    height: Utils.parseValue( img.image.height )
                });
            };

        options = $.extend({
            width:       this._stageWidth,
            height:      this._stageHeight,
            crop:        this._options.imageCrop,
            max:         this._options.maxScaleRatio,
            min:         this._options.minScaleRatio,
            margin:      this._options.imageMargin,
            position:    this._options.imagePosition,
            iframelimit: this._options.maxVideoSize
        }, options );

        if ( this._options.layerFollow && this._options.imageCrop !== true ) {

            if ( typeof options.complete == 'function' ) {
                complete = options.complete;
                options.complete = function() {
                    complete.call( image, image );
                    scaleLayer( image );
                };
            } else {
                options.complete = scaleLayer;
            }

        } else {
            $( image.container ).children(':first').css({ top: 0, left: 0 });
        }

        image.scale( options );
        return this;
    },

    /**
        Updates the carousel,
        useful if you resize the gallery and want to re-check if the carousel nav is needed.

        @returns Instance
    */

    updateCarousel : function() {
        this._carousel.update();
        return this;
    },

    /**
        Resize the entire gallery container

        @param {Object} [measures] Optional object with width/height specified
        @param {Function} [complete] The callback to be called when the scaling is complete

        @returns Instance
    */

    resize : function( measures, complete ) {

        if ( typeof measures == 'function' ) {
            complete = measures;
            measures = undef;
        }

        measures = $.extend( { width:0, height:0 }, measures );

        var self = this,
            $container = this.$( 'container' );

        $.each( measures, function( m, val ) {
            if ( !val ) {
                $container[ m ]( 'auto' );
                measures[ m ] = self._getWH()[ m ];
            }
        });

        $.each( measures, function( m, val ) {
            $container[ m ]( val );
        });

        return this.rescale( complete );

    },

    /**
        Rescales the gallery

        @param {number} width The target width
        @param {number} height The target height
        @param {Function} complete The callback to be called when the scaling is complete

        @returns Instance
    */

    rescale : function( width, height, complete ) {

        var self = this;

        // allow rescale(fn)
        if ( typeof width === 'function' ) {
            complete = width;
            width = undef;
        }

        var scale = function() {

            // set stagewidth
            self._stageWidth = width || self.$( 'stage' ).width();
            self._stageHeight = height || self.$( 'stage' ).height();

            if ( self._options.swipe ) {
                $.each( self._controls.slides, function(i, img) {
                    self._scaleImage( img );
                    $( img.container ).css('left', self._stageWidth * i);
                });
                self.$('images').css('width', self._stageWidth * self.getDataLength());
            } else {
                // scale the active image
                self._scaleImage();
            }

            if ( self._options.carousel ) {
                self.updateCarousel();
            }

            var frame = self._controls.frames[ self._controls.active ];

            if (frame) {
                self._controls.frames[ self._controls.active ].scale({
                    width: self._stageWidth,
                    height: self._stageHeight,
                    iframelimit: self._options.maxVideoSize
                });
            }

            self.trigger( Galleria.RESCALE );

            if ( typeof complete === 'function' ) {
                complete.call( self );
            }
        };

        scale.call( self );

        return this;
    },

    /**
        Refreshes the gallery.
        Useful if you change image options at runtime and want to apply the changes to the active image.

        @returns Instance
    */

    refreshImage : function() {
        this._scaleImage();
        if ( this._options.imagePan ) {
            this.addPan();
        }
        return this;
    },

    _preload: function() {
        if ( this._options.preload ) {
            var p, i,
                n = this.getNext(),
                ndata;
            try {
                for ( i = this._options.preload; i > 0; i-- ) {
                    p = new Galleria.Picture();
                    ndata = this.getData( n );
                    p.preload( this.isFullscreen() && ndata.big ? ndata.big : ndata.image );
                    n = this.getNext( n );
                }
            } catch(e) {}
        }
    },

    /**
        Shows an image by index

        @param {number|boolean} index The index to show
        @param {Boolean} rewind A boolean that should be true if you want the transition to go back

        @returns Instance
    */

    show : function( index, rewind, _history ) {

        var swipe = this._options.swipe;

        // do nothing queue is long || index is false || queue is false and transition is in progress
        if ( !swipe &&
            ( this._queue.length > 3 || index === false || ( !this._options.queue && this._queue.stalled ) ) ) {
            return;
        }

        index = M.max( 0, M.min( parseInt( index, 10 ), this.getDataLength() - 1 ) );

        rewind = typeof rewind !== 'undefined' ? !!rewind : index < this.getIndex();

        _history = _history || false;

        // do the history thing and return
        if ( !_history && Galleria.History ) {
            Galleria.History.set( index.toString() );
            return;
        }

        if ( this.finger && index !== this._active ) {
            this.finger.to = -( index*this.finger.width );
            this.finger.index = index;
        }
        this._active = index;

        // we do things a bit simpler in swipe:
        if ( swipe ) {

            var data = this.getData(index),
                self = this;
            if ( !data ) {
                return;
            }

            var src = this.isFullscreen() && data.big ? data.big : ( data.image || data.iframe ),
                image = this._controls.slides[index],
                cached = image.isCached( src ),
                thumb = this._thumbnails[ index ];

            var evObj = {
                cached: cached,
                index: index,
                rewind: rewind,
                imageTarget: image.image,
                thumbTarget: thumb.image,
                galleriaData: data
            };

            this.trigger($.extend(evObj, {
                type: Galleria.LOADSTART
            }));

            self.$('container').removeClass( 'videoplay' );

            var complete = function() {

                self._layers[index].innerHTML = self.getData().layer || '';

                self.trigger($.extend(evObj, {
                    type: Galleria.LOADFINISH
                }));
                self._playCheck();
            };

            self._preload();

            window.setTimeout(function() {

                // load if not ready
                if ( !image.ready || $(image.image).attr('src') != src ) {
                    if ( data.iframe && !data.image ) {
                        image.isIframe = true;
                    }
                    image.load(src, function(image) {
                        self._scaleImage(image, complete).trigger($.extend(evObj, {
                            type: Galleria.IMAGE
                        }));
                        complete();
                    });
                } else {
                    self.trigger($.extend(evObj, {
                        type: Galleria.IMAGE
                    }));
                    complete();
                }
            }, 100);

        } else {
            protoArray.push.call( this._queue, {
                index : index,
                rewind : rewind
            });
            if ( !this._queue.stalled ) {
                this._show();
            }
        }

        return this;
    },

    // the internal _show method does the actual showing
    _show : function() {

        // shortcuts
        var self = this,
            queue = this._queue[ 0 ],
            data = this.getData( queue.index );

        if ( !data ) {
            return;
        }

        var src = this.isFullscreen() && data.big ? data.big : ( data.image || data.iframe ),
            active = this._controls.getActive(),
            next = this._controls.getNext(),
            cached = next.isCached( src ),
            thumb = this._thumbnails[ queue.index ],
            mousetrigger = function() {
                $( next.image ).trigger( 'mouseup' );
            };

        self.$('container').toggleClass('iframe', !!data.isIframe).removeClass( 'videoplay' );

        // to be fired when loading & transition is complete:
        var complete = (function( data, next, active, queue, thumb ) {

            return function() {

                var win;

                _transitions.active = false;

                // optimize quality
                Utils.toggleQuality( next.image, self._options.imageQuality );

                // remove old layer
                self._layers[ self._controls.active ].innerHTML = '';

                // swap
                $( active.container ).css({
                    zIndex: 0,
                    opacity: 0
                }).show();

                $( active.container ).find( 'iframe, .galleria-videoicon' ).remove();
                $( self._controls.frames[ self._controls.active ].container ).hide();

                $( next.container ).css({
                    zIndex: 1,
                    left: 0,
                    top: 0
                }).show();

                self._controls.swap();

                // add pan according to option
                if ( self._options.imagePan ) {
                    self.addPan( next.image );
                }

                // make the image clickable
                // order of precedence: iframe, link, lightbox, clicknext
                if ( ( data.iframe && data.image ) || data.link || self._options.lightbox || self._options.clicknext ) {

                    $( next.image ).css({
                        cursor: 'pointer'
                    }).on( 'mouseup', function( e ) {

                        // non-left click
                        if ( typeof e.which == 'number' && e.which > 1 ) {
                            return;
                        }

                        // iframe / video
                        if ( data.iframe ) {

                            if ( self.isPlaying() ) {
                                self.pause();
                            }
                            var frame = self._controls.frames[ self._controls.active ],
                                w = self._stageWidth,
                                h = self._stageHeight;

                            $( frame.container ).css({
                                width: w,
                                height: h,
                                opacity: 0
                            }).show().animate({
                                opacity: 1
                            }, 200);

                            window.setTimeout(function() {
                                frame.load( data.iframe + ( data.video ? '&autoplay=1' : '' ), {
                                    width: w,
                                    height: h
                                }, function( frame ) {
                                    self.$( 'container' ).addClass( 'videoplay' );
                                    frame.scale({
                                        width: self._stageWidth,
                                        height: self._stageHeight,
                                        iframelimit: data.video ? self._options.maxVideoSize : undef
                                    });
                                });
                            }, 100);

                            return;
                        }

                        // clicknext
                        if ( self._options.clicknext && !Galleria.TOUCH ) {
                            if ( self._options.pauseOnInteraction ) {
                                self.pause();
                            }
                            self.next();
                            return;
                        }

                        // popup link
                        if ( data.link ) {
                            if ( self._options.popupLinks ) {
                                win = window.open( data.link, '_blank' );
                            } else {
                                window.location.href = data.link;
                            }
                            return;
                        }

                        if ( self._options.lightbox ) {
                            self.openLightbox();
                        }

                    });
                }

                // check if we are playing
                self._playCheck();

                // trigger IMAGE event
                self.trigger({
                    type: Galleria.IMAGE,
                    index: queue.index,
                    imageTarget: next.image,
                    thumbTarget: thumb.image,
                    galleriaData: data
                });

                // remove the queued image
                protoArray.shift.call( self._queue );

                // remove stalled
                self._queue.stalled = false;

                // if we still have images in the queue, show it
                if ( self._queue.length ) {
                    self._show();
                }

            };
        }( data, next, active, queue, thumb ));

        // let the carousel follow
        if ( this._options.carousel && this._options.carouselFollow ) {
            this._carousel.follow( queue.index );
        }

        // preload images
        self._preload();

        // show the next image, just in case
        Utils.show( next.container );

        next.isIframe = data.iframe && !data.image;

        // add active classes
        $( self._thumbnails[ queue.index ].container )
            .addClass( 'active' )
            .siblings( '.active' )
            .removeClass( 'active' );

        // trigger the LOADSTART event
        self.trigger( {
            type: Galleria.LOADSTART,
            cached: cached,
            index: queue.index,
            rewind: queue.rewind,
            imageTarget: next.image,
            thumbTarget: thumb.image,
            galleriaData: data
        });

        // stall the queue
        self._queue.stalled = true;

        // begin loading the next image
        next.load( src, function( next ) {

            // add layer HTML
            var layer = $( self._layers[ 1-self._controls.active ] ).html( data.layer || '' ).hide();

            self._scaleImage( next, {

                complete: function( next ) {

                    // toggle low quality for IE
                    if ( 'image' in active ) {
                        Utils.toggleQuality( active.image, false );
                    }
                    Utils.toggleQuality( next.image, false );

                    // remove the image panning, if applied
                    // TODO: rethink if this is necessary
                    self.removePan();

                    // set the captions and counter
                    self.setInfo( queue.index );
                    self.setCounter( queue.index );

                    // show the layer now
                    if ( data.layer ) {
                        layer.show();
                        // inherit click events set on image
                        if ( ( data.iframe && data.image ) || data.link || self._options.lightbox || self._options.clicknext ) {
                            layer.css( 'cursor', 'pointer' ).off( 'mouseup' ).mouseup( mousetrigger );
                        }
                    }

                    // add play icon
                    if( data.video && data.image ) {
                        _playIcon( next.container );
                    }

                    var transition = self._options.transition;

                    // can JavaScript loop through objects in order? yes.
                    $.each({
                        initial: active.image === null,
                        touch: Galleria.TOUCH,
                        fullscreen: self.isFullscreen()
                    }, function( type, arg ) {
                        if ( arg && self._options[ type + 'Transition' ] !== undef ) {
                            transition = self._options[ type + 'Transition' ];
                            return false;
                        }
                    });

                    // validate the transition
                    if ( transition in _transitions.effects === false ) {
                        complete();
                    } else {
                        var params = {
                            prev: active.container,
                            next: next.container,
                            rewind: queue.rewind,
                            speed: self._options.transitionSpeed || 400
                        };

                        _transitions.active = true;

                        // call the transition function and send some stuff
                        _transitions.init.call( self, transition, params, complete );

                    }

                    // trigger the LOADFINISH event
                    self.trigger({
                        type: Galleria.LOADFINISH,
                        cached: cached,
                        index: queue.index,
                        rewind: queue.rewind,
                        imageTarget: next.image,
                        thumbTarget: self._thumbnails[ queue.index ].image,
                        galleriaData: self.getData( queue.index )
                    });
                }
            });
        });
    },

    /**
        Gets the next index

        @param {number} [base] Optional starting point

        @returns {number} the next index, or the first if you are at the first (looping)
    */

    getNext : function( base ) {
        base = typeof base === 'number' ? base : this.getIndex();
        return base === this.getDataLength() - 1 ? 0 : base + 1;
    },

    /**
        Gets the previous index

        @param {number} [base] Optional starting point

        @returns {number} the previous index, or the last if you are at the first (looping)
    */

    getPrev : function( base ) {
        base = typeof base === 'number' ? base : this.getIndex();
        return base === 0 ? this.getDataLength() - 1 : base - 1;
    },

    /**
        Shows the next image in line

        @returns Instance
    */

    next : function() {
        if ( this.getDataLength() > 1 ) {
            this.show( this.getNext(), false );
        }
        return this;
    },

    /**
        Shows the previous image in line

        @returns Instance
    */

    prev : function() {
        if ( this.getDataLength() > 1 ) {
            this.show( this.getPrev(), true );
        }
        return this;
    },

    /**
        Retrieve a DOM element by element ID

        @param {string} elemId The delement ID to fetch

        @returns {HTMLElement} The elements DOM node or null if not found.
    */

    get : function( elemId ) {
        return elemId in this._dom ? this._dom[ elemId ] : null;
    },

    /**
        Retrieve a data object

        @param {number} index The data index to retrieve.
        If no index specified it will take the currently active image

        @returns {Object} The data object
    */

    getData : function( index ) {
        return index in this._data ?
            this._data[ index ] : this._data[ this._active ];
    },

    /**
        Retrieve the number of data items

        @returns {number} The data length
    */
    getDataLength : function() {
        return this._data.length;
    },

    /**
        Retrieve the currently active index

        @returns {number|boolean} The active index or false if none found
    */

    getIndex : function() {
        return typeof this._active === 'number' ? this._active : false;
    },

    /**
        Retrieve the stage height

        @returns {number} The stage height
    */

    getStageHeight : function() {
        return this._stageHeight;
    },

    /**
        Retrieve the stage width

        @returns {number} The stage width
    */

    getStageWidth : function() {
        return this._stageWidth;
    },

    /**
        Retrieve the option

        @param {string} key The option key to retrieve. If no key specified it will return all options in an object.

        @returns option or options
    */

    getOptions : function( key ) {
        return typeof key === 'undefined' ? this._options : this._options[ key ];
    },

    /**
        Set options to the instance.
        You can set options using a key & value argument or a single object argument (see examples)

        @param {string} key The option key
        @param {string} value the the options value

        @example setOptions( 'autoplay', true )
        @example setOptions({ autoplay: true });

        @returns Instance
    */

    setOptions : function( key, value ) {
        if ( typeof key === 'object' ) {
            $.extend( this._options, key );
        } else {
            this._options[ key ] = value;
        }
        return this;
    },

    /**
        Starts playing the slideshow

        @param {number} delay Sets the slideshow interval in milliseconds.
        If you set it once, you can just call play() and get the same interval the next time.

        @returns Instance
    */

    play : function( delay ) {

        this._playing = true;

        this._playtime = delay || this._playtime;

        this._playCheck();

        this.trigger( Galleria.PLAY );

        return this;
    },

    /**
        Stops the slideshow if currently playing

        @returns Instance
    */

    pause : function() {

        this._playing = false;

        this.trigger( Galleria.PAUSE );

        return this;
    },

    /**
        Toggle between play and pause events.

        @param {number} delay Sets the slideshow interval in milliseconds.

        @returns Instance
    */

    playToggle : function( delay ) {
        return ( this._playing ) ? this.pause() : this.play( delay );
    },

    /**
        Checks if the gallery is currently playing

        @returns {Boolean}
    */

    isPlaying : function() {
        return this._playing;
    },

    /**
        Checks if the gallery is currently in fullscreen mode

        @returns {Boolean}
    */

    isFullscreen : function() {
        return this._fullscreen.active;
    },

    _playCheck : function() {
        var self = this,
            played = 0,
            interval = 20,
            now = Utils.timestamp(),
            timer_id = 'play' + this._id;

        if ( this._playing ) {

            this.clearTimer( timer_id );

            var fn = function() {

                played = Utils.timestamp() - now;
                if ( played >= self._playtime && self._playing ) {
                    self.clearTimer( timer_id );
                    self.next();
                    return;
                }
                if ( self._playing ) {

                    // trigger the PROGRESS event
                    self.trigger({
                        type:         Galleria.PROGRESS,
                        percent:      M.ceil( played / self._playtime * 100 ),
                        seconds:      M.floor( played / 1000 ),
                        milliseconds: played
                    });

                    self.addTimer( timer_id, fn, interval );
                }
            };
            self.addTimer( timer_id, fn, interval );
        }
    },

    /**
        Modify the slideshow delay

        @param {number} delay the number of milliseconds between slides,

        @returns Instance
    */

    setPlaytime: function( delay ) {
        this._playtime = delay;
        return this;
    },

    setIndex: function( val ) {
        this._active = val;
        return this;
    },

    /**
        Manually modify the counter

        @param {number} [index] Optional data index to fectch,
        if no index found it assumes the currently active index

        @returns Instance
    */

    setCounter: function( index ) {

        if ( typeof index === 'number' ) {
            index++;
        } else if ( typeof index === 'undefined' ) {
            index = this.getIndex()+1;
        }

        this.get( 'current' ).innerHTML = index;

        if ( IE ) { // weird IE bug

            var count = this.$( 'counter' ),
                opacity = count.css( 'opacity' );

            if ( parseInt( opacity, 10 ) === 1) {
                Utils.removeAlpha( count[0] );
            } else {
                this.$( 'counter' ).css( 'opacity', opacity );
            }

        }

        return this;
    },

    /**
        Manually set captions

        @param {number} [index] Optional data index to fectch and apply as caption,
        if no index found it assumes the currently active index

        @returns Instance
    */

    setInfo : function( index ) {

        var self = this,
            data = this.getData( index );

        $.each( ['title','description'], function( i, type ) {

            var elem = self.$( 'info-' + type );

            if ( !!data[type] ) {
                elem[ data[ type ].length ? 'show' : 'hide' ]().html( data[ type ] );
            } else {
               elem.empty().hide();
            }
        });

        return this;
    },

    /**
        Checks if the data contains any captions

        @param {number} [index] Optional data index to fectch,
        if no index found it assumes the currently active index.

        @returns {boolean}
    */

    hasInfo : function( index ) {

        var check = 'title description'.split(' '),
            i;

        for ( i = 0; check[i]; i++ ) {
            if ( !!this.getData( index )[ check[i] ] ) {
                return true;
            }
        }
        return false;

    },

    jQuery : function( str ) {

        var self = this,
            ret = [];

        $.each( str.split(','), function( i, elemId ) {
            elemId = $.trim( elemId );

            if ( self.get( elemId ) ) {
                ret.push( elemId );
            }
        });

        var jQ = $( self.get( ret.shift() ) );

        $.each( ret, function( i, elemId ) {
            jQ = jQ.add( self.get( elemId ) );
        });

        return jQ;

    },

    /**
        Converts element IDs into a jQuery collection
        You can call for multiple IDs separated with commas.

        @param {string} str One or more element IDs (comma-separated)

        @returns jQuery

        @example this.$('info,container').hide();
    */

    $ : function( str ) {
        return this.jQuery.apply( this, Utils.array( arguments ) );
    }

};

// End of Galleria prototype

// Add events as static variables
$.each( _events, function( i, ev ) {

    // legacy events
    var type = /_/.test( ev ) ? ev.replace( /_/g, '' ) : ev;

    Galleria[ ev.toUpperCase() ] = 'galleria.'+type;

} );

$.extend( Galleria, {

    // Browser helpers
    IE9:     IE === 9,
    IE8:     IE === 8,
    IE7:     IE === 7,
    IE6:     IE === 6,
    IE:      IE,
    WEBKIT:  /webkit/.test( NAV ),
    CHROME:  /chrome/.test( NAV ),
    SAFARI:  /safari/.test( NAV ) && !(/chrome/.test( NAV )),
    QUIRK:   ( IE && doc.compatMode && doc.compatMode === "BackCompat" ),
    MAC:     /mac/.test( navigator.platform.toLowerCase() ),
    OPERA:   !!window.opera,
    IPHONE:  /iphone/.test( NAV ),
    IPAD:    /ipad/.test( NAV ),
    ANDROID: /android/.test( NAV ),
    TOUCH:   ('ontouchstart' in doc)

});

// Galleria static methods

/**
    Adds a theme that you can use for your Gallery

    @param {Object} theme Object that should contain all your theme settings.
    <ul>
        <li>name - name of the theme</li>
        <li>author - name of the author</li>
        <li>css - css file name (not path)</li>
        <li>defaults - default options to apply, including theme-specific options</li>
        <li>init - the init function</li>
    </ul>

    @returns {Object} theme
*/

Galleria.addTheme = function( theme ) {

    // make sure we have a name
    if ( !theme.name ) {
        Galleria.raise('No theme name specified');
    }

    if ( typeof theme.defaults !== 'object' ) {
        theme.defaults = {};
    } else {
        theme.defaults = _legacyOptions( theme.defaults );
    }

    var css = false,
        reg;

    if ( typeof theme.css === 'string' ) {

        // look for manually added CSS
        $('link').each(function( i, link ) {
            reg = new RegExp( theme.css );
            if ( reg.test( link.href ) ) {

                // we found the css
                css = true;

                // the themeload trigger
                _themeLoad( theme );

                return false;
            }
        });

        // else look for the absolute path and load the CSS dynamic
        if ( !css ) {


            $(function() {
                // Try to determine the css-path from the theme script.
                // In IE8/9, the script-dom-element seems to be not present
                // at once, if galleria itself is inserted into the dom
                // dynamically. We therefore try multiple times before raising
                // an error.
                var retryCount = 0;
                var tryLoadCss = function() {
                    $('script').each(function (i, script) {
                        // look for the theme script
                        reg = new RegExp('galleria\\.' + theme.name.toLowerCase() + '\\.');
                        if (reg.test(script.src)) {

                            // we have a match
                            css = script.src.replace(/[^\/]*$/, '') + theme.css;

                            window.setTimeout(function () {
                                Utils.loadCSS(css, 'galleria-theme', function () {

                                    // the themeload trigger
                                    _themeLoad(theme);

                                });
                            }, 1);
                        }
                    });
                    if (!css) {
                        if (retryCount++ > 5) {
                            Galleria.raise('No theme CSS loaded');
                        } else {
                            window.setTimeout(tryLoadCss, 500);
                        }
                    }
                };
                tryLoadCss();
            });
        }

    } else {

        // pass
        _themeLoad( theme );
    }
    return theme;
};

/**
    loadTheme loads a theme js file and attaches a load event to Galleria

    @param {string} src The relative path to the theme source file

    @param {Object} [options] Optional options you want to apply

    @returns Galleria
*/

Galleria.loadTheme = function( src, options ) {

    // Don't load if theme is already loaded
    if( $('script').filter(function() { return $(this).attr('src') == src; }).length ) {
        return;
    }

    var loaded = false,
        err;

    // start listening for the timeout onload
    $( window ).load( function() {
        if ( !loaded ) {
            // give it another 20 seconds
            err = window.setTimeout(function() {
                if ( !loaded && !Galleria.theme ) {
                    Galleria.raise( "Galleria had problems loading theme at " + src + ". Please check theme path or load manually.", true );
                }
            }, 20000);
        }
    });

    // first clear the current theme, if exists
    Galleria.unloadTheme();

    // load the theme
    Utils.loadScript( src, function() {
        loaded = true;
        window.clearTimeout( err );
    });

    return Galleria;
};

/**
    unloadTheme unloads the Galleria theme and prepares for a new theme

    @returns Galleria
*/

Galleria.unloadTheme = function() {

    if ( typeof Galleria.theme == 'object' ) {

        $('script').each(function( i, script ) {

            if( new RegExp( 'galleria\\.' + Galleria.theme.name + '\\.' ).test( script.src ) ) {
                $( script ).remove();
            }
        });

        Galleria.theme = undef;
    }

    return Galleria;
};

/**
    Retrieves a Galleria instance.

    @param {number} [index] Optional index to retrieve.
    If no index is supplied, the method will return all instances in an array.

    @returns Instance or Array of instances
*/

Galleria.get = function( index ) {
    if ( !!_instances[ index ] ) {
        return _instances[ index ];
    } else if ( typeof index !== 'number' ) {
        return _instances;
    } else {
        Galleria.raise('Gallery index ' + index + ' not found');
    }
};

/**

    Configure Galleria options via a static function.
    The options will be applied to all instances

    @param {string|object} key The options to apply or a key

    @param [value] If key is a string, this is the value

    @returns Galleria

*/

Galleria.configure = function( key, value ) {

    var opts = {};

    if( typeof key == 'string' && value ) {
        opts[key] = value;
        key = opts;
    } else {
        $.extend( opts, key );
    }

    Galleria.configure.options = opts;

    $.each( Galleria.get(), function(i, instance) {
        instance.setOptions( opts );
    });

    return Galleria;
};

Galleria.configure.options = {};

/**

    Bind a Galleria event to the gallery

    @param {string} type A string representing the galleria event

    @param {function} callback The function that should run when the event is triggered

    @returns Galleria

*/

Galleria.on = function( type, callback ) {
    if ( !type ) {
        return;
    }

    callback = callback || F;

    // hash the bind
    var hash = type + callback.toString().replace(/\s/g,'') + Utils.timestamp();

    // for existing instances
    $.each( Galleria.get(), function(i, instance) {
        instance._binds.push( hash );
        instance.bind( type, callback );
    });

    // for future instances
    Galleria.on.binds.push({
        type: type,
        callback: callback,
        hash: hash
    });

    return Galleria;
};

Galleria.on.binds = [];

/**

    Run Galleria
    Alias for $(selector).galleria(options)

    @param {string} selector A selector of element(s) to intialize galleria to

    @param {object} options The options to apply

    @returns Galleria

*/

Galleria.run = function( selector, options ) {
    if ( $.isFunction( options ) ) {
        options = { extend: options };
    }
    $( selector || '#galleria' ).galleria( options );
    return Galleria;
};

/**
    Creates a transition to be used in your gallery

    @param {string} name The name of the transition that you will use as an option

    @param {Function} fn The function to be executed in the transition.
    The function contains two arguments, params and complete.
    Use the params Object to integrate the transition, and then call complete when you are done.

    @returns Galleria

*/

Galleria.addTransition = function( name, fn ) {
    _transitions.effects[name] = fn;
    return Galleria;
};

/**
    The Galleria utilites
*/

Galleria.utils = Utils;

/**
    A helper metod for cross-browser logging.
    It uses the console log if available otherwise it falls back to alert

    @example Galleria.log("hello", document.body, [1,2,3]);
*/

Galleria.log = function() {
    var args = Utils.array( arguments );
    if( 'console' in window && 'log' in window.console ) {
        try {
            return window.console.log.apply( window.console, args );
        } catch( e ) {
            $.each( args, function() {
                window.console.log(this);
            });
        }
    } else {
        return window.alert( args.join('<br>') );
    }
};

/**
    A ready method for adding callbacks when a gallery is ready
    Each method is call before the extend option for every instance

    @param {function} callback The function to call

    @returns Galleria
*/

Galleria.ready = function( fn ) {
    if ( typeof fn != 'function' ) {
        return Galleria;
    }
    $.each( _galleries, function( i, gallery ) {
        fn.call( gallery, gallery._options );
    });
    Galleria.ready.callbacks.push( fn );
    return Galleria;
};

Galleria.ready.callbacks = [];

/**
    Method for raising errors

    @param {string} msg The message to throw

    @param {boolean} [fatal] Set this to true to override debug settings and display a fatal error
*/

Galleria.raise = function( msg, fatal ) {

    var type = fatal ? 'Fatal error' : 'Error',

        css = {
            color: '#fff',
            position: 'absolute',
            top: 0,
            left: 0,
            zIndex: 100000
        },

        echo = function( msg ) {

            var html = '<div style="padding:4px;margin:0 0 2px;background:#' +
                ( fatal ? '811' : '222' ) + ';">' +
                ( fatal ? '<strong>' + type + ': </strong>' : '' ) +
                msg + '</div>';

            $.each( _instances, function() {

                var cont = this.$( 'errors' ),
                    target = this.$( 'target' );

                if ( !cont.length ) {

                    target.css( 'position', 'relative' );

                    cont = this.addElement( 'errors' ).appendChild( 'target', 'errors' ).$( 'errors' ).css(css);
                }
                cont.append( html );

            });

            if ( !_instances.length ) {
                $('<div>').css( $.extend( css, { position: 'fixed' } ) ).append( html ).appendTo( DOM().body );
            }
        };

    // if debug is on, display errors and throw exception if fatal
    if ( DEBUG ) {
        echo( msg );
        if ( fatal ) {
            throw new Error(type + ': ' + msg);
        }

    // else just echo a silent generic error if fatal
    } else if ( fatal ) {
        if ( _hasError ) {
            return;
        }
        _hasError = true;
        fatal = false;
        echo( 'Gallery could not load.' );
    }
};

// Add the version
Galleria.version = VERSION;

/**
    A method for checking what version of Galleria the user has installed and throws a readable error if the user needs to upgrade.
    Useful when building plugins that requires a certain version to function.

    @param {number} version The minimum version required

    @param {string} [msg] Optional message to display. If not specified, Galleria will throw a generic error.

    @returns Galleria
*/

Galleria.requires = function( version, msg ) {
    msg = msg || 'You need to upgrade Galleria to version ' + version + ' to use one or more components.';
    if ( Galleria.version < version ) {
        Galleria.raise(msg, true);
    }
    return Galleria;
};

/**
    Adds preload, cache, scale and crop functionality

    @constructor

    @requires jQuery

    @param {number} [id] Optional id to keep track of instances
*/

Galleria.Picture = function( id ) {

    // save the id
    this.id = id || null;

    // the image should be null until loaded
    this.image = null;

    // Create a new container
    this.container = Utils.create('galleria-image');

    // add container styles
    $( this.container ).css({
        overflow: 'hidden',
        position: 'relative' // for IE Standards mode
    });

    // saves the original measurements
    this.original = {
        width: 0,
        height: 0
    };

    // flag when the image is ready
    this.ready = false;

    // flag for iframe Picture
    this.isIframe = false;

};

Galleria.Picture.prototype = {

    // the inherited cache object
    cache: {},

    // show the image on stage
    show: function() {
        Utils.show( this.image );
    },

    // hide the image
    hide: function() {
        Utils.moveOut( this.image );
    },

    clear: function() {
        this.image = null;
    },

    /**
        Checks if an image is in cache

        @param {string} src The image source path, ex '/path/to/img.jpg'

        @returns {boolean}
    */

    isCached: function( src ) {
        return !!this.cache[src];
    },

    /**
        Preloads an image into the cache

        @param {string} src The image source path, ex '/path/to/img.jpg'

        @returns Galleria.Picture
    */

    preload: function( src ) {
        $( new Image() ).load((function(src, cache) {
            return function() {
                cache[ src ] = src;
            };
        }( src, this.cache ))).attr( 'src', src );
    },

    /**
        Loads an image and call the callback when ready.
        Will also add the image to cache.

        @param {string} src The image source path, ex '/path/to/img.jpg'
        @param {Object} [size] The forced size of the image, defined as an object { width: xx, height:xx }
        @param {Function} callback The function to be executed when the image is loaded & scaled

        @returns The image container (jQuery object)
    */

    load: function(src, size, callback) {

        if ( typeof size == 'function' ) {
            callback = size;
            size = null;
        }

        if( this.isIframe ) {
            var id = 'if'+new Date().getTime();

            var iframe = this.image = $('<iframe>', {
                src: src,
                frameborder: 0,
                id: id,
                allowfullscreen: true,
                css: { visibility: 'hidden' }
            })[0];

            if ( size ) {
                $( iframe ).css( size );
            }

            $( this.container ).find( 'iframe,img' ).remove();

            this.container.appendChild( this.image );

            $('#'+id).load( (function( self, callback ) {
                return function() {
                    window.setTimeout(function() {
                        $( self.image ).css( 'visibility', 'visible' );
                        if( typeof callback == 'function' ) {
                            callback.call( self, self );
                        }
                    }, 10);
                };
            }( this, callback )));

            return this.container;
        }

        this.image = new Image();

        // IE8 opacity inherit bug
        if ( Galleria.IE8 ) {
            $( this.image ).css( 'filter', 'inherit' );
        }

        var reload = false,
            resort = false,

            // some jquery cache
            $container = $( this.container ),
            $image = $( this.image ),

            onerror = function() {
                if ( !reload ) {
                    reload = true;
                    // reload the image with a timestamp
                    window.setTimeout((function(image, src) {
                        return function() {
                            image.attr('src', src + (src.indexOf('?') > -1 ? '&' : '?') + Utils.timestamp() );
                        };
                    }( $(this), src )), 50);
                } else {
                    // apply the dummy image if it exists
                    if ( DUMMY ) {
                        $( this ).attr( 'src', DUMMY );
                    } else {
                        Galleria.raise('Image not found: ' + src);
                    }
                }
            },

            // the onload method
            onload = (function( self, callback, src ) {

                return function() {

                    var complete = function() {

                        $( this ).off( 'load' );

                        // save the original size
                        self.original = size || {
                            height: this.height,
                            width: this.width
                        };

                        // translate3d if needed
                        if ( Galleria.HAS3D ) {
                            this.style.MozTransform = this.style.webkitTransform = 'translate3d(0,0,0)';
                        }

                        $container.append( this );

                        self.cache[ src ] = src; // will override old cache

                        if (typeof callback == 'function' ) {
                            window.setTimeout(function() {
                                callback.call( self, self );
                            },1);
                        }
                    };

                    // Delay the callback to "fix" the Adblock Bug
                    // http://code.google.com/p/adblockforchrome/issues/detail?id=3701
                    if ( ( !this.width || !this.height ) ) {
                        (function( img ) {
                            Utils.wait({
                                until: function() {
                                    return img.width && img.height;
                                },
                                success: function() {
                                    complete.call( img );
                                },
                                error: function() {
                                    if ( !resort ) {
                                        $(new Image()).load( onload ).attr( 'src', img.src );
                                        resort = true;
                                    } else {
                                        Galleria.raise('Could not extract width/height from image: ' + img.src +
                                            '. Traced measures: width:' + img.width + 'px, height: ' + img.height + 'px.');
                                    }
                                },
                                timeout: 100
                            });
                        }( this ));
                    } else {
                        complete.call( this );
                    }
                };
            }( this, callback, src ));

        // remove any previous images
        $container.find( 'iframe,img' ).remove();

        // append the image
        $image.css( 'display', 'block');

        // hide it for now
        Utils.hide( this.image );

        // remove any max/min scaling
        $.each('minWidth minHeight maxWidth maxHeight'.split(' '), function(i, prop) {
            $image.css(prop, (/min/.test(prop) ? '0' : 'none'));
        });

        // begin load and insert in cache when done
        $image.load( onload ).on( 'error', onerror ).attr( 'src', src );

        // return the container
        return this.container;
    },

    /**
        Scales and crops the image

        @param {Object} options The method takes an object with a number of options:

        <ul>
            <li>width - width of the container</li>
            <li>height - height of the container</li>
            <li>min - minimum scale ratio</li>
            <li>max - maximum scale ratio</li>
            <li>margin - distance in pixels from the image border to the container</li>
            <li>complete - a callback that fires when scaling is complete</li>
            <li>position - positions the image, works like the css background-image property.</li>
            <li>crop - defines how to crop. Can be true, false, 'width' or 'height'</li>
            <li>canvas - set to true to try a canvas-based rescale</li>
        </ul>

        @returns The image container object (jQuery)
    */

    scale: function( options ) {

        var self = this;

        // extend some defaults
        options = $.extend({
            width: 0,
            height: 0,
            min: undef,
            max: undef,
            margin: 0,
            complete: F,
            position: 'center',
            crop: false,
            canvas: false,
            iframelimit: undef
        }, options);

        if( this.isIframe ) {

            var cw = options.width,
                ch = options.height,
                nw, nh;
            if ( options.iframelimit ) {
                var r = M.min( options.iframelimit/cw, options.iframelimit/ch );
                if ( r < 1 ) {
                    nw = cw * r;
                    nh = ch * r;

                    $( this.image ).css({
                        top: ch/2-nh/2,
                        left: cw/2-nw/2,
                        position: 'absolute'
                    });
                } else {
                    $( this.image ).css({
                        top: 0,
                        left: 0
                    });
                }
            }
            $( this.image ).width( nw || cw ).height( nh || ch ).removeAttr( 'width' ).removeAttr( 'height' );
            $( this.container ).width( cw ).height( ch );
            options.complete.call(self, self);
            try {
                if( this.image.contentWindow ) {
                    $( this.image.contentWindow ).trigger('resize');
                }
            } catch(e) {}
            return this.container;

        }

        // return the element if no image found
        if (!this.image) {
            return this.container;
        }

        // store locale variables
        var width,
            height,
            $container = $( self.container ),
            data;

        // wait for the width/height
        Utils.wait({
            until: function() {
                width  = options.width ||
                         $container.width() ||
                         Utils.parseValue( $container.css('width') );

                height = options.height ||
                         $container.height() ||
                         Utils.parseValue( $container.css('height') );

                return width && height;
            },
            success: function() {

                // calculate some cropping
                var newWidth = ( width - options.margin * 2 ) / self.original.width,
                    newHeight = ( height - options.margin * 2 ) / self.original.height,
                    min = M.min( newWidth, newHeight ),
                    max = M.max( newWidth, newHeight ),
                    cropMap = {
                        'true'  : max,
                        'width' : newWidth,
                        'height': newHeight,
                        'false' : min,
                        'landscape': self.original.width > self.original.height ? max : min,
                        'portrait': self.original.width < self.original.height ? max : min
                    },
                    ratio = cropMap[ options.crop.toString() ],
                    canvasKey = '';

                // allow maxScaleRatio
                if ( options.max ) {
                    ratio = M.min( options.max, ratio );
                }

                // allow minScaleRatio
                if ( options.min ) {
                    ratio = M.max( options.min, ratio );
                }

                $.each( ['width','height'], function( i, m ) {
                    $( self.image )[ m ]( self[ m ] = self.image[ m ] = M.round( self.original[ m ] * ratio ) );
                });

                $( self.container ).width( width ).height( height );

                if ( options.canvas && _canvas ) {

                    _canvas.elem.width = self.width;
                    _canvas.elem.height = self.height;

                    canvasKey = self.image.src + ':' + self.width + 'x' + self.height;

                    self.image.src = _canvas.cache[ canvasKey ] || (function( key ) {

                        _canvas.context.drawImage(self.image, 0, 0, self.original.width*ratio, self.original.height*ratio);

                        try {

                            data = _canvas.elem.toDataURL();
                            _canvas.length += data.length;
                            _canvas.cache[ key ] = data;
                            return data;

                        } catch( e ) {
                            return self.image.src;
                        }

                    }( canvasKey ) );

                }

                // calculate image_position
                var pos = {},
                    mix = {},
                    getPosition = function(value, measure, margin) {
                        var result = 0;
                        if (/\%/.test(value)) {
                            var flt = parseInt( value, 10 ) / 100,
                                m = self.image[ measure ] || $( self.image )[ measure ]();

                            result = M.ceil( m * -1 * flt + margin * flt );
                        } else {
                            result = Utils.parseValue( value );
                        }
                        return result;
                    },
                    positionMap = {
                        'top': { top: 0 },
                        'left': { left: 0 },
                        'right': { left: '100%' },
                        'bottom': { top: '100%' }
                    };

                $.each( options.position.toLowerCase().split(' '), function( i, value ) {
                    if ( value === 'center' ) {
                        value = '50%';
                    }
                    pos[i ? 'top' : 'left'] = value;
                });

                $.each( pos, function( i, value ) {
                    if ( positionMap.hasOwnProperty( value ) ) {
                        $.extend( mix, positionMap[ value ] );
                    }
                });

                pos = pos.top ? $.extend( pos, mix ) : mix;

                pos = $.extend({
                    top: '50%',
                    left: '50%'
                }, pos);

                // apply position
                $( self.image ).css({
                    position : 'absolute',
                    top :  getPosition(pos.top, 'height', height),
                    left : getPosition(pos.left, 'width', width)
                });

                // show the image
                self.show();

                // flag ready and call the callback
                self.ready = true;
                options.complete.call( self, self );

            },
            error: function() {
                Galleria.raise('Could not scale image: '+self.image.src);
            },
            timeout: 1000
        });
        return this;
    }
};

// our own easings
$.extend( $.easing, {

    galleria: function (_, t, b, c, d) {
        if ((t/=d/2) < 1) {
            return c/2*t*t*t + b;
        }
        return c/2*((t-=2)*t*t + 2) + b;
    },

    galleriaIn: function (_, t, b, c, d) {
        return c*(t/=d)*t + b;
    },

    galleriaOut: function (_, t, b, c, d) {
        return -c *(t/=d)*(t-2) + b;
    }

});


// Forked version of Ainos Finger.js for native-style touch

Galleria.Finger = (function() {

    var abs = M.abs;

    // test for translate3d support
    var has3d = Galleria.HAS3D = (function() {

        var el = doc.createElement('p'),
            has3d,
            t = ['webkit','O','ms','Moz',''],
            s,
            i=0,
            a = 'transform';

        DOM().html.insertBefore(el, null);

        for (; t[i]; i++) {
            s = t[i] ? t[i]+'Transform' : a;
            if (el.style[s] !== undefined) {
                el.style[s] = "translate3d(1px,1px,1px)";
                has3d = $(el).css(t[i] ? '-'+t[i].toLowerCase()+'-'+a : a);
            }
        }

        DOM().html.removeChild(el);
        return (has3d !== undefined && has3d.length > 0 && has3d !== "none");
    }());

    // request animation shim
    var requestFrame = (function(){
        var r = 'RequestAnimationFrame';
        return window.requestAnimationFrame ||
               window['webkit'+r] ||
               window['moz'+r] ||
               window['o'+r] ||
               window['ms'+r] ||
               function( callback ) {
                   window.setTimeout(callback, 1000 / 60);
               };
    }());

    var Finger = function(elem, options) {

        // default options
        this.config = {
            start: 0,
            duration: 500,
            onchange: function() {},
            oncomplete: function() {},
            easing: function(x,t,b,c,d) {
                return -c * ((t=t/d-1)*t*t*t - 1) + b; // easeOutQuart
            }
        };

        this.easeout = function (x, t, b, c, d) {
            return c*((t=t/d-1)*t*t*t*t + 1) + b;
        };

        if ( !elem.children.length ) {
            return;
        }

        var self = this;

        // extend options
        $.extend(this.config, options);

        this.elem = elem;
        this.child = elem.children[0];
        this.to = this.pos = 0;
        this.touching = false;
        this.start = {};
        this.index = this.config.start;
        this.anim = 0;
        this.easing = this.config.easing;

        if ( !has3d ) {
          this.child.style.position = 'absolute';
          this.elem.style.position = 'relative';
        }

        // Bind event handlers to context
        $.each(['ontouchstart','ontouchmove','ontouchend','setup'], function(i, fn) {
            self[fn] = (function(caller) {
                return function() {
                    caller.apply( self, arguments );
                };
            }(self[fn]));
        });

        // the physical animator
        this.setX = function() {

            var style = self.child.style;

            if (!has3d) {
                // this is actually faster than CSS3 translate
                style.left = self.pos+'px';
                return;
            }
            style.MozTransform = style.webkitTransform = 'translate3d(' + self.pos + 'px,0,0)';
            return;
        };

        // bind events
        $(elem).on('touchstart', this.ontouchstart);
        $(window).on('resize', this.setup);
        $(window).on('orientationchange', this.setup);

        // set up width
        this.setup();

        // start the animations
        (function animloop(){
          requestFrame(animloop);
          self.loop.call( self );
        }());

    };

    Finger.prototype = {

        constructor: Finger,

        setup: function() {
            this.width = $( this.elem ).width();
            this.length = M.ceil( $(this.child).width() / this.width );
            if ( this.index !== 0 ) {
                this.index = M.max(0, M.min( this.index, this.length-1 ) );
                this.pos = this.to = -this.width*this.index;
            }
        },

        setPosition: function(pos) {
            this.pos = pos;
            this.to = pos;
        },

        ontouchstart: function(e) {

            var touch = e.originalEvent.touches;

            this.start = {
                pageX: touch[0].pageX,
                pageY: touch[0].pageY,
                time:  +new Date()
            };

            this.isScrolling = null;
            this.touching = true;
            this.deltaX = 0;

            $doc.on('touchmove', this.ontouchmove);
            $doc.on('touchend', this.ontouchend);
        },

        ontouchmove: function(e) {

            var touch = e.originalEvent.touches;

            // ensure swiping with one touch and not pinching
            if( touch && touch.length > 1 || e.scale && e.scale !== 1 ) {
                return;
            }

            this.deltaX = touch[0].pageX - this.start.pageX;

            // determine if scrolling test has run - one time test
            if ( this.isScrolling === null ) {
                this.isScrolling = !!(
                    this.isScrolling ||
                    M.abs(this.deltaX) < M.abs(touch[0].pageY - this.start.pageY)
                );
            }

            // if user is not trying to scroll vertically
            if (!this.isScrolling) {

                // prevent native scrolling
                e.preventDefault();

                // increase resistance if first or last slide
                this.deltaX /= ( (!this.index && this.deltaX > 0 || this.index == this.length - 1 && this.deltaX < 0 ) ?
                    ( M.abs(this.deltaX) / this.width + 1.8 )  : 1 );
                this.to = this.deltaX - this.index * this.width;
            }
            e.stopPropagation();
        },

        ontouchend: function(e) {

            this.touching = false;

            // determine if slide attempt triggers next/prev slide
            var isValidSlide = +new Date() - this.start.time < 250 &&
                M.abs(this.deltaX) > 40 ||
                M.abs(this.deltaX) > this.width/2,

                isPastBounds = !this.index && this.deltaX > 0 ||
                    this.index == this.length - 1 && this.deltaX < 0;

            // if not scrolling vertically
            if ( !this.isScrolling ) {
                this.show( this.index + ( isValidSlide && !isPastBounds ? (this.deltaX < 0 ? 1 : -1) : 0 ) );
            }

            $doc.off('touchmove', this.ontouchmove);
            $doc.off('touchend', this.ontouchend);
        },

        show: function( index ) {
            if ( index != this.index ) {
                this.config.onchange.call(this, index);
            } else {
                this.to = -( index*this.width );
            }
        },

        moveTo: function( index ) {
            if ( index != this.index ) {
                this.pos = this.to = -( index*this.width );
                this.index = index;
            }
        },

        loop: function() {

            var distance = this.to - this.pos,
                factor = 1;

            if ( this.width && distance ) {
                factor = M.max(0.5, M.min(1.5, M.abs(distance / this.width) ) );
            }

            // if distance is short or the user is touching, do a 1-1 animation
            if ( this.touching || M.abs(distance) <= 1 ) {
                this.pos = this.to;
                distance = 0;
                if ( this.anim && !this.touching ) {
                    this.config.oncomplete( this.index );
                }
                this.anim = 0;
                this.easing = this.config.easing;
            } else {
                if ( !this.anim ) {
                    // save animation parameters
                    this.anim = { start: this.pos, time: +new Date(), distance: distance, factor: factor, destination: this.to };
                }
                // check if to has changed or time has run out
                var elapsed = +new Date() - this.anim.time;
                var duration = this.config.duration*this.anim.factor;

                if ( elapsed > duration || this.anim.destination != this.to ) {
                    this.anim = 0;
                    this.easing = this.easeout;
                    return;
                }
                // apply easing
                this.pos = this.easing(
                    null,
                    elapsed,
                    this.anim.start,
                    this.anim.distance,
                    duration
                );
            }
            this.setX();
        }
    };

    return Finger;

}());

// the plugin initializer
$.fn.galleria = function( options ) {

    var selector = this.selector;

    // try domReady if element not found
    if ( !$(this).length ) {

        $(function() {
            if ( $( selector ).length ) {

                // if found on domReady, go ahead
                $( selector ).galleria( options );

            } else {

                // if not, try fetching the element for 5 secs, then raise a warning.
                Galleria.utils.wait({
                    until: function() {
                        return $( selector ).length;
                    },
                    success: function() {
                        $( selector ).galleria( options );
                    },
                    error: function() {
                        Galleria.raise('Init failed: Galleria could not find the element "'+selector+'".');
                    },
                    timeout: 5000
                });

            }
        });
        return this;
    }

    return this.each(function() {

        // destroy previous instance and prepare for new load
        if ( $.data(this, 'galleria') ) {
            $.data( this, 'galleria' ).destroy();
            $( this ).find( '*' ).hide();
        }

        // load the new gallery
        $.data( this, 'galleria', new Galleria().init( this, options ) );
    });

};

// export as AMD or CommonJS
if ( typeof module === "object" && module && typeof module.exports === "object" ) {
    module.exports = Galleria;
} else {
    window.Galleria = Galleria;
    if ( typeof define === "function" && define.amd ) {
        define( "galleria", ['jquery'], function() { return Galleria; } );
    }
}

// phew

}( jQuery, this ) );
	
	
	
	include_js_label(core_file_paths + core_folder_paths + '/item/galleria.classic.js');
	
	
	
	
/****************************************************************************************

Item functions (JO2)

****************************************************************************************/

//----------------------------------- BREADCRUMBS -----------------------------------

//Get product labels
function get_product_labels() {
	var label_name = [];
	var label_path = [];
	for (var i = 0; i < numlabels; i++) {
		label_name.push(document.getElementById('namelabel-' + i).innerHTML);
		label_path.push(document.getElementById('urllabel-' + i).innerHTML);
	}
	return [label_name, label_path];
}
//Get product labels

//Show breadcrumb labels
function show_breadcrumb_labels() {
	var product_labels = get_product_labels();
	for (var i = 0; i < numlabels; i++) {
		document.write('<a href="' + product_labels[1][i] + '">' + translate_sentence(removelatspaces(product_labels[0][i]).capitalize()) + '</a>');
		if (numlabels-1 != i) { document.write(', ') }
	}
}
//Show breadcrumb labels

//----------------------------------- PRODUCT FUNCTIONS -----------------------------------

//Gallery slider
function set_product_slider() {
	Galleria.run('#galleria');
	Galleria.configure({
		transition: 'flash',
		lightbox: true,
		showCounter: false,
		showInfo: false,
		autoplay: 7000,
		debug: false,
		imageMargin: 10,
		imagePosition: 'center center',
		pauseOnInteraction: true,
	});
}
//Gallery slider

//Show galleria
function show_galleria() {
	get_product_product_image_paths();
	if (product_image_paths !== false) {
		set_product_slider();
		document.write("<div id='galleria' class='item_image'>");
		for (var i = 0; i < product_image_paths.length; i++) {
			document.write("<img src='" + product_image_paths[i] + "'>");
		}
		document.write("</div>");
		document.write('<img class="hide item_thumb" src="' + product_image_paths[0] + '">');	//Image for cart
		
		Galleria.ready(function() {	 //Set ALT and TITLE image attributes
		  this.bind('thumbnail', function(e) {
			e.galleriaData.title = translate_sentence(posttitle);
			e.thumbTarget.alt = e.galleriaData.title + ' ' + blog_title;
		  });
		});
	}
}
//Show galleria

//Show product social counts
function show_product_social_counts() {
	document.write("<table class='social-counts'><td><center><div class='g-plusone' data-size='medium'></div>");
	document.write("<a class='twitter-share-button' data-lang='en' href='https://twitter.com/share'>Tweet</a><br>");
	document.write("<div class='fb-like' data-action='like' data-layout='button_count' data-share='false' data-show-faces='false'></div></center></td></table>");
}
//Show product social counts

//Get the product brand
function get_product_brand() {
	var filter_list = filter_names[2].slice(1);
	var urllabel = false;
	for (var i = 0; i < numlabels; i++) {
		for (var j = 0; j < filter_list.length; j++) {
			var namelabel = removelatspaces(document.getElementById('namelabel-' + i).innerHTML);
			var namebrand = removelatspaces(filter_list[j]);
			if (namebrand.toLowerCase() == namelabel.toLowerCase() && namebrand !== '' && typeof (namebrand === 'string')) {
				var urllabel = document.getElementById('urllabel-' + i).innerHTML;
				return [translate_sentence(namebrand.capitalize()), urllabel];
			}
		}
	}
	if (urllabel === false) { return false; }
}
//Get the product brand

//Get and show the product brand
function show_product_brand() {
	if (show_prod_collection_text === true) {
		var product_brand = get_product_brand();
		if (product_brand !== false) {
			document.write('<center><a title="' + translate_sentence('See this collection') + '" class="product-brand" href="' + product_brand[1] + '">');
			if (selected_language == 'es' || selected_language == 'fr') {
				document.write('<h3>' + translate_sentence('Collection') + ' ' + translate_sentence(product_brand[0]) + '</h3></a></center>');
			} else { document.write('<h3>' + translate_sentence(product_brand[0]) + ' collection</h3></a></center>'); }
		}
	}
}
//Get and show the product brand

//Get and show the current price, discount price and offer
function show_product_price() {
	currentprice = extract_value(postbody, 'Current price:', '<br');
	discountprice = extract_value(postbody, 'Discount price:', '<br');
	if (parseFloat(discountprice) > 0 && parseFloat(discountprice) < parseFloat(currentprice)) {
		var discpercentage = (100-((100*discountprice)/currentprice)).toFixed(0);
		document.write('<table class="prices"><tr><td rowspan=2 class="text">' + translate_sentence('Price') + ':</td>');
		document.write('<td rowspan=2 class="final-price">' + format_currency(discountprice) + '</td><td class="off">');
		document.write('<div class="item_price hide">' + discountprice + '</div>');	//The price must be in USD for checkout.
		if (selected_language == 'es') {document.write('&#161;');}
		document.write(discpercentage + '% ' + translate_sentence('OFF') + '!</td></tr><tr><td class="off"><s>' + format_currency(currentprice) + '</s></td></tr></table>');
	} else {
		document.write('<div class="prices"><center><table><td class="text">' + translate_sentence('Price') + ':</td>');
		document.write('<td class="final-price">' + format_currency(currentprice) + '<td></table></center></div>');
		document.write('<div class="item_price hide">' + currentprice + '</div>');	//The price must be in USD for checkout.
	}
}
//Get and show the current price, discount price and offer

//Get and show the stock
function show_product_stock() {
	product_stock = false;	//Infinite stock
	if (postbody.match(/Stock:/gi)){
		product_stock = parseFloat(extract_value(postbody, 'Stock:', '<br'));
		if (product_stock > 0 && product_stock < 6) {
			if (product_stock == 1) { var unitst = translate_sentence('unit!'); }
			else {var unitst = translate_sentence('units!'); }
			document.write('<div class="qty_num">');
			if (selected_language == 'es') {document.write('&#161;');}
			document.write(product_stock + ' ' + unitst + ' ' + translate_sentence('Hurry up!') + '</div>');
		} else if (product_stock < 1) {
			document.write('<style>.post-availability {display: none;}</style><div class="sold_out">' + translate_sentence('Sold out') + '</div>');
		}
	}
}
//Get and show the stock

//Show product added button
function show_product_added() {
	document.write('<center><div id="product-added"><div id="disable-button">' + translate_sentence('Product added') + '</div></div></center>');
}
//Show product added button

//Get and show the colors
function show_product_colors() {
	if (postbody.match(cat_name_1 + ':')){
		product_colors = extract_list(postbody, cat_name_1 + ':', '<br');
		if (product_colors !== false) { 
			document.write(translate_sentence(cat_name_1) + ': <select class="item_color">');
			for (var i = 0; i < product_colors.length; i++) {
				icolor = translate_sentence(removelatspaces(product_colors[i]).capitalize());
				document.write('<option value="' + icolor + '">' + icolor + '</option>');
			}
			document.write('</select><br/>');
		}
	} else { document.write('<select class="item_color" style="display: none;"><option value="-">-</option></select>'); }
}
//Get and show the colors

//Get and show the sizes
function show_product_sizes() {
	if (postbody.match(cat_name_2 + ':')){
		product_sizes = extract_list(postbody, cat_name_2 + ':', '<br');
		if (product_sizes !== false) { 
			document.write(translate_sentence(cat_name_2) + ': <select class="item_size">');
			for (var i = 0; i < product_sizes.length; i++) {
				if (cat_name_2 === 'Sizes' || cat_name_2 === 'Size') {
					size = translate_sentence(product_sizes[i].toUpperCase());
				} else {
					size = translate_sentence(product_sizes[i].capitalize());
				}
				document.write('<option value="' + size + '">' + size + '</option>');
			}
			document.write('</select><br/>');
		}
	} else { document.write('<select class="item_size" style="display: none;"><option value="-">-</option></select>'); }
}
//Get and show the sizes

//Get and show the item description
function show_product_description() {
	if (postbody.match(/Description:/gi)){
		product_description = extract_text(postbody, 'Description:', '<!--');
		if (show_if_enabled(product_description) !== false && product_description.length > 5)  {
			document.write('<div class="item_description"><center><b>' + translate_sentence('Description') + '</b></center><br/>' + translate_sentence(product_description) + '</div>');
		}
	}	
}
//Get and show the item description

//Show the item info
function show_item_info() {
	document.write('<div class="item-info">');
		if (free_shipping_from > 0){
			document.write('* ' + translate_sentence('If your purchase is over') + ' ' + format_currency(free_shipping_from)+ ', ');
			document.write(translate_sentence('your shipping will be free!'));
		}
		if (certified_shipping == true) {
			document.write('<br/>* ' + translate_sentence('Your packet will be sent with tracking number if you order it on checkout.'));
		}
		document.write('<br/>* ' + translate_sentence('Refund in case of lost or defect. See our') + ' ');
		showpagelink(satisfactionpolicypage, translate_sentence('satisfaction policy.'));
		document.write('<br/>* ' + translate_sentence('Do you have any question?') + ' ');
		showpagelink(contactuspage, translate_sentence('Contact us!'));
	document.write('</div>');
}
//Show the item info

//Show the quantity
function show_qty_box() {
	document.write(translate_sentence('Quantity') + ': <input class="item_Quantity" type="text" value="1"/><br/></div></center>');
}
//Show the quantity


//Bottom general ads
function bottom_ads() {
	document.write('<div class="ad-container-1"><center><ul>');

	document.write('<a href="' + twitter_link +'" target="_blank">');
	document.write('<li><div class="fashion_blog"></div><h3>' + translate_sentence('Do you write about fashion?') + '</h3>');
	document.write('<p>' + translate_sentence('If you like to write about fashion, mention us by Twitter with your post and we will share.') + '</p></li></a>');
	
	document.write('<a href="' + contactuspage +'">');
	document.write('<li><div class="dropship"></div><h3>' + translate_sentence('Sell handbags and earn') + '</h3>');
	document.write('<p>' + translate_sentence('We have many magnific products. Sell and earn. We offer dropshipping. Contact us and we will tell you how.') + '</p></li></a>');

	document.write('</ul></center></div>');
}
//Bottom general ads

//----------------------------------- FACEBOOK COMMENT BOX -----------------------------------

function facebook_comment_box() {
	if (facebook_product_comments === true) {
		document.write('<center><div class="fb-comments" data-colorscheme="light" data-numposts="5" data-href="' + location.href + '"></div></center>')
	}
}

//----------------------------------- RELATED PRODUCTS -----------------------------------

var relatedTitles = new Array();
var relatedUrls = new Array();
var relatedpSummary = new Array();
var relatedTitlesNum = 0;
var relatedPostsNum = 8; // number of entries to be shown

function readpostlabels(json) {
  var entry, postcontent, cat;
  for (var i = 0; i < json.feed.entry.length; i++) {
    entry = json.feed.entry[i];
    if (i==json.feed.entry.length) { break; }
    relatedTitles[relatedTitlesNum] = entry.title.$t;
    postcontent = "";
    if ("content" in entry) { postcontent = entry.content.$t; }
	else if ("summary" in entry) { postcontent = entry.summary.$t; }
    relatedpSummary[relatedTitlesNum] = postcontent;
    for (var k = 0; k < entry.link.length; k++) {
      if (entry.link[k].rel == 'alternate') {
        relatedUrls[relatedTitlesNum] = entry.link[k].href;
        break;
      }
    }
    relatedTitlesNum++;
  }
}

function show_related_products() {
	var posttitle = document.getElementById('posttitle').innerHTML;
	var tmp = new Array(0);
	var tmp2 = new Array(0);
	var tmp3 = new Array(0);
	for(var i = 0; i < relatedUrls.length; i++) {
		if(!contains(tmp, relatedUrls[i])) {
		  tmp.length += 1; tmp[tmp.length - 1] = relatedUrls[i];
		  tmp2.length += 1; tmp2[tmp2.length - 1] = relatedTitles[i];
		  tmp3.length += 1; tmp3[tmp3.length - 1] = relatedpSummary[i];
		}
	}
	relatedTitles = tmp2; relatedUrls = tmp; relatedpSummary = tmp3;
	for(var i = 0; i < relatedTitles.length; i++){
		var index = Math.floor((relatedTitles.length - 1) * Math.random());
		var tempTitle = relatedTitles[i]; var tempUrls = relatedUrls[i];
		var tempResum = relatedpSummary[i];
		relatedTitles[i] = relatedTitles[index]; relatedUrls[i] = relatedUrls[index];
		relatedpSummary[i] = relatedpSummary[index];
		relatedTitles[index] = tempTitle; relatedUrls[index] = tempUrls;
		relatedpSummary[index] = tempResum;
	}
	var somePosts = 0;
	var r = Math.floor((relatedTitles.length - 1) * Math.random());
	var relsump = r; 
	var output;
	var dirURL = document.URL;

	if (relatedUrls.length > 0) {
		document.write('<div id="related-posts"><div class="post-footer-line post-footer-line-4"><h3>' + translate_sentence('You might also like...') + '</h3>');
		while (somePosts < relatedPostsNum) {
			if (relatedUrls[r] != dirURL && relatedTitles[r] != posttitle) {

				// Get main image
				var str1 = relatedpSummary[r].substring(relatedpSummary[r].indexOf('http'));
				var pos2 = str1.indexOf('/>');
				var mainimage = str1.substring(0, pos2).replace('"','');
						
				document.write('<div class="related-items">');
				document.write('<center><a href="' + relatedUrls[r] + '" class="related-post-title"><h3>' + translate_sentence(relatedTitles[r]) + '</h3></a></center>');
				document.write('<center><div class="related-image"><a href="' + relatedUrls[r] + '" title="' + translate_sentence(relatedTitles[r]) + '"><img alt="' + translate_sentence(relatedTitles[r]) + '" src="' + mainimage + '" /></a></div></center>');
				
				// Get and show the hex colors
				showhexcolors(relatedpSummary[r]);
				
				// Get prices
				currentprice = extract_value(relatedpSummary[r], 'Current price:', '<br');
				discountprice = extract_value(relatedpSummary[r], 'Discount price:', '<br');
				if (parseFloat(discountprice) > 0 && parseFloat(discountprice) < parseFloat(currentprice)) {
					var discpercentage = (100-((100*discountprice)/currentprice)).toFixed(0);
					document.write('<div class="little-prices"><center>' +  format_currency(discountprice) + ' (-' + discpercentage + '%)</center></div>');
				} else {
					document.write('<div class="little-prices"><center>' + format_currency(currentprice) + '</center></div>');
				}	
				document.write('</div>');
				
				somePosts++;
				if (somePosts == relatedPostsNum) { break; }
			}
			
			if (r < relatedTitles.length - 1) {r++;}
			else {r = 0;}
			
			if(r==relsump) { break; }
		}
		document.write('</div><div style="clear:both;"></div></div>');
	}
}

function contains(a, e) {
  for(var j = 0; j < a.length; j++) if (a[j]==e) return true;
  return false;
}
//Related products

//----------------------------------- MANAGEMENT FUNCTIONS -----------------------------------

//Get and show the SKU
function show_product_sku() {
	document.write('<p>' + translate_sentence('Management info') + '</p>');
	if (postbody.match(/SKU:/gi)){
		SKU = extract_text(postbody, 'SKU:', '<br');
		if (SKU !== '' && SKU.length > 1) { document.write(translate_sentence('SKU') + ': <span class="item_number">' + SKU + '</span>'); }
	}
}
//Get and show the SKU

//Get and show the stock
function show_product_stock_admin() {
	if (product_stock !== false){
		document.write('<br>' + translate_sentence('Stock') + ': ' + product_stock + ' ');
		if (product_stock == 1) { show_translated_sentence('unit'); }
		else { show_translated_sentence('units'); }
	} else { document.write('<br>' + translate_sentence('Stock') + ': Infinite'); }
}
//Get and show the stock

//Get and show the supplier
function show_product_supplier() {
	if (postbody.match(/Supplier:/gi)){
		supplier = extract_text(postbody, 'Supplier:', '<br');
		if (supplier.length > 0 && typeof (supplier) === 'string'){
			document.write('<br>' + translate_sentence('Supplier') + ': ' + supplier);
			if (postbody.match(/Supplier website:/gi)){
				supplierweb = extract_text(postbody, 'Supplier website:', '<br');
				if (supplierweb.length > 0 && typeof (supplierweb) === 'string'){
					document.write(' (<a target="_blank" href="' + supplierweb + '">' + translate_sentence('See website') + '</a>)');
				}
			}
		}
	}
}
//Get and show the supplier

//Get and show the supplier price
function show_product_supplier_price() {
	if (postbody.match(/Supplier price:/gi)){
		supplier_price = extract_text(postbody, 'Supplier price:', '<br');
		if (!isNaN(supplier_price) && supplier_price !== null && supplier_price !== ''){
			document.write('<br>' + translate_sentence('Supplier price') + ': ' + format_currency(supplier_price));
		}
	}
}
//Get and show the supplier price

//Get and show the profit
function show_product_profit() {
	if (postbody.match(/Supplier price:/gi) && !isNaN(supplier_price)){
		supplier_price = extract_text(postbody, 'Supplier price:', '<br');
		if (parseFloat(discountprice) > 0 && parseFloat(discountprice) < parseFloat(currentprice)) { total = discountprice - supplier_price; }
		else { total = currentprice - supplier_price; }
		document.write('<br>' + translate_sentence('Profit') + ': ' + format_currency(total));
	}
}
//Get and show the profit

//Get and show the product weight
function show_product_weight() {
	if (postbody.match(/Product weight:/gi)){
		weight = extract_text(postbody, 'Product weight:', '<br');
		if (isNaN(weight) || weight === null || weight === ''){ weight = 0; }
		document.write('<br>' + translate_sentence('Product weight') + ': <span class="item_weight">' + weight + '</span>g');
	}
}
//Get and show the product weight

//Get and show the post author
function show_post_author() {
	var postauthor = document.getElementById('postauthor').innerHTML;
	document.write('<br>' + translate_sentence('Posted by') + ': ' + postauthor);
}
//Get and show the post author

//Get and show the item creation date
function show_product_date() {
	var timestamp = document.getElementById('timestamp').innerHTML;
	document.write('<br>' + translate_sentence('Date: ') + timestamp.replace('T', ' ').replace('+', ' GMT+').replace('Z', ''));
}
//Get and show the item creation date

//Get and show the edit product button
function show_edit_button() {
	var posteditUrl = document.getElementById('posteditUrl').innerHTML;
	document.write('<center><a href="' + posteditUrl + '" target="_blank"><div class="edit-button">' + translate_sentence('Edit product') + '</div></a></center>');
}
//Get and show the edit product button
	
}
